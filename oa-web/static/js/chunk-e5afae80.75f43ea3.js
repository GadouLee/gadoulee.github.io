(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e5afae80"],{"05d4":function(t,e,a){"use strict";a("5100")},"13d5":function(t,e,a){"use strict";var n=a("23e7"),r=a("d58f").left,i=a("a640"),s=a("ae40"),o=i("reduce"),c=s("reduce",{1:0});n({target:"Array",proto:!0,forced:!o||!c},{reduce:function(t){return r(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},3841:function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"g",(function(){return i})),a.d(e,"e",(function(){return s})),a.d(e,"c",(function(){return o})),a.d(e,"f",(function(){return c})),a.d(e,"d",(function(){return u})),a.d(e,"a",(function(){return l}));var n=a("b775");function r(t){return Object(n["a"])({url:"/Staffs/add",method:"post",data:t})}function i(t){return Object(n["a"])({url:"/Staffs/update",method:"post",data:t})}function s(t){return Object(n["a"])({url:"/Staffs/getInfo",method:"post",data:t})}function o(t){return Object(n["a"])({url:"/Staffs/delete",method:"post",data:t})}function c(t){return Object(n["a"])({url:"/Staffs/getList",method:"post",data:t})}function u(t){return Object(n["a"])({url:"/Publics/getArea",method:"post",data:t})}function l(t){return Object(n["a"])({url:"/Payments/deleteStaffBank",method:"post",data:t})}},5100:function(t,e,a){},"67f5":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("searchComponent",{attrs:{"search-config":t.searchConfig},on:{search:t.handleSearch}}),a("div",{staticClass:"extend-action"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("新增")]),a("el-button",{attrs:{size:"small"},on:{click:t.batchExport}},[t._v("批量导出")])],1),a("customTable",{attrs:{columns:t.columns,"data-source":t.dataSource,total:t.total,height:"calc(100vh - 310px)",loading:t.loading},on:{selectChange:t.handleSelectChange,pageChange:t.handlePageChange},scopedSlots:t._u([{key:"action",fn:function(e){return[a("div",{staticStyle:{display:"flex","justify-content":"space-around"}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){return t.handleToDetail(e.data)}}},[t._v("详情")]),0==e.data.state?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){return t.handleTop(e.data)}}},[t._v(t._s(e.data.istop?"取消置顶":"置顶主页"))]):t._e(),0==e.data.state?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){return t.handlePass(e.data)}}},[t._v("通过")]):t._e(),0==e.data.state?a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){return t.handleReject(e.data)}}},[t._v("驳回")]):t._e()],1)]}},{key:"detail",fn:function(e){return[a("el-link",{attrs:{type:"primary"},on:{click:function(a){return t.handleToDetail(e.data)}}},[t._v("查看")])]}},{key:"state_name",fn:function(e){return[a("el-tag",[t._v(t._s(e.data.state_name))])]}}])}),a("el-dialog",{attrs:{title:"新建审批项",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){return t.add(1)}}},[t._v("合同")]),a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){return t.add(2)}}},[t._v("开票")]),a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){return t.add(3)}}},[t._v("转账")])],1),a("el-dialog",{attrs:{title:"资金划转详情",visible:t.moneyModal,width:"30%"},on:{"update:visible":function(e){t.moneyModal=e}}},[a("p",[t._v("划转帐号："+t._s(t.moneyDetails.from))]),a("p",[t._v("操作:"+t._s(t.moneyDetails.type))]),a("p",[t._v("接收帐号："+t._s(t.moneyDetails.to))]),a("p",[t._v("划转金额："+t._s(t.moneyDetails.money))]),a("p",[t._v("备注："+t._s(t.moneyDetails.remarks))])])],1)},r=[],i=a("c7eb"),s=a("5530"),o=a("1da1"),c=(a("d81d"),a("e9c4"),a("a9e3"),a("b64b"),a("a573"),a("878f")),u=a("6cff"),l=a("429f"),d=a("277f"),p=a("ed08"),m={components:{customTable:c["a"],searchComponent:u["a"]},data:function(){return{moneyDetails:{},moneyModal:!1,dialogVisible:!1,columns:[{title:"审批编号",key:"id",minWidth:"120"},{title:"创建人",key:"create_name",minWidth:"120"},{title:"审批事项",key:"permit_type_name",minWidth:"120"},{title:"审批节点",key:"remarks",minWidth:"120"},{title:"上一节点审批时间",key:"update_time",minWidth:"120"},{title:"当前状态",key:"state_name",minWidth:"120",render:"state_name"},{title:"发起日期",key:"create_time",minWidth:"120"},{title:"快速操作",key:"action",fixed:"right",width:"300px",render:"action"}],dataSource:[],searchParams:{},total:0,loading:!1,companyList:[],searchConfig:{formItemLength:3,span:6,labelWidth:"80px",initValue:{},formItem:[{label:"立项时间",value:"date",type:"dateRange"},{label:"审批事项",value:"permit_type",type:"select",options:[{value:"1",label:"新建项目"},{value:"2",label:"结项"},{value:"3",label:"项目付款"},{value:"4",label:"项目开票"},{value:"5",label:"项目签约"},{value:"6",label:"商务费新建"},{value:"7",label:"商务费编辑"},{value:"8",label:"商务费删除"},{value:"9",label:"行政合同付款"},{value:"10",label:"行政合同开票"},{value:"11",label:"行政合同签约"},{value:"12",label:"发票冲红"},{value:"13",label:"发票作废"},{value:"14",label:"非项目付款"},{value:"15",label:"保证金垫款"},{value:"16",label:"保证金退还"}]}]}}},mounted:function(){this.$route.params.initValue?this.searchConfig.initValue=this.$route.params.initValue:this.getDataSource()},methods:{batchExport:function(){var t=this;return Object(o["a"])(Object(i["a"])().mark((function e(){var a,n,r;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(l["c"])(Object(s["a"])({page:1,limit:1e6},t.searchParams));case 2:a=e.sent,n=t.columns.map((function(t){return t.key})),r=[],a.data.map((function(t){var e={};n.map((function(a){e[a]=t[a]})),r.push(e)})),Object(p["b"])(r,t.$route.meta.title,t.columns.map((function(t){return t.title})),t.$route.meta.title);case 7:case"end":return e.stop()}}),e)})))()},handleTop:function(t){var e=this;return Object(o["a"])(Object(i["a"])().mark((function a(){var n;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(d["a"])({id:t.id});case 2:n=a.sent,200==n.code&&(e.getDataSource(),e.$message.success(n.msg));case 4:case"end":return a.stop()}}),a)})))()},handlePass:function(t){var e=this;return Object(o["a"])(Object(i["a"])().mark((function a(){var n;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(l["g"])({id:t.id,type:"1"});case 2:n=a.sent,200==n.code&&(e.getDataSource(),e.$message.success(n.msg));case 4:case"end":return a.stop()}}),a)})))()},handleReject:function(t){var e=this;return Object(o["a"])(Object(i["a"])().mark((function a(){var n;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(l["g"])({id:t.id,type:"2"});case 2:n=a.sent,200==n.code&&(e.getDataSource(),e.$message.success(n.msg));case 4:case"end":return a.stop()}}),a)})))()},handleToDetail:function(t){var e=this;return Object(o["a"])(Object(i["a"])().mark((function a(){var n,r,s;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(1==t.jump_type&&(console.log("rowrowrowrowrow",t),Object(p["c"])(e,"NewProject",{id:t.id,typeData:1,state:t.state,isTop:t.istop,permit_type_name:t.permit_type_name,state_name:t.state_name})),2==t.jump_type&&Object(p["c"])(e,"transfer_create",{id:t.id,type:2,state:t.state,isTop:t.istop,permit_type_name:t.permit_type_name,state_name:t.state_name}),3!=t.jump_type){a.next=10;break}return a.next=5,Object(d["x"])({id:t.id});case 5:n=a.sent,n.data.info.is_project="不归属项目"==n.data.info.is_project?0:1,n.data.info.project_id=Number(n.data.info.project_id),r=JSON.parse(JSON.stringify(n.data.info)),Object(p["c"])(e,"openInvoices",{data:JSON.stringify(r),type:3,state:n.data.state,id:n.data.id,isTop:t.istop,permit_type_name:t.permit_type_name,state_name:t.state_name});case 10:if(4==t.jump_type&&(11==t.permit_type&&Object(p["c"])(e,"administrative_create",{id:t.id,typeData:4,permitType:!0,state:t.state,isTop:t.istop,permit_type_name:t.permit_type_name,state_name:t.state_name}),Object(p["c"])(e,"administrative_create",{id:t.id,typeData:4,permitType:!1,state:t.state,isTop:t.istop,permit_type_name:t.permit_type_name,state_name:t.state_name})),5==t.jump_type&&Object(p["c"])(e,"PayRegister",{id:t.id,type:5,state:t.state,isTop:t.istop,permit_type_name:t.permit_type_name,state_name:t.state_name}),6==t.jump_type&&Object(p["c"])(e,"depositDetail",{bindId:t.bind_id,type:6,shenpiId:t.id,state:t.state,isTop:t.istop,permit_type_name:t.permit_type_name,state_name:t.state_name}),7!=t.jump_type){a.next=21;break}return a.next=16,Object(d["x"])({id:t.id});case 16:s=a.sent,console.log("resp",s),e.moneyDetails=s.data.info,e.itemState=0==t.state,e.moneyModal=!0;case 21:console.log("jump_type",t);case 22:case"end":return a.stop()}}),a)})))()},handleSelectChange:function(t){this.selectArr=t},handlePageChange:function(t){this.searchParams=Object(s["a"])(Object(s["a"])({},this.searchParams),t),this.getDataSource()},handleSearch:function(t){this.searchParams=Object(s["a"])(Object(s["a"])({},this.searchParams),t),t.date?(this.searchParams.start_time=t.date[0],this.searchParams.end_time=t.date[1]):(this.searchParams.start_time="",this.searchParams.end_time=""),this.getDataSource()},add:function(t){1==t&&this.$router.push({name:"administrative_create"}),2==t&&this.$router.push({name:"openInvoices"}),3==t&&this.$router.push({name:"transfer_create"})},getDataSource:function(){var t=this;return Object(o["a"])(Object(i["a"])().mark((function e(){var a;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,Object(l["c"])(t.searchParams);case 3:a=e.sent,t.loading=!1,t.total=a.count,t.dataSource=a.data,console.log(a);case 8:case"end":return e.stop()}}),e)})))()}}},f=m,h=(a("05d4"),a("2877")),b=Object(h["a"])(f,n,r,!1,null,"3a419953",null);e["default"]=b.exports},"7db0":function(t,e,a){"use strict";var n=a("23e7"),r=a("b727").find,i=a("44d2"),s=a("ae40"),o="find",c=!0,u=s(o);o in[]&&Array(1)[o]((function(){c=!1})),n({target:"Array",proto:!0,forced:c||!u},{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),i(o)},"9d4a":function(t,e,a){"use strict";var n=a("23e7"),r=a("2266"),i=a("1c0b"),s=a("825a");n({target:"Iterator",proto:!0,real:!0},{reduce:function(t){s(this),i(t);var e=arguments.length<2,a=e?void 0:arguments[1];if(r(this,(function(n){e?(e=!1,a=n):a=t(a,n)}),void 0,!1,!0),e)throw TypeError("Reduce of empty iterator with no initial value");return a}})},d58f:function(t,e,a){var n=a("1c0b"),r=a("7b0b"),i=a("44ad"),s=a("50c4"),o=function(t){return function(e,a,o,c){n(a);var u=r(e),l=i(u),d=s(u.length),p=t?d-1:0,m=t?-1:1;if(o<2)while(1){if(p in l){c=l[p],p+=m;break}if(p+=m,t?p<0:d<=p)throw TypeError("Reduce of empty array with no initial value")}for(;t?p>=0:d>p;p+=m)p in l&&(c=a(c,l[p],p,u));return c}};t.exports={left:o(!1),right:o(!0)}},ed08:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"a",(function(){return s})),a.d(e,"c",(function(){return o}));a("53ca"),a("d81d"),a("a434"),a("d3b7"),a("4d63"),a("ac1f"),a("2c3e"),a("00b4"),a("25f0"),a("4d90"),a("5319"),a("0643"),a("4e3e"),a("a573"),a("159b");var n=a("21a6"),r=a("25ca");a("bc3a"),a("aeb1");function i(t,e,a,i){var s=[],o=[],c=function(t){var e=0;for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&e++;return e};for(var u in t)if(console.log("------------------------"),Object.prototype.hasOwnProperty.call(t,u)){var l=t[u],d=[];for(var p in l)if(Object.prototype.hasOwnProperty.call(l,p)){var m=l[p];d.push(m),o.length<c(l)&&o.push(p)}s.push(d)}var f=[];a.map((function(t,e){"快速操作"!=t&&"详情"!=t&&f.push(t)})),s.splice(0,0,o,f),console.log("excel_data",r);var h=r["utils"].aoa_to_sheet(s),b=r["utils"].book_new(),_=[{hidden:!0}];h["!rows"]=_,r["utils"].book_append_sheet(b,h,i);var y=r["write"](b,{bookType:"xlsx",type:"array"}),v=new Blob([y],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});Object(n["saveAs"])(v,e+".xlsx")}function s(t){var e=-1!==t.lastIndexOf("?")?decodeURIComponent(t.substring(t.lastIndexOf("/")+1,t.lastIndexOf("?"))):decodeURIComponent(t.substring(t.lastIndexOf("/")+1)),a=e.substring(e.lastIndexOf(".")+1);if("png"==a||"jpg"==a||"pdf"==a){var r=document.createElement("a");r.href=t,r.download=e,r.target="_blank",r.click()}else fetch(t,{mode:"no-cors"}).then((function(t){return t.blob()})).then((function(t){console.log("blob",t),Object(n["saveAs"])(t,e)}))}function o(t,e,a){console.log("self",t);var n=t.$router.resolve({name:e,query:a});window.open(n.href,"_blank")}},fffc:function(t,e,a){"use strict";var n=a("23e7"),r=a("2266"),i=a("1c0b"),s=a("825a");n({target:"Iterator",proto:!0,real:!0},{find:function(t){return s(this),i(t),r(this,(function(e){if(t(e))return r.stop(e)}),void 0,!1,!0).result}})}}]);