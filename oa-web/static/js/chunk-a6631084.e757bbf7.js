(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a6631084"],{"2a47":function(t,e,l){"use strict";l.r(e);var o=function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",{staticStyle:{padding:"20px"}},[l("el-row",[l("el-col",{attrs:{span:24}},[l("el-button",{attrs:{type:"primary"},on:{click:t.handleAddPersonnel}},[t._v("新建")])],1)],1),l("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[l("el-table-column",{attrs:{label:"姓名"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(e.row.name))])]}}])}),l("el-table-column",{attrs:{label:"账号"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(e.row.username))])]}}])}),l("el-table-column",{attrs:{label:"权限组"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(e.row.group))])]}}])}),l("el-table-column",{attrs:{label:"电话"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(e.row.tel))])]}}])}),l("el-table-column",{attrs:{label:"时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(e.row.update_time))])]}}])}),l("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[1!=e.row.id?l("el-button",{staticStyle:{"margin-right":"10px"},attrs:{size:"mini"},on:{click:function(l){return t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]):t._e(),1!=e.row.id?l("el-popconfirm",{attrs:{title:"确定删除该条数据吗?"},on:{onConfirm:function(l){return t.handleDelete(e.$index,e.row)}}},[l("el-button",{attrs:{slot:"reference",size:"mini",type:"danger"},slot:"reference"},[t._v(" 删除 ")])],1):t._e()]}}])})],1),l("el-dialog",{attrs:{title:t.isAddPersonnel?"新建人员":"人员信息编辑",visible:t.systemModalVisible},on:{"update:visible":function(e){t.systemModalVisible=e}}},[l("el-form",{attrs:{model:t.form}},[l("el-form-item",{attrs:{label:"姓名","label-width":t.formLabelWidth}},[l("el-input",{attrs:{title:t.form.name,autocomplete:"off"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),l("el-form-item",{attrs:{label:"账号","label-width":t.formLabelWidth}},[l("el-input",{attrs:{title:t.form.username,autocomplete:"off"},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),l("el-form-item",{attrs:{label:"密码","label-width":t.formLabelWidth}},[l("el-input",{attrs:{title:t.form.password,autocomplete:"off","show-password":""},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),l("el-form-item",{attrs:{label:"邮箱","label-width":t.formLabelWidth}},[l("el-input",{attrs:{title:t.form.email,autocomplete:"off"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),l("el-form-item",{attrs:{label:"电话","label-width":t.formLabelWidth}},[l("el-input",{attrs:{title:t.form.tel,autocomplete:"off"},model:{value:t.form.tel,callback:function(e){t.$set(t.form,"tel",e)},expression:"form.tel"}})],1),l("el-form-item",{attrs:{label:"部门","label-width":t.formLabelWidth}},[l("el-input",{attrs:{title:t.form.department,autocomplete:"off"},model:{value:t.form.department,callback:function(e){t.$set(t.form,"department",e)},expression:"form.department"}})],1),l("el-form-item",{attrs:{label:"职位","label-width":t.formLabelWidth}},[l("el-input",{attrs:{title:t.form.position,autocomplete:"off"},model:{value:t.form.position,callback:function(e){t.$set(t.form,"position",e)},expression:"form.position"}})],1),l("el-form-item",{staticStyle:{display:"flex","flex-direction":"column"},attrs:{label:"用户组","label-width":t.formLabelWidth}},[l("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择",clearable:""},model:{value:t.form.group,callback:function(e){t.$set(t.form,"group",e)},expression:"form.group"}},t._l(t.roleData,(function(e){return l("el-option",{key:e.id,attrs:{title:t.form.group,label:e.title,value:e.id}})})),1)],1)],1),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(e){t.systemModalVisible=!1}}},[t._v("取 消")]),l("el-button",{attrs:{type:"primary"},on:{click:t.handleSavePersonnel}},[t._v("确 定")])],1)],1)],1)},s=[],a=l("5530"),i=(l("d81d"),l("b64b"),l("a573"),{name:"systemSettings",data:function(){return{isAddPersonnel:!1,isEdit:!1,systemModalVisible:!1,formLabelWidth:"auto",tableData:[],roleData:[],form:{name:"",username:"",password:"",email:"",tel:"",department:"",position:"",group:""}}},mounted:function(){var t=this;this.handleGetList(),this.loginUser=this.$store.state.user.userData,console.log("loginUser",this.$store.state.user.userData),this.$store.dispatch("user/requestList",{url:"/Authorize/getGroupList",limit:99999,page:1}).then((function(e){e.data.map((function(e){t.roleData.push({id:e.id,title:e.title})}))}))},methods:{resetFrom:function(){var t=this;Object.keys(this.form).map((function(e){t.form[e]=""}))},handleSavePersonnel:function(){var t=this;this.isAddPersonnel&&this.$store.dispatch("user/addUser",Object(a["a"])({},this.form)).then((function(e){t.$message("添加成功"),t.handleGetList(),t.resetFrom(),t.systemModalVisible=!1})),this.isEdit&&this.$store.dispatch("user/updateUserInfo",Object(a["a"])({},this.form)).then((function(e){t.form.password?t.$store.dispatch("user/updateUserPassword",{npassword:t.form.password,level:"1"}).then((function(e){200==e.code?(t.systemModalVisible=!1,t.handleGetList()):t.$message({type:"error",message:e.msg})})):t.handleGetList()}))},handleAddPersonnel:function(){this.resetFrom(),this.isAddPersonnel=!0,this.systemModalVisible=!0},handleEdit:function(t,e){var l=this;console.log(t,e),this.$store.dispatch("user/EditgetUserInfo",{id:e.id}).then((function(t){console.log("UserInfo",t),t.data.password="",l.form=t.data})),this.isEdit=!0,this.isAddPersonnel=!1,this.systemModalVisible=!0},handleDelete:function(t,e){var l=this;this.$store.dispatch("user/delUser",{id:e.id}).then((function(t){l.handleGetList()})),console.log(t,e)},handleGetList:function(){var t=this;this.$store.dispatch("user/requestList",{url:"/Users/getUserList",limit:99999,page:1}).then((function(e){console.log("111111111111",e),t.tableData=e.data}))}}}),r=i,n=(l("91fe"),l("2877")),d=Object(n["a"])(r,o,s,!1,null,"c8091e78",null);e["default"]=d.exports},"91fe":function(t,e,l){"use strict";l("da12")},da12:function(t,e,l){}}]);