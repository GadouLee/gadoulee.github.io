(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-88065312","chunk-23aa555e","chunk-6722536b"],{"0993":function(e,t,n){e.exports=n.p+"static/img/checked.f8521b5f.png"},"0ffb":function(e,t,n){},1959:function(e,t,n){"use strict";n("0ffb")},2068:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.permit_loading||e.initLoading,expression:"permit_loading || initLoading"}],staticStyle:{position:"relative",overflow:"hidden"}},[e.showSubmitBtn?e._e():i("div",{staticStyle:{position:"absolute",top:"5px",right:"300px","z-index":"10"}},["已审批"==e.state_name?i("img",{staticStyle:{display:"block",width:"150px"},attrs:{src:n("0993"),alt:""}}):e._e(),"审批中"==e.state_name?i("img",{staticStyle:{display:"block",width:"150px"},attrs:{src:n("9a04"),alt:""}}):e._e(),"已驳回"==e.state_name?i("img",{staticStyle:{display:"block",width:"150px"},attrs:{src:n("ac6f"),alt:""}}):e._e()]),e.permit_type_name?i("div",{staticStyle:{"margin-top":"50px"}},[i("span",{staticStyle:{"padding-left":"20px",color:"#666666"}},[e._v("审批事项："+e._s(e.permit_type_name))]),e.showIsTop?i("el-button",{staticStyle:{"margin-left":"20px"},attrs:{size:"small",type:"primary"},on:{click:e.handleTop}},[e._v(e._s(e.istop?"取消置顶":"置顶主页"))]):e._e()],1):e._e(),i("div",{staticStyle:{display:"flex","padding-top":"30px"}},[i("div",{staticStyle:{flex:"1",display:"flex","align-items":"center",padding:"20px","max-width":"550px"}},[i("div",{staticStyle:{"font-size":"16px"}},[e._v("选择发票类型：")]),i("el-select",{staticStyle:{width:"150px"},attrs:{disabled:(e.detailToCreate||e.formDisabled)&&e.from!==e.COMPONENT_OPEN_INFO.FROM_TREE_TO_INVOICE,placeholder:"请选择",size:"Default"},model:{value:e.invoicesType,callback:function(t){e.invoicesType=t},expression:"invoicesType"}},[i("el-option",{attrs:{label:"普通发票",value:"1"}}),i("el-option",{attrs:{label:"专用发票",value:"2"}})],1)],1),e.isAdmin?i("div",{staticStyle:{flex:"1",display:"flex","align-items":"center",padding:"20px"}},[i("div",{staticStyle:{"font-size":"16px"}},[e._v("是否归属项目：")]),i("el-select",{staticStyle:{width:"150px"},attrs:{disabled:e.detailToCreate||e.formDisabled,placeholder:"请选择",size:"Default"},on:{change:e.handleIsProjectChange},model:{value:e.reqParam.is_project,callback:function(t){e.$set(e.reqParam,"is_project",t)},expression:"reqParam.is_project"}},[i("el-option",{attrs:{label:"归属",value:1}}),i("el-option",{attrs:{label:"不归属",value:0}})],1)],1):e._e(),e.isAdmin?i("div",{staticStyle:{flex:"1",display:"flex","justify-content":"center","align-items":"center",padding:"20px"}},[i("div",{staticStyle:{"font-size":"16px"}},[e._v("选择项目：")]),i("el-select",{style:{width:(e.detailToCreate||e.formDisabled,"300px")},attrs:{disabled:e.detailToCreate||e.formDisabled,placeholder:"请选择",size:"Default",filterable:"",clearable:""},on:{change:function(t){return e.handleSelectChange(t,"project")}},model:{value:e.reqParam.project_id,callback:function(t){e.$set(e.reqParam,"project_id",t)},expression:"reqParam.project_id"}},e._l(e.projectList,(function(e,t){return i("el-option",{key:t,attrs:{label:e.project_name,value:e.id}})})),1)],1):e._e(),i("div",{staticStyle:{flex:"1",display:"flex","justify-content":"flex-end","align-items":"center",padding:"20px"}},[i("div",{staticStyle:{"font-size":"16px"}},[e._v("选择合同：")]),i("el-select",{style:{width:(e.detailToCreate||e.formDisabled,"300px")},attrs:{disabled:e.detailToCreate||e.formDisabled,placeholder:"请选择",size:"Default",filterable:"",clearable:""},on:{change:function(t){return e.handleSelectChange(t,"contract")}},model:{value:e.reqParam.contract_id,callback:function(t){e.$set(e.reqParam,"contract_id",t)},expression:"reqParam.contract_id"}},e._l(e.contractList,(function(e){return i("el-option",{key:e.id,attrs:{label:e.contract_name,value:e.id}})})),1)],1)]),e.showOcr?i("div",{staticClass:"w-full flex flex-row justify-end items-center px-normal"},[i("ocr-invoice",{on:{success:e.getOcrInfo}})],1):e._e(),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"invoices",staticStyle:{padding:"80px 20px"}},[i("div",{staticStyle:{"font-size":"25px","text-align":"center"}},[e._v("电子发票( "+e._s(1==e.invoicesType?"普通":"专用")+" )发票")]),e._m(0),i("div",{staticStyle:{display:"flex","font-size":"12px"}},[i("div",{staticStyle:{flex:"1",display:"flex","align-items":"center"}},[i("div",{staticStyle:{width:"30px","flex-shrink":"0",border:"1px solid #eee","text-align":"center",padding:"5px","border-bottom":"none"}},[e._v(" 购买方信息")]),i("div",{staticStyle:{height:"100%",width:"100%",display:"flex","flex-direction":"column"}},[i("div",{staticStyle:{flex:"1",border:"1px solid #eee","border-left":"none","border-right":"none",display:"flex","align-items":"center","padding-left":"5px"}},[e._v(" 名称: "),i("el-select",{staticClass:"text-important",staticStyle:{width:"calc(100% - 30px)"},attrs:{disabled:e.detailToCreate,placeholder:"请选择",size:"Default",filterable:"",clearable:""},model:{value:e.reqParam.payment_company_id,callback:function(t){e.$set(e.reqParam,"payment_company_id",t)},expression:"reqParam.payment_company_id"}},e._l(e.companyList,(function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1),i("div",{staticStyle:{flex:"1","border-right":"none",display:"flex","align-items":"center","padding-left":"5px"}},[e._v(" 统一社会信用代码/纳税人识别号: "),i("span",{staticStyle:{"padding-left":"5px",color:"#666"}},[e._v(e._s(e.payInvoice_code))])])])]),i("div",{staticStyle:{flex:"1",display:"flex","align-items":"center","font-size":"12px"}},[i("div",{staticStyle:{width:"30px","flex-shrink":"0",border:"1px solid #eee","text-align":"center",padding:"5px","border-bottom":"none"}},[e._v(" 销售方信息")]),i("div",{staticStyle:{height:"100%",width:"100%",display:"flex","flex-direction":"column"}},[i("div",{staticStyle:{flex:"1",border:"1px solid #eee","border-left":"none",display:"flex","align-items":"center","padding-left":"5px"}},[e._v(" 名称: "),i("el-select",{staticClass:"text-important",staticStyle:{width:"calc(100% - 30px)"},attrs:{disabled:e.detailToCreate,placeholder:"请选择",size:"Default",filterable:"",clearable:""},model:{value:e.reqParam.revenue_company_id,callback:function(t){e.$set(e.reqParam,"revenue_company_id",t)},expression:"reqParam.revenue_company_id"}},e._l(e.companyList,(function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1),i("div",{staticStyle:{flex:"1","border-right":"1px solid #eee",display:"flex","align-items":"center","padding-left":"5px"}},[e._v(" 统一社会信用代码/纳税人识别号:"),i("span",{staticStyle:{"padding-left":"5px",color:"#666"}},[e._v(e._s(e.revenue_Invoice_code))])])])])]),i("div",[i("div",{staticStyle:{display:"flex","font-size":"12px"}},[i("div",{staticStyle:{height:"30px","line-height":"30px","text-align":"center",flex:"1","border-left":"1px solid #eee","border-bottom":"1px solid #eee","border-right":"1px solid #eee","border-top":"1px solid #eee"}},[e._v(" 项目名称(必填) "),i("el-button",{attrs:{type:"text"},on:{click:e.handleAddItem}},[e._v("添加")])],1),i("div",{staticStyle:{height:"30px","line-height":"30px","text-align":"center",flex:"1","border-bottom":"1px solid #eee","border-right":"1px solid #eee","border-top":"1px solid #eee"}},[e._v(" 规格型号(选填)")]),i("div",{staticStyle:{height:"30px","line-height":"30px","text-align":"center",flex:"1","border-bottom":"1px solid #eee","border-right":"1px solid #eee","border-top":"1px solid #eee"}},[e._v(" 单位(必填)")]),i("div",{staticStyle:{height:"30px","line-height":"30px","text-align":"center",flex:"1","border-bottom":"1px solid #eee","border-right":"1px solid #eee","border-top":"1px solid #eee"}},[e._v(" 数量(必填)")]),i("div",{staticStyle:{height:"30px","line-height":"30px","text-align":"center",flex:"1","border-bottom":"1px solid #eee","border-right":"1px solid #eee","border-top":"1px solid #eee"}},[e._v(" 单价(含税)(必埴)")]),i("div",{staticStyle:{height:"30px","line-height":"30px","text-align":"center",flex:"1","border-bottom":"1px solid #eee","border-right":"1px solid #eee","border-top":"1px solid #eee"}},[e._v(" 金额(含税)(必埴)")]),i("div",{staticStyle:{height:"30px","line-height":"30px","text-align":"center",flex:"1","border-bottom":"1px solid #eee","border-right":"1px solid #eee","border-top":"1px solid #eee"}},[e._v(" 税率/征收率(必埴)")]),i("div",{staticStyle:{height:"30px","line-height":"30px","text-align":"center",flex:"1","border-bottom":"1px solid #eee","border-top":"1px solid #eee","border-right":"1px solid #eee"}},[e._v(" 税额(必埴)")])]),e._l(e.reqParam.info_data,(function(t,n){return i("div",{key:n,staticStyle:{display:"flex","font-size":"12px","box-sizing":"border-box"}},[i("div",{staticStyle:{height:"30px",flex:"1","border-left":"1px solid #eee","border-bottom":"1px solid #eee","border-right":"1px solid #eee"}},[i("el-input",{staticClass:"cumInput text-important-input",style:{height:"30px"},attrs:{title:t.project_name},on:{input:e.handleInput},model:{value:t.project_name,callback:function(n){e.$set(t,"project_name",n)},expression:"item.project_name"}})],1),i("div",{staticStyle:{height:"30px",flex:"1","border-bottom":"1px solid #eee","border-right":"1px solid #eee"}},[i("el-input",{staticClass:"cumInput text-important-input",attrs:{title:t.specifications},on:{input:e.handleInput},model:{value:t.specifications,callback:function(n){e.$set(t,"specifications",n)},expression:"item.specifications"}})],1),i("div",{staticStyle:{height:"30px",flex:"1","border-bottom":"1px solid #eee","border-right":"1px solid #eee"}},[i("el-input",{staticClass:"cumInput text-important-input",attrs:{title:t.unit},on:{input:e.handleInput},model:{value:t.unit,callback:function(n){e.$set(t,"unit",n)},expression:"item.unit"}})],1),i("div",{staticStyle:{height:"30px",flex:"1","border-bottom":"1px solid #eee","border-right":"1px solid #eee"}},[i("el-input",{staticClass:"cumInput text-important-input",attrs:{title:t.quantity},on:{input:function(t){return e.handleInput(t,n,"quantity")}},model:{value:t.quantity,callback:function(n){e.$set(t,"quantity",n)},expression:"item.quantity"}})],1),i("div",{staticStyle:{height:"30px",flex:"1","border-bottom":"1px solid #eee","border-right":"1px solid #eee"}},[i("el-input",{staticClass:"cumInput text-important-input",attrs:{title:t.unit_price},on:{input:function(t){return e.handleInput(t,n,"unit_price")}},model:{value:t.unit_price,callback:function(n){e.$set(t,"unit_price",n)},expression:"item.unit_price"}})],1),i("div",{staticStyle:{height:"30px",flex:"1","border-bottom":"1px solid #eee","border-right":"1px solid #eee"}},[i("el-input",{staticClass:"cumInput text-important-input",attrs:{title:t.total_amount},on:{input:function(t){return e.handleInput(t,n,"total_amount")}},model:{value:t.total_amount,callback:function(n){e.$set(t,"total_amount",n)},expression:"item.total_amount"}})],1),i("div",{staticStyle:{height:"30px",flex:"1","border-bottom":"1px solid #eee","border-right":"1px solid #eee"}},[i("el-input",{staticClass:"cumInput text-important-input",attrs:{title:t.tariff},on:{input:function(t){return e.handleInput(t,n,"tariff")}},model:{value:t.tariff,callback:function(n){e.$set(t,"tariff",n)},expression:"item.tariff"}})],1),i("div",{staticStyle:{height:"30px",flex:"1","border-bottom":"1px solid #eee","border-right":"1px solid #eee"}},[i("el-input",{staticClass:"cumInput",attrs:{title:t.tax},on:{input:function(t){return e.handleInput(t,n,"tax")}},model:{value:t.tax,callback:function(n){e.$set(t,"tax",n)},expression:"item.tax"}})],1)])})),i("div",{staticStyle:{display:"flex","font-size":"12px","box-sizing":"border-box"}},[i("div",{staticStyle:{height:"30px","line-height":"30px","text-align":"center",flex:"1","border-left":"1px solid #eee","border-bottom":"1px solid #eee","border-right":"1px solid #eee"}},[e._v(" 合计")]),i("div",{staticStyle:{height:"30px","line-height":"30px","text-align":"left",flex:"4","border-bottom":"1px solid #eee","border-right":"1px solid #eee"}},[i("span",{staticStyle:{"padding-left":"5px","font-size":"16px","font-weight":"bold"}},[e._v(e._s(e.all_price_upCase))])]),i("div",{staticStyle:{height:"30px","line-height":"30px","text-align":"center",flex:"1","border-bottom":"1px solid #eee","border-right":"1px solid #eee"}},[e._v(" (小写)￥")]),i("div",{staticStyle:{height:"30px","line-height":"30px","text-align":"left",flex:"2","border-bottom":"1px solid #eee","border-right":"1px solid #eee"}},[i("span",{staticStyle:{"padding-left":"5px","font-size":"16px","font-weight":"bold"}},[e._v(e._s(e.reqParam.money))])])]),i("div",{staticStyle:{display:"flex","font-size":"12px"}},[i("div",{staticStyle:{width:"20px","flex-shrink":"0",height:"50px","line-height":"25px","text-align":"center","border-left":"1px solid #eee","border-bottom":"1px solid #eee","border-right":"1px solid #eee"}},[e._v(" 备注")]),i("div",{staticStyle:{height:"50px","line-height":"50px","text-align":"center",flex:"1","border-bottom":"1px solid #eee","border-right":"1px solid #eee"}},[i("el-input",{staticClass:"cumInput text-important-input",attrs:{title:e.reqParam.remarks},model:{value:e.reqParam.remarks,callback:function(t){e.$set(e.reqParam,"remarks",t)},expression:"reqParam.remarks"}})],1)]),i("div",{staticStyle:{display:"flex"}},[i("div",{staticStyle:{height:"50px","line-height":"50px","text-align":"center",flex:"1","border-left":"1px solid #eee","border-bottom":"1px solid #eee","border-right":"1px solid #eee"}},["draft_edit"===e.withModal.type?i("div",{staticClass:"flex flex-row justify-center"},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.editContractDraft}},[e._v("保存修改")]),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.handleInvoicesAdd(!0)}}},[e._v("转为创建")])],1):e._e(),"create"===e.withModal.type?i("el-button",{attrs:{size:"mini"},on:{click:e.createDraft}},[e._v("保存为草稿")]):e._e(),e.showSubmitBtn?i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handleInvoicesAdd}},[e._v("提交")]):e._e(),e.canyuShow?i("div",[e.showSubmitBtn||0!=e.stateFlag?e._e():i("div",{staticClass:"action",staticStyle:{"text-align":"center"}},[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.handlePass()}}},[e._v("通过")]),i("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(t){return e.handleReject()}}},[e._v("驳回")]),e.permit_response&&void 0!==e.permit_response.project_id?i("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.toProjectDetail}},[e._v("Go项目脑图审批")]):e._e()],1)]):e._e()],1)])],2)])])},a=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{display:"flex","justify-content":"center"}},[n("div",{staticStyle:{"font-size":"14px",display:"flex",margin:"20px"}},[n("div",[e._v("发票号码:以最终开出发票为准")]),n("div",{staticStyle:{"margin-left":"20px"}},[e._v("开票日期:以最终开出发票为准")])])])}],r=n("5530"),o=n("c7eb"),s=n("1da1"),c=(n("99af"),n("7db0"),n("caad"),n("d81d"),n("b0c0"),n("e9c4"),n("a9e3"),n("b680"),n("b64b"),n("d3b7"),n("0643"),n("fffc"),n("a573"),n("277f")),l=n("429f"),u=n("9beb"),d=n("267e"),f=n("ed08"),p=n("38d4"),h=n("9853"),m={components:{ocrInvoice:h["a"]},props:{withModal:{type:Object,default:void 0}},data:function(){return{loading:!1,showOcr:!1,COMPONENT_OPEN_INFO:d["a"],state_name:"",permit_type_name:"",istop:!1,showIsTop:!1,formDisabled:!1,isAdd:!0,canyuShow:!0,isAdmin:!0,showSubmitBtn:!0,invoicesType:"2",all_price_upCase:"",companyList:[],projectList:[],contractList:[],payInvoice_code:"",revenue_Invoice_code:"",reqParam:{is_project:0,project_id:"",contract_id:"",type:"",payment_company_id:"",money:"",revenue_company_id:"",remarks:"",info_data:[{project_name:"",specifications:"",unit:"",quantity:"",unit_price:"",total_amount:"",tariff:"",tax:""},{project_name:"",specifications:"",unit:"",quantity:"",unit_price:"",total_amount:"",tariff:"",tax:""},{project_name:"",specifications:"",unit:"",quantity:"",unit_price:"",total_amount:"",tariff:"",tax:""}]},detailToCreate:!1,from:"",permit_response:void 0,permit_loading:!1,initLoading:!1}},watch:{reqParam:{handler:function(e,t){var n=this;this.companyList&&this.companyList.map((function(t,i){t.id===e.payment_company_id&&(n.payInvoice_code=t.invoice_code),t.id===e.revenue_company_id&&(n.revenue_Invoice_code=t.invoice_code)}));var i=0;e.info_data.map((function(e){i=Number(i)+Number(e.total_amount)})),this.publicsNumToUpper(i),this.reqParam.money=i.toFixed(2)},deep:!0,immediate:!0},"reqParam.project_id":{handler:function(e,t){e!==t&&(this.reqParam.contract_id="")},deep:!0}},mounted:function(){var e=this;return Object(s["a"])(Object(o["a"])().mark((function t(){var n,i,a,r,s,l,u,d;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.withModal){t.next=27;break}return e.initLoading=!0,e.state_name=null===(n=e.withModal.permit_row)||void 0===n?void 0:n.state_name,e.permit_type_name=null===(i=e.withModal.permit_row)||void 0===i?void 0:i.permit_type_name,e.istop=null===(a=e.withModal.permit_row)||void 0===a?void 0:a.istop,e.showIsTop=(null===(r=e.withModal.permit_row)||void 0===r?void 0:r.state)>=0,t.next=8,e.getCompanyList();case 8:if(e.withModal.hide_permit_btn&&(e.canyuShow=!1),"create"===e.withModal.type&&(e.showOcr=!0),!e.withModal.data){t.next=25;break}if(s=e.withModal.data,Object(c["l"])({project_id:e.withModal.data.project_id}).then((function(t){e.contractList=t.data,e.reqParam.contract_id=e.withModal.data.contract_id})),"普票"===s.type?e.invoicesType="1":e.invoicesType="2","draft_edit"===e.withModal.type&&(e.showSubmitBtn=!1),!["edit","audit"].includes(e.withModal.type)){t.next=23;break}if("audit"!==e.withModal.type){t.next=20;break}return e.formDisabled=!0,t.next=20,e.getPermitInfos();case 20:e.stateId=e.withModal.id,e.stateFlag=e.withModal.data.state,e.showSubmitBtn=!1;case 23:e.$store.state.company.companyList.map((function(t,n){t.id===s.payment_company_id&&(e.payInvoice_code=t.invoice_code),t.id===s.revenue_company_id&&(e.revenue_Invoice_code=t.invoice_code)})),e.reqParam=s;case 25:return e.initLoading=!1,t.abrupt("return");case 27:e.state_name=e.$route.query.state_name,e.permit_type_name=e.$route.query.permit_type_name,e.istop="1"===e.$route.query.isTop,e.showIsTop="0"===e.$route.query.state,e.getCompanyList(),e.$route.query.canyuShow||void 0===e.$route.query.canyuShow||(e.canyuShow=e.$route.query.canyuShow),e.$route.query.data&&(l=JSON.parse(e.$route.query.data),Object(c["l"])({project_id:JSON.parse(e.$route.query.data).project_id}).then((function(t){e.contractList=t.data,e.reqParam.contract_id=e.$route.query.detailToCreate?JSON.parse(e.$route.query.data).id:JSON.parse(e.$route.query.data).contract_id})),"普票"===l.type?e.invoicesType="1":e.invoicesType="2",u=JSON.parse(e.$route.query.data),e.$route.query.type?("3"===e.$route.query.type&&(e.formDisabled=!0,e.getPermitInfos()),e.stateId=e.$route.query.id||(null===(d=e.withModal)||void 0===d?void 0:d.id),e.stateFlag=e.$route.query.state,e.showSubmitBtn=!1):(e.showOcr=!0,u.contract_id=u.id,u.payment_company_id=u.contract_party_a_company_id,u.revenue_company_id=u.contract_party_b_company_id,u.info_data=[{project_name:"",specifications:"",unit:"",quantity:"",unit_price:"",total_amount:"",tariff:"",tax:""},{project_name:"",specifications:"",unit:"",quantity:"",unit_price:"",total_amount:"",tariff:"",tax:""},{project_name:"",specifications:"",unit:"",quantity:"",unit_price:"",total_amount:"",tariff:"",tax:""}]),e.$store.state.company.companyList.map((function(t,n){t.id===u.payment_company_id&&(e.payInvoice_code=t.invoice_code),t.id===u.revenue_company_id&&(e.revenue_Invoice_code=t.invoice_code)})),e.$route.query.noRemark&&(u.remarks=""),e.reqParam=u),e.$route.query.detailToCreate&&(e.detailToCreate=e.$route.query.detailToCreate),(e.$route.query.from||e.withModal.from)&&(e.from=e.$route.query.from||e.withModal.from),e.$route.params.isAdmin||void 0===e.$route.params.isAdmin||(e.isAdmin=e.$route.params.isAdmin);case 37:case"end":return t.stop()}}),t)})))()},methods:{getOcrInfo:function(e){var t=e.data;this.invoicesType=-1===t.title.indexOf("专票")?"2":"1";var n=this.companyList.find((function(e){return e.name===t.purchaserName}));n&&(this.reqParam.payment_company_id=n.id);var i=this.companyList.find((function(e){return e.name===t.sellerName}));if(i&&(this.reqParam.revenue_company_id=i.id),t.totalAmountInWords&&(this.all_price_upCase=t.totalAmountInWords),t.totalAmount&&(this.reqParam.money=t.totalAmount),t.invoiceDetails){for(var a=[],r=0;r<t.invoiceDetails.length;r++)a.push({project_name:t.invoiceDetails[r].itemName,unit:t.invoiceDetails[r].unit,specifications:t.invoiceDetails[r].specification,quantity:t.invoiceDetails[r].quantity,unit_price:t.invoiceDetails[r].unitPrice,total_amount:t.invoiceDetails[r].amount,tariff:t.invoiceDetails[r].taxRate,tax:t.invoiceDetails[r].tax});this.reqParam.info_data=a}},toProjectDetail:function(){var e=this,t=e.permit_response.info;"未签约"===t.main_contract_id?Object(f["c"])(this,"NewProject",{data:JSON.stringify(t),type:"edit",isTop:t.istop}):Object(f["c"])(this,"projectDetail",{id:t.id,isTop:t.istop})},getPermitInfos:function(){var e=this;return Object(s["a"])(Object(o["a"])().mark((function t(){var n,i,a,s;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.permit_loading=!0,t.next=3,Object(c["z"])({id:(null===(n=e.withModal)||void 0===n?void 0:n.permit_id)||e.$route.query.permit_id});case 3:return i=t.sent,a=i.data.project_id,e.reqParam.is_project=!!a,e.reqParam.project_id=a,t.next=9,Object(l["e"])(a);case 9:s=t.sent,e.permit_response=Object(r["a"])(Object(r["a"])({},i.data),{},{info:s.data[0]||{}}),e.permit_loading=!1;case 12:case"end":return t.stop()}}),t)})))()},handleTop:function(e){var t=this;return Object(s["a"])(Object(o["a"])().mark((function e(){var n,i;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["a"])({id:(null===(n=t.withModal)||void 0===n?void 0:n.permit_id)||t.$route.query.id});case 2:i=e.sent,200===i.code&&(t.$message.success(i.msg),t.istop=!t.istop);case 4:case"end":return e.stop()}}),e)})))()},handleInvoicesAdd:function(){var e=arguments,t=this;return Object(s["a"])(Object(o["a"])().mark((function n(){var i,a,s,l;return Object(o["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i=e.length>0&&void 0!==e[0]&&e[0],!t.isAdmin){n.next=6;break}if(t.isAdd){n.next=6;break}if(t.reqParam.project_id){n.next=6;break}return t.$message({type:"warning",message:"请选择项目"}),n.abrupt("return");case 6:if(a=!1,t.reqParam.info_data.map((function(e){e.project_name&&e.unit&&e.quantity&&e.unit_price&&e.total_amount&&e.tariff&&e.tax&&(a=!0)})),a){n.next=11;break}return t.$message("请完整填写表格每一项"),n.abrupt("return");case 11:return s=Object(r["a"])(Object(r["a"])({},t.reqParam),{},{type:t.invoicesType,info_data:JSON.stringify(t.reqParam.info_data)}),n.next=14,Object(c["s"])(s);case 14:l=n.sent,l&&t.$message({type:"success",message:"添加成功"}),t.payInvoice_code="",t.revenue_Invoice_code="",t.reqParam={is_project:0,project_id:"",contract_id:"",type:"",payment_company_id:"",money:"",revenue_company_id:"",remarks:"",info_data:[{project_name:"",specifications:"",unit:"",quantity:"",unit_price:"",total_amount:"",tariff:"",tax:""},{project_name:"",specifications:"",unit:"",quantity:"",unit_price:"",total_amount:"",tariff:"",tax:""},{project_name:"",specifications:"",unit:"",quantity:"",unit_price:"",total_amount:"",tariff:"",tax:""}]},i?t.$emit("draftToCreate",t.withModal.id):(t.$emit("refreshList"),t.$emit("close"));case 20:case"end":return n.stop()}}),n)})))()},createDraft:function(){var e=this;return Object(s["a"])(Object(o["a"])().mark((function t(){var n,i;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,n=Object(r["a"])(Object(r["a"])({},e.reqParam),{},{type:e.invoicesType,info_data:JSON.stringify(e.reqParam.info_data)}),t.next=5,Object(p["a"])(n);case 5:i=t.sent,200===i.code?e.$message({type:"success",message:"添加成功"}):e.$message({type:"error",message:i.msg}),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),console.log("[保存发票草稿出错]",t.t0);case 12:return t.prev=12,e.loading=!1,t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,9,12,15]])})))()},editContractDraft:function(){var e=this;return Object(s["a"])(Object(o["a"])().mark((function t(){var n,i;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.withModal.id){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,e.loading=!0,n=Object(r["a"])(Object(r["a"])({id:e.withModal.id},e.reqParam),{},{type:e.invoicesType,info_data:JSON.stringify(e.reqParam.info_data)}),t.next=7,Object(p["a"])(n);case 7:i=t.sent,200===i.code?e.$message({type:"success",message:"保存成功"}):e.$message({type:"error",message:i.msg}),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](2),console.log("[保存发票草稿出错]",t.t0);case 14:return t.prev=14,e.loading=!1,t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[2,11,14,17]])})))()},handleInput:function(e,t,n){var i=this;this.$forceUpdate(),this.companyList.map((function(e,t){e.id==i.reqParam.payment_company_id&&(i.payInvoice_code=e.invoice_code),e.id==i.reqParam.revenue_company_id&&(i.revenue_Invoice_code=e.invoice_code)}));var a=0;if(this.reqParam.info_data.map((function(e){a=Number(a)+Number(e.total_amount)})),this.publicsNumToUpper(a),this.reqParam.money=a,n){var r=this.reqParam.info_data[t];switch(n){case"quantity":if(!e)return void(r.total_amount="");if(r.total_amount)r.unit_price=Object(u["a"])("".concat(r.total_amount,"/").concat(e));else{if(!r.unit_price)return;r.total_amount=Object(u["a"])("".concat(r.unit_price,"*").concat(e))}break;case"unit_price":if(!e)return void(r.total_amount="");if(!r.quantity)return;r.total_amount=Object(u["a"])("".concat(r.quantity,"*").concat(e));break;case"total_amount":if(!e)return r.tax="",void(r.unit_price="");r.quantity&&(r.unit_price=Object(u["a"])("".concat(e,"/").concat(r.quantity)));break;case"tariff":break;case"tax":break}r.tariff?r.total_amount&&(r.tax=Object(u["a"])("".concat(r.total_amount,"-(").concat(r.total_amount,"/(1+(").concat(r.tariff,"*0.01)))")).toFixed(5)):r.tax=""}},handlePass:function(e){var t=this;return Object(s["a"])(Object(o["a"])().mark((function e(){var n;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(l["j"])({id:t.stateId,type:"1"});case 2:n=e.sent,200===n.code&&(t.$message.success(n.msg),t.withModal?t.$emit("close"):t.$router.push({name:"pendApprovalList"}));case 4:case"end":return e.stop()}}),e)})))()},handleReject:function(e){var t=this;return Object(s["a"])(Object(o["a"])().mark((function e(){var n;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(l["j"])({id:t.stateId,type:"2"});case 2:n=e.sent,200===n.code&&(t.$message.success(n.msg),t.withModal?t.$emit("close"):t.$router.push({name:"pendApprovalList"}));case 4:case"end":return e.stop()}}),e)})))()},publicsNumToUpper:function(e){var t=this;return Object(s["a"])(Object(o["a"])().mark((function n(){var i;return Object(o["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(c["A"])({number:e});case 2:i=n.sent,t.all_price_upCase=i.data.str;case 4:case"end":return n.stop()}}),n)})))()},handleAddItem:function(){console.log("this.reqParam.info_data",this.reqParam.info_data),this.reqParam.info_data.push({project_name:"",specifications:"",unit:"",quantity:"",unit_price:"",total_amount:"",tariff:"",tax:""})},getCompanyList:function(){var e=this;return Object(s["a"])(Object(o["a"])().mark((function t(){var n,i,a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,t.next=4,Object(c["n"])();case 4:return n=t.sent,t.next=7,Object(c["m"])();case 7:return i=t.sent,t.next=10,Object(c["l"])();case 10:a=t.sent,e.companyList=n.data,e.$store.commit("company/setCompanyList",n.data),e.projectList=i.data,e.$store.commit("company/setProjectList",i.data),0==e.reqParam.is_project&&(e.contractList=a.data,e.$store.commit("company/setContractList",a.data)),t.next=21;break;case 18:t.prev=18,t.t0=t["catch"](0),console.error(t.t0);case 21:return t.prev=21,e.loading=!1,t.finish(21);case 24:case"end":return t.stop()}}),t,null,[[0,18,21,24]])})))()},handleSelectChange:function(e,t){var n=this;if("project"===t){if(0==this.reqParam.is_project)return;this.reqParam.contract_id="",this.reqParam.payment_company_id="",this.reqParam.revenue_company_id="",this.payInvoice_code="",this.revenue_Invoice_code="",Object(c["l"])({project_id:e}).then((function(e){n.contractList=e.data}))}else{this.$forceUpdate();var i=this.contractList.find((function(t){return t.id==e}));i?(this.reqParam.payment_company_id=i.contract_party_a_company_id,this.reqParam.revenue_company_id=i.contract_party_b_company_id):(this.reqParam.payment_company_id="",this.reqParam.revenue_company_id="",this.payInvoice_code="",this.revenue_Invoice_code="")}},handleIsProjectChange:function(e){var t=this;this.reqParam.contract_id="",this.reqParam.project_id="",this.reqParam.payment_company_id="",this.reqParam.revenue_company_id="",this.payInvoice_code="",this.revenue_Invoice_code="",0==e&&Object(c["l"])().then((function(e){t.contractList=e.data}))}}},b=m,v=(n("1959"),n("2877")),_=Object(v["a"])(b,i,a,!1,null,"745e4b67",null);t["default"]=_.exports},"267e":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i={FROM_TREE_TO_INVOICE:"FROM_TREE_TO_INVOICE",FROM_DASHBOARD_TO_APPROVAL:"FROM_DASHBOARD_TO_APPROVAL",FROM_TREE_TO_TRANSFER:"FROM_TREE_TO_TRANSFER",FROM_TREE_TO_INVOICE_LIST:"FROM_TREE_TO_INVOICE_LIST",FROM_TREE_TO_TRANSFER_CREATE:"FROM_TREE_TO_TRANSFER_CREATE"}},3841:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"g",(function(){return r})),n.d(t,"e",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"f",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"a",(function(){return u}));var i=n("b775");function a(e){return Object(i["a"])({url:"/Staffs/add",method:"post",data:e})}function r(e){return Object(i["a"])({url:"/Staffs/update",method:"post",data:e})}function o(e){return Object(i["a"])({url:"/Staffs/getInfo",method:"post",data:e})}function s(e){return Object(i["a"])({url:"/Staffs/delete",method:"post",data:e})}function c(e){return Object(i["a"])({url:"/Staffs/getList",method:"post",data:e})}function l(e){return Object(i["a"])({url:"/Publics/getArea",method:"post",data:e})}function u(e){return Object(i["a"])({url:"/Payments/deleteStaffBank",method:"post",data:e})}},"38d4":function(e,t,n){"use strict";n.d(t,"h",(function(){return a})),n.d(t,"i",(function(){return r})),n.d(t,"g",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"f",(function(){return c})),n.d(t,"a",(function(){return l})),n.d(t,"e",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return f}));var i=n("b775");function a(e){return Object(i["a"])({url:"/Invoices/getList",method:"post",data:e})}function r(e){return Object(i["a"])({url:"/Invoices/offsetRed",method:"post",data:e})}function o(e){return Object(i["a"])({url:"/Invoices/cancel",method:"post",data:e})}function s(e){return Object(i["a"])({url:"/BusinessExpensess/getStatistics",method:"post",data:e})}function c(e){return Object(i["a"])({url:"/Invoices/getDraftList",method:"post",data:e})}function l(e){return Object(i["a"])({url:e.id?"/Invoices/editDraft":"/Invoices/draftAdd",method:"post",data:e})}function u(e){return Object(i["a"])({url:"/Invoices/draftInfo?id=".concat(e.id),method:"post",data:e})}function d(e){return Object(i["a"])({url:"/Invoices/draftDel",method:"post",data:e})}var f=function(e){var t=new FormData;return t.append("files",e),Object(i["a"])({url:"/Publics/recognizeInvoice",method:"post",data:t})}},"408a":function(e,t,n){var i=n("c6b6");e.exports=function(e){if("number"!=typeof e&&"Number"!=i(e))throw TypeError("Incorrect invocation");return+e}},4678:function(e,t,n){var i={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-ps":"4c98","./ar-ps.js":"4c98","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df48","./fa.js":"8df48","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b46","./gd.js":"f6b46","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku-kmr":"7558","./ku-kmr.js":"7558","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e9","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e9","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function a(e){var t=r(e);return n(t)}function r(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=r,e.exports=a,a.id="4678"},"70ec":function(e,t,n){"use strict";n("acac")},"8a3c2":function(e,t,n){"use strict";n("c40e")},"901e":function(e,t,n){var i;(function(a){"use strict";var r,o=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,s=Math.ceil,c=Math.floor,l="[BigNumber Error] ",u=l+"Number primitive has more than 15 significant digits: ",d=1e14,f=14,p=9007199254740991,h=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],m=1e7,b=1e9;function v(e){var t,n,i,a=A.prototype={constructor:A,toString:null,valueOf:null},r=new A(1),k=20,S=4,P=-7,q=21,I=-1e7,D=1e7,T=!1,N=1,C=0,E={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},M="0123456789abcdefghijklmnopqrstuvwxyz",$=!0;function A(e,t){var a,r,s,l,d,h,m,b,v=this;if(!(v instanceof A))return new A(e,t);if(null==t){if(e&&!0===e._isBigNumber)return v.s=e.s,void(!e.c||e.e>D?v.c=v.e=null:e.e<I?v.c=[v.e=0]:(v.e=e.e,v.c=e.c.slice()));if((h="number"==typeof e)&&0*e==0){if(v.s=1/e<0?(e=-e,-1):1,e===~~e){for(l=0,d=e;d>=10;d/=10,l++);return void(l>D?v.c=v.e=null:(v.e=l,v.c=[e]))}b=String(e)}else{if(!o.test(b=String(e)))return i(v,b,h);v.s=45==b.charCodeAt(0)?(b=b.slice(1),-1):1}(l=b.indexOf("."))>-1&&(b=b.replace(".","")),(d=b.search(/e/i))>0?(l<0&&(l=d),l+=+b.slice(d+1),b=b.substring(0,d)):l<0&&(l=b.length)}else{if(x(t,2,M.length,"Base"),10==t&&$)return v=new A(e),F(v,k+v.e+1,S);if(b=String(e),h="number"==typeof e){if(0*e!=0)return i(v,b,h,t);if(v.s=1/e<0?(b=b.slice(1),-1):1,A.DEBUG&&b.replace(/^0\.0*|\./,"").length>15)throw Error(u+e)}else v.s=45===b.charCodeAt(0)?(b=b.slice(1),-1):1;for(a=M.slice(0,t),l=d=0,m=b.length;d<m;d++)if(a.indexOf(r=b.charAt(d))<0){if("."==r){if(d>l){l=m;continue}}else if(!s&&(b==b.toUpperCase()&&(b=b.toLowerCase())||b==b.toLowerCase()&&(b=b.toUpperCase()))){s=!0,d=-1,l=0;continue}return i(v,String(e),h,t)}h=!1,b=n(b,t,10,v.s),(l=b.indexOf("."))>-1?b=b.replace(".",""):l=b.length}for(d=0;48===b.charCodeAt(d);d++);for(m=b.length;48===b.charCodeAt(--m););if(b=b.slice(d,++m)){if(m-=d,h&&A.DEBUG&&m>15&&(e>p||e!==c(e)))throw Error(u+v.s*e);if((l=l-d-1)>D)v.c=v.e=null;else if(l<I)v.c=[v.e=0];else{if(v.e=l,v.c=[],d=(l+1)%f,l<0&&(d+=f),d<m){for(d&&v.c.push(+b.slice(0,d)),m-=f;d<m;)v.c.push(+b.slice(d,d+=f));d=f-(b=b.slice(d)).length}else d-=m;for(;d--;b+="0");v.c.push(+b)}}else v.c=[v.e=0]}function L(e,t,n,i){var a,r,o,s,c;if(null==n?n=S:x(n,0,8),!e.c)return e.toString();if(a=e.c[0],o=e.e,null==t)c=y(e.c),c=1==i||2==i&&(o<=P||o>=q)?w(c,o):O(c,o,"0");else if(e=F(new A(e),t,n),r=e.e,c=y(e.c),s=c.length,1==i||2==i&&(t<=r||r<=P)){for(;s<t;c+="0",s++);c=w(c,r)}else if(t-=o,c=O(c,r,"0"),r+1>s){if(--t>0)for(c+=".";t--;c+="0");}else if(t+=r-s,t>0)for(r+1==s&&(c+=".");t--;c+="0");return e.s<0&&a?"-"+c:c}function R(e,t){for(var n,i,a=1,r=new A(e[0]);a<e.length;a++)i=new A(e[a]),(!i.s||(n=g(r,i))===t||0===n&&r.s===t)&&(r=i);return r}function z(e,t,n){for(var i=1,a=t.length;!t[--a];t.pop());for(a=t[0];a>=10;a/=10,i++);return(n=i+n*f-1)>D?e.c=e.e=null:n<I?e.c=[e.e=0]:(e.e=n,e.c=t),e}function F(e,t,n,i){var a,r,o,l,u,p,m,b=e.c,v=h;if(b){e:{for(a=1,l=b[0];l>=10;l/=10,a++);if(r=t-a,r<0)r+=f,o=t,u=b[p=0],m=c(u/v[a-o-1]%10);else if(p=s((r+1)/f),p>=b.length){if(!i)break e;for(;b.length<=p;b.push(0));u=m=0,a=1,r%=f,o=r-f+1}else{for(u=l=b[p],a=1;l>=10;l/=10,a++);r%=f,o=r-f+a,m=o<0?0:c(u/v[a-o-1]%10)}if(i=i||t<0||null!=b[p+1]||(o<0?u:u%v[a-o-1]),i=n<4?(m||i)&&(0==n||n==(e.s<0?3:2)):m>5||5==m&&(4==n||i||6==n&&(r>0?o>0?u/v[a-o]:0:b[p-1])%10&1||n==(e.s<0?8:7)),t<1||!b[0])return b.length=0,i?(t-=e.e+1,b[0]=v[(f-t%f)%f],e.e=-t||0):b[0]=e.e=0,e;if(0==r?(b.length=p,l=1,p--):(b.length=p+1,l=v[f-r],b[p]=o>0?c(u/v[a-o]%v[o])*l:0),i)for(;;){if(0==p){for(r=1,o=b[0];o>=10;o/=10,r++);for(o=b[0]+=l,l=1;o>=10;o/=10,l++);r!=l&&(e.e++,b[0]==d&&(b[0]=1));break}if(b[p]+=l,b[p]!=d)break;b[p--]=0,l=1}for(r=b.length;0===b[--r];b.pop());}e.e>D?e.c=e.e=null:e.e<I&&(e.c=[e.e=0])}return e}function B(e){var t,n=e.e;return null===n?e.toString():(t=y(e.c),t=n<=P||n>=q?w(t,n):O(t,n,"0"),e.s<0?"-"+t:t)}return A.clone=v,A.ROUND_UP=0,A.ROUND_DOWN=1,A.ROUND_CEIL=2,A.ROUND_FLOOR=3,A.ROUND_HALF_UP=4,A.ROUND_HALF_DOWN=5,A.ROUND_HALF_EVEN=6,A.ROUND_HALF_CEIL=7,A.ROUND_HALF_FLOOR=8,A.EUCLID=9,A.config=A.set=function(e){var t,n;if(null!=e){if("object"!=typeof e)throw Error(l+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(n=e[t],x(n,0,b,t),k=n),e.hasOwnProperty(t="ROUNDING_MODE")&&(n=e[t],x(n,0,8,t),S=n),e.hasOwnProperty(t="EXPONENTIAL_AT")&&(n=e[t],n&&n.pop?(x(n[0],-b,0,t),x(n[1],0,b,t),P=n[0],q=n[1]):(x(n,-b,b,t),P=-(q=n<0?-n:n))),e.hasOwnProperty(t="RANGE"))if(n=e[t],n&&n.pop)x(n[0],-b,-1,t),x(n[1],1,b,t),I=n[0],D=n[1];else{if(x(n,-b,b,t),!n)throw Error(l+t+" cannot be zero: "+n);I=-(D=n<0?-n:n)}if(e.hasOwnProperty(t="CRYPTO")){if(n=e[t],n!==!!n)throw Error(l+t+" not true or false: "+n);if(n){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw T=!n,Error(l+"crypto unavailable");T=n}else T=n}if(e.hasOwnProperty(t="MODULO_MODE")&&(n=e[t],x(n,0,9,t),N=n),e.hasOwnProperty(t="POW_PRECISION")&&(n=e[t],x(n,0,b,t),C=n),e.hasOwnProperty(t="FORMAT")){if(n=e[t],"object"!=typeof n)throw Error(l+t+" not an object: "+n);E=n}if(e.hasOwnProperty(t="ALPHABET")){if(n=e[t],"string"!=typeof n||/^.?$|[+\-.\s]|(.).*\1/.test(n))throw Error(l+t+" invalid: "+n);$="0123456789"==n.slice(0,10),M=n}}return{DECIMAL_PLACES:k,ROUNDING_MODE:S,EXPONENTIAL_AT:[P,q],RANGE:[I,D],CRYPTO:T,MODULO_MODE:N,POW_PRECISION:C,FORMAT:E,ALPHABET:M}},A.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!A.DEBUG)return!0;var t,n,i=e.c,a=e.e,r=e.s;e:if("[object Array]"=={}.toString.call(i)){if((1===r||-1===r)&&a>=-b&&a<=b&&a===c(a)){if(0===i[0]){if(0===a&&1===i.length)return!0;break e}if(t=(a+1)%f,t<1&&(t+=f),String(i[0]).length==t){for(t=0;t<i.length;t++)if(n=i[t],n<0||n>=d||n!==c(n))break e;if(0!==n)return!0}}}else if(null===i&&null===a&&(null===r||1===r||-1===r))return!0;throw Error(l+"Invalid BigNumber: "+e)},A.maximum=A.max=function(){return R(arguments,-1)},A.minimum=A.min=function(){return R(arguments,1)},A.random=function(){var e=9007199254740992,t=Math.random()*e&2097151?function(){return c(Math.random()*e)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)};return function(e){var n,i,a,o,u,d=0,p=[],m=new A(r);if(null==e?e=k:x(e,0,b),o=s(e/f),T)if(crypto.getRandomValues){for(n=crypto.getRandomValues(new Uint32Array(o*=2));d<o;)u=131072*n[d]+(n[d+1]>>>11),u>=9e15?(i=crypto.getRandomValues(new Uint32Array(2)),n[d]=i[0],n[d+1]=i[1]):(p.push(u%1e14),d+=2);d=o/2}else{if(!crypto.randomBytes)throw T=!1,Error(l+"crypto unavailable");for(n=crypto.randomBytes(o*=7);d<o;)u=281474976710656*(31&n[d])+1099511627776*n[d+1]+4294967296*n[d+2]+16777216*n[d+3]+(n[d+4]<<16)+(n[d+5]<<8)+n[d+6],u>=9e15?crypto.randomBytes(7).copy(n,d):(p.push(u%1e14),d+=7);d=o/7}if(!T)for(;d<o;)u=t(),u<9e15&&(p[d++]=u%1e14);for(o=p[--d],e%=f,o&&e&&(u=h[f-e],p[d]=c(o/u)*u);0===p[d];p.pop(),d--);if(d<0)p=[a=0];else{for(a=-1;0===p[0];p.splice(0,1),a-=f);for(d=1,u=p[0];u>=10;u/=10,d++);d<f&&(a-=f-d)}return m.e=a,m.c=p,m}}(),A.sum=function(){for(var e=1,t=arguments,n=new A(t[0]);e<t.length;)n=n.plus(t[e++]);return n},n=function(){var e="0123456789";function n(e,t,n,i){for(var a,r,o=[0],s=0,c=e.length;s<c;){for(r=o.length;r--;o[r]*=t);for(o[0]+=i.indexOf(e.charAt(s++)),a=0;a<o.length;a++)o[a]>n-1&&(null==o[a+1]&&(o[a+1]=0),o[a+1]+=o[a]/n|0,o[a]%=n)}return o.reverse()}return function(i,a,r,o,s){var c,l,u,d,f,p,h,m,b=i.indexOf("."),v=k,_=S;for(b>=0&&(d=C,C=0,i=i.replace(".",""),m=new A(a),p=m.pow(i.length-b),C=d,m.c=n(O(y(p.c),p.e,"0"),10,r,e),m.e=m.c.length),h=n(i,a,r,s?(c=M,e):(c=e,M)),u=d=h.length;0==h[--d];h.pop());if(!h[0])return c.charAt(0);if(b<0?--u:(p.c=h,p.e=u,p.s=o,p=t(p,m,v,_,r),h=p.c,f=p.r,u=p.e),l=u+v+1,b=h[l],d=r/2,f=f||l<0||null!=h[l+1],f=_<4?(null!=b||f)&&(0==_||_==(p.s<0?3:2)):b>d||b==d&&(4==_||f||6==_&&1&h[l-1]||_==(p.s<0?8:7)),l<1||!h[0])i=f?O(c.charAt(1),-v,c.charAt(0)):c.charAt(0);else{if(h.length=l,f)for(--r;++h[--l]>r;)h[l]=0,l||(++u,h=[1].concat(h));for(d=h.length;!h[--d];);for(b=0,i="";b<=d;i+=c.charAt(h[b++]));i=O(i,u,c.charAt(0))}return i}}(),t=function(){function e(e,t,n){var i,a,r,o,s=0,c=e.length,l=t%m,u=t/m|0;for(e=e.slice();c--;)r=e[c]%m,o=e[c]/m|0,i=u*r+o*l,a=l*r+i%m*m+s,s=(a/n|0)+(i/m|0)+u*o,e[c]=a%n;return s&&(e=[s].concat(e)),e}function t(e,t,n,i){var a,r;if(n!=i)r=n>i?1:-1;else for(a=r=0;a<n;a++)if(e[a]!=t[a]){r=e[a]>t[a]?1:-1;break}return r}function n(e,t,n,i){for(var a=0;n--;)e[n]-=a,a=e[n]<t[n]?1:0,e[n]=a*i+e[n]-t[n];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(i,a,r,o,s){var l,u,p,h,m,b,v,y,g,x,j,w,O,k,S,P,q,I=i.s==a.s?1:-1,D=i.c,T=a.c;if(!D||!D[0]||!T||!T[0])return new A(i.s&&a.s&&(D?!T||D[0]!=T[0]:T)?D&&0==D[0]||!T?0*I:I/0:NaN);for(y=new A(I),g=y.c=[],u=i.e-a.e,I=r+u+1,s||(s=d,u=_(i.e/f)-_(a.e/f),I=I/f|0),p=0;T[p]==(D[p]||0);p++);if(T[p]>(D[p]||0)&&u--,I<0)g.push(1),h=!0;else{for(k=D.length,P=T.length,p=0,I+=2,m=c(s/(T[0]+1)),m>1&&(T=e(T,m,s),D=e(D,m,s),P=T.length,k=D.length),O=P,x=D.slice(0,P),j=x.length;j<P;x[j++]=0);q=T.slice(),q=[0].concat(q),S=T[0],T[1]>=s/2&&S++;do{if(m=0,l=t(T,x,P,j),l<0){if(w=x[0],P!=j&&(w=w*s+(x[1]||0)),m=c(w/S),m>1){m>=s&&(m=s-1),b=e(T,m,s),v=b.length,j=x.length;while(1==t(b,x,v,j))m--,n(b,P<v?q:T,v,s),v=b.length,l=1}else 0==m&&(l=m=1),b=T.slice(),v=b.length;if(v<j&&(b=[0].concat(b)),n(x,b,j,s),j=x.length,-1==l)while(t(T,x,P,j)<1)m++,n(x,P<j?q:T,j,s),j=x.length}else 0===l&&(m++,x=[0]);g[p++]=m,x[0]?x[j++]=D[O]||0:(x=[D[O]],j=1)}while((O++<k||null!=x[0])&&I--);h=null!=x[0],g[0]||g.splice(0,1)}if(s==d){for(p=1,I=g[0];I>=10;I/=10,p++);F(y,r+(y.e=p+u*f-1)+1,o,h)}else y.e=u,y.r=+h;return y}}(),i=function(){var e=/^(-?)0([xbo])(?=\w[\w.]*$)/i,t=/^([^.]+)\.$/,n=/^\.([^.]+)$/,i=/^-?(Infinity|NaN)$/,a=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(r,o,s,c){var u,d=s?o:o.replace(a,"");if(i.test(d))r.s=isNaN(d)?null:d<0?-1:1;else{if(!s&&(d=d.replace(e,(function(e,t,n){return u="x"==(n=n.toLowerCase())?16:"b"==n?2:8,c&&c!=u?e:t})),c&&(u=c,d=d.replace(t,"$1").replace(n,"0.$1")),o!=d))return new A(d,u);if(A.DEBUG)throw Error(l+"Not a"+(c?" base "+c:"")+" number: "+o);r.s=null}r.c=r.e=null}}(),a.absoluteValue=a.abs=function(){var e=new A(this);return e.s<0&&(e.s=1),e},a.comparedTo=function(e,t){return g(this,new A(e,t))},a.decimalPlaces=a.dp=function(e,t){var n,i,a,r=this;if(null!=e)return x(e,0,b),null==t?t=S:x(t,0,8),F(new A(r),e+r.e+1,t);if(!(n=r.c))return null;if(i=((a=n.length-1)-_(this.e/f))*f,a=n[a])for(;a%10==0;a/=10,i--);return i<0&&(i=0),i},a.dividedBy=a.div=function(e,n){return t(this,new A(e,n),k,S)},a.dividedToIntegerBy=a.idiv=function(e,n){return t(this,new A(e,n),0,1)},a.exponentiatedBy=a.pow=function(e,t){var n,i,a,o,u,d,p,h,m,b=this;if(e=new A(e),e.c&&!e.isInteger())throw Error(l+"Exponent not an integer: "+B(e));if(null!=t&&(t=new A(t)),d=e.e>14,!b.c||!b.c[0]||1==b.c[0]&&!b.e&&1==b.c.length||!e.c||!e.c[0])return m=new A(Math.pow(+B(b),d?e.s*(2-j(e)):+B(e))),t?m.mod(t):m;if(p=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new A(NaN);i=!p&&b.isInteger()&&t.isInteger(),i&&(b=b.mod(t))}else{if(e.e>9&&(b.e>0||b.e<-1||(0==b.e?b.c[0]>1||d&&b.c[1]>=24e7:b.c[0]<8e13||d&&b.c[0]<=9999975e7)))return o=b.s<0&&j(e)?-0:0,b.e>-1&&(o=1/o),new A(p?1/o:o);C&&(o=s(C/f+2))}for(d?(n=new A(.5),p&&(e.s=1),h=j(e)):(a=Math.abs(+B(e)),h=a%2),m=new A(r);;){if(h){if(m=m.times(b),!m.c)break;o?m.c.length>o&&(m.c.length=o):i&&(m=m.mod(t))}if(a){if(a=c(a/2),0===a)break;h=a%2}else if(e=e.times(n),F(e,e.e+1,1),e.e>14)h=j(e);else{if(a=+B(e),0===a)break;h=a%2}b=b.times(b),o?b.c&&b.c.length>o&&(b.c.length=o):i&&(b=b.mod(t))}return i?m:(p&&(m=r.div(m)),t?m.mod(t):o?F(m,C,S,u):m)},a.integerValue=function(e){var t=new A(this);return null==e?e=S:x(e,0,8),F(t,t.e+1,e)},a.isEqualTo=a.eq=function(e,t){return 0===g(this,new A(e,t))},a.isFinite=function(){return!!this.c},a.isGreaterThan=a.gt=function(e,t){return g(this,new A(e,t))>0},a.isGreaterThanOrEqualTo=a.gte=function(e,t){return 1===(t=g(this,new A(e,t)))||0===t},a.isInteger=function(){return!!this.c&&_(this.e/f)>this.c.length-2},a.isLessThan=a.lt=function(e,t){return g(this,new A(e,t))<0},a.isLessThanOrEqualTo=a.lte=function(e,t){return-1===(t=g(this,new A(e,t)))||0===t},a.isNaN=function(){return!this.s},a.isNegative=function(){return this.s<0},a.isPositive=function(){return this.s>0},a.isZero=function(){return!!this.c&&0==this.c[0]},a.minus=function(e,t){var n,i,a,r,o=this,s=o.s;if(e=new A(e,t),t=e.s,!s||!t)return new A(NaN);if(s!=t)return e.s=-t,o.plus(e);var c=o.e/f,l=e.e/f,u=o.c,p=e.c;if(!c||!l){if(!u||!p)return u?(e.s=-t,e):new A(p?o:NaN);if(!u[0]||!p[0])return p[0]?(e.s=-t,e):new A(u[0]?o:3==S?-0:0)}if(c=_(c),l=_(l),u=u.slice(),s=c-l){for((r=s<0)?(s=-s,a=u):(l=c,a=p),a.reverse(),t=s;t--;a.push(0));a.reverse()}else for(i=(r=(s=u.length)<(t=p.length))?s:t,s=t=0;t<i;t++)if(u[t]!=p[t]){r=u[t]<p[t];break}if(r&&(a=u,u=p,p=a,e.s=-e.s),t=(i=p.length)-(n=u.length),t>0)for(;t--;u[n++]=0);for(t=d-1;i>s;){if(u[--i]<p[i]){for(n=i;n&&!u[--n];u[n]=t);--u[n],u[i]+=d}u[i]-=p[i]}for(;0==u[0];u.splice(0,1),--l);return u[0]?z(e,u,l):(e.s=3==S?-1:1,e.c=[e.e=0],e)},a.modulo=a.mod=function(e,n){var i,a,r=this;return e=new A(e,n),!r.c||!e.s||e.c&&!e.c[0]?new A(NaN):!e.c||r.c&&!r.c[0]?new A(r):(9==N?(a=e.s,e.s=1,i=t(r,e,0,3),e.s=a,i.s*=a):i=t(r,e,0,N),e=r.minus(i.times(e)),e.c[0]||1!=N||(e.s=r.s),e)},a.multipliedBy=a.times=function(e,t){var n,i,a,r,o,s,c,l,u,p,h,b,v,y,g,x=this,j=x.c,w=(e=new A(e,t)).c;if(!j||!w||!j[0]||!w[0])return!x.s||!e.s||j&&!j[0]&&!w||w&&!w[0]&&!j?e.c=e.e=e.s=null:(e.s*=x.s,j&&w?(e.c=[0],e.e=0):e.c=e.e=null),e;for(i=_(x.e/f)+_(e.e/f),e.s*=x.s,c=j.length,p=w.length,c<p&&(v=j,j=w,w=v,a=c,c=p,p=a),a=c+p,v=[];a--;v.push(0));for(y=d,g=m,a=p;--a>=0;){for(n=0,h=w[a]%g,b=w[a]/g|0,o=c,r=a+o;r>a;)l=j[--o]%g,u=j[o]/g|0,s=b*l+u*h,l=h*l+s%g*g+v[r]+n,n=(l/y|0)+(s/g|0)+b*u,v[r--]=l%y;v[r]=n}return n?++i:v.splice(0,1),z(e,v,i)},a.negated=function(){var e=new A(this);return e.s=-e.s||null,e},a.plus=function(e,t){var n,i=this,a=i.s;if(e=new A(e,t),t=e.s,!a||!t)return new A(NaN);if(a!=t)return e.s=-t,i.minus(e);var r=i.e/f,o=e.e/f,s=i.c,c=e.c;if(!r||!o){if(!s||!c)return new A(a/0);if(!s[0]||!c[0])return c[0]?e:new A(s[0]?i:0*a)}if(r=_(r),o=_(o),s=s.slice(),a=r-o){for(a>0?(o=r,n=c):(a=-a,n=s),n.reverse();a--;n.push(0));n.reverse()}for(a=s.length,t=c.length,a-t<0&&(n=c,c=s,s=n,t=a),a=0;t;)a=(s[--t]=s[t]+c[t]+a)/d|0,s[t]=d===s[t]?0:s[t]%d;return a&&(s=[a].concat(s),++o),z(e,s,o)},a.precision=a.sd=function(e,t){var n,i,a,r=this;if(null!=e&&e!==!!e)return x(e,1,b),null==t?t=S:x(t,0,8),F(new A(r),e,t);if(!(n=r.c))return null;if(a=n.length-1,i=a*f+1,a=n[a]){for(;a%10==0;a/=10,i--);for(a=n[0];a>=10;a/=10,i++);}return e&&r.e+1>i&&(i=r.e+1),i},a.shiftedBy=function(e){return x(e,-p,p),this.times("1e"+e)},a.squareRoot=a.sqrt=function(){var e,n,i,a,r,o=this,s=o.c,c=o.s,l=o.e,u=k+4,d=new A("0.5");if(1!==c||!s||!s[0])return new A(!c||c<0&&(!s||s[0])?NaN:s?o:1/0);if(c=Math.sqrt(+B(o)),0==c||c==1/0?(n=y(s),(n.length+l)%2==0&&(n+="0"),c=Math.sqrt(+n),l=_((l+1)/2)-(l<0||l%2),c==1/0?n="5e"+l:(n=c.toExponential(),n=n.slice(0,n.indexOf("e")+1)+l),i=new A(n)):i=new A(c+""),i.c[0])for(l=i.e,c=l+u,c<3&&(c=0);;)if(r=i,i=d.times(r.plus(t(o,r,u,1))),y(r.c).slice(0,c)===(n=y(i.c)).slice(0,c)){if(i.e<l&&--c,n=n.slice(c-3,c+1),"9999"!=n&&(a||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(F(i,i.e+k+2,1),e=!i.times(i).eq(o));break}if(!a&&(F(r,r.e+k+2,0),r.times(r).eq(o))){i=r;break}u+=4,c+=4,a=1}return F(i,i.e+k+1,S,e)},a.toExponential=function(e,t){return null!=e&&(x(e,0,b),e++),L(this,e,t,1)},a.toFixed=function(e,t){return null!=e&&(x(e,0,b),e=e+this.e+1),L(this,e,t)},a.toFormat=function(e,t,n){var i,a=this;if(null==n)null!=e&&t&&"object"==typeof t?(n=t,t=null):e&&"object"==typeof e?(n=e,e=t=null):n=E;else if("object"!=typeof n)throw Error(l+"Argument not an object: "+n);if(i=a.toFixed(e,t),a.c){var r,o=i.split("."),s=+n.groupSize,c=+n.secondaryGroupSize,u=n.groupSeparator||"",d=o[0],f=o[1],p=a.s<0,h=p?d.slice(1):d,m=h.length;if(c&&(r=s,s=c,c=r,m-=r),s>0&&m>0){for(r=m%s||s,d=h.substr(0,r);r<m;r+=s)d+=u+h.substr(r,s);c>0&&(d+=u+h.slice(r)),p&&(d="-"+d)}i=f?d+(n.decimalSeparator||"")+((c=+n.fractionGroupSize)?f.replace(new RegExp("\\d{"+c+"}\\B","g"),"$&"+(n.fractionGroupSeparator||"")):f):d}return(n.prefix||"")+i+(n.suffix||"")},a.toFraction=function(e){var n,i,a,o,s,c,u,d,p,m,b,v,_=this,g=_.c;if(null!=e&&(u=new A(e),!u.isInteger()&&(u.c||1!==u.s)||u.lt(r)))throw Error(l+"Argument "+(u.isInteger()?"out of range: ":"not an integer: ")+B(u));if(!g)return new A(_);for(n=new A(r),p=i=new A(r),a=d=new A(r),v=y(g),s=n.e=v.length-_.e-1,n.c[0]=h[(c=s%f)<0?f+c:c],e=!e||u.comparedTo(n)>0?s>0?n:p:u,c=D,D=1/0,u=new A(v),d.c[0]=0;;){if(m=t(u,n,0,1),o=i.plus(m.times(a)),1==o.comparedTo(e))break;i=a,a=o,p=d.plus(m.times(o=p)),d=o,n=u.minus(m.times(o=n)),u=o}return o=t(e.minus(i),a,0,1),d=d.plus(o.times(p)),i=i.plus(o.times(a)),d.s=p.s=_.s,s*=2,b=t(p,a,s,S).minus(_).abs().comparedTo(t(d,i,s,S).minus(_).abs())<1?[p,a]:[d,i],D=c,b},a.toNumber=function(){return+B(this)},a.toPrecision=function(e,t){return null!=e&&x(e,1,b),L(this,e,t,2)},a.toString=function(e){var t,i=this,a=i.s,r=i.e;return null===r?a?(t="Infinity",a<0&&(t="-"+t)):t="NaN":(null==e?t=r<=P||r>=q?w(y(i.c),r):O(y(i.c),r,"0"):10===e&&$?(i=F(new A(i),k+r+1,S),t=O(y(i.c),i.e,"0")):(x(e,2,M.length,"Base"),t=n(O(y(i.c),r,"0"),10,e,a,!0)),a<0&&i.c[0]&&(t="-"+t)),t},a.valueOf=a.toJSON=function(){return B(this)},a._isBigNumber=!0,null!=e&&A.set(e),A}function _(e){var t=0|e;return e>0||e===t?t:t-1}function y(e){for(var t,n,i=1,a=e.length,r=e[0]+"";i<a;){for(t=e[i++]+"",n=f-t.length;n--;t="0"+t);r+=t}for(a=r.length;48===r.charCodeAt(--a););return r.slice(0,a+1||1)}function g(e,t){var n,i,a=e.c,r=t.c,o=e.s,s=t.s,c=e.e,l=t.e;if(!o||!s)return null;if(n=a&&!a[0],i=r&&!r[0],n||i)return n?i?0:-s:o;if(o!=s)return o;if(n=o<0,i=c==l,!a||!r)return i?0:!a^n?1:-1;if(!i)return c>l^n?1:-1;for(s=(c=a.length)<(l=r.length)?c:l,o=0;o<s;o++)if(a[o]!=r[o])return a[o]>r[o]^n?1:-1;return c==l?0:c>l^n?1:-1}function x(e,t,n,i){if(e<t||e>n||e!==c(e))throw Error(l+(i||"Argument")+("number"==typeof e?e<t||e>n?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function j(e){var t=e.c.length-1;return _(e.e/f)==t&&e.c[t]%2!=0}function w(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function O(e,t,n){var i,a;if(t<0){for(a=n+".";++t;a+=n);e=a+e}else if(i=e.length,++t>i){for(a=n,t-=i;--t;a+=n);e+=a}else t<i&&(e=e.slice(0,t)+"."+e.slice(t));return e}r=v(),r["default"]=r.BigNumber=r,i=function(){return r}.call(t,n,t,e),void 0===i||(e.exports=i)})()},"9a04":function(e,t,n){e.exports=n.p+"static/img/checking.73c367ae.png"},"9beb":function(e,t,n){"use strict";var i=function(e){return Math.sin(e[0])},a=function(e){return Math.cos(e[0])},r=function(e){return Math.tan(e[0])},o=function(e){return Math.atan(e[0])},s={sin:i,cos:a,tan:r,atan:o},c=function(e){let t=[],n=0;while(n<e.length){const i=Object.keys(s).find(t=>t===e.slice(n,n+t.length));if(i)t.push(e.slice(n,n+i.length)),n+=3;else if(["**"].includes(e.slice(n,n+2)))t.push(e.slice(n,n+2)),n+=2;else if(["+","-","*","/","(",")","%"].includes(e[n]))t.push(e[n]),n++;else if(e[n].match(/\d/)){let i=e[n];for(let t=n+1;t<e.length;t++){if(!e[t].match(/\d/)&&"."!==e[t])break;i+=e[t],n++}t.push(i),n++}else n++}return t};class l{constructor(e,t){this.type=e,this.data=t.map(e=>{if(e instanceof l)return e.run();if(e instanceof Array){let t=new l(e[1],[e[0],e[2]]);return t.run()}return e})}run(){const e=n("901e");if("+"===this.type){const t=new e(this.data[0]);return t.plus(this.data[1]).toNumber()}if("-"===this.type){const t=new e(this.data[0]);return t.minus(this.data[1]).toNumber()}if("*"===this.type){const t=new e(this.data[0]);return t.multipliedBy(this.data[1]).toNumber()}if("/"===this.type){const t=new e(this.data[0]);return t.div(this.data[1]).toNumber()}if("**"===this.type){const t=new e(this.data[0]);return t.pow(this.data[1]).toNumber()}if("%"===this.type){const t=new e(this.data[0]);return t.mod(this.data[1]).toNumber()}if("number"===this.type)return this.data[0];if(s[this.type])return s[this.type](this.data);throw console.log(this.type),new Error("运算类型不存在"+this.type)}}const u=[Object.keys(s),["**"],["%"],["*","/"],["+","-"]];let d=0;function f(e,t=[]){let n,i=[[]];for(;d<e.length;d++){const n=e[d];if(t.includes(n))break;if(n.match(/\d+/))i[i.length-1].push(n);else if("("===n){d++;const t=f(e,[")"]);if(")"!==e[d])throw new Error("结构错误");i[i.length-1].push(t)}else if(Object.keys(s).includes(n)){d+=2;const t=f(e,[")"]);if(0===i[i.length-1].length?(i[i.length-1].push(t),i[i.length-1].push(n)):i[i.length-1].push([t,n]),")"!==e[d])throw new Error("结构错误")}else{if(!["**","*","/","+","-","%"].includes(n))throw new Error("分词失败"+n);if(1===i[i.length-1].length)i[i.length-1].push(n);else{const t=i[i.length-1],a=u.findIndex(e=>e.includes(n)),r=u.findIndex(e=>e.includes(t[1])),o=[];if(u.slice(a+1).forEach(e=>{e.forEach(e=>{o.push(e)})}),a<r||["**"].includes(n)&&a===r){d++;const i=f(e,o);d--,t[t.length-1]=[t[t.length-1],n,i]}else i[i.length-1]=[i[i.length-1]],i[i.length-1].push(n)}}}if(1===i[i.length-1].length&&("string"===typeof i[i.length-1][0]?i[i.length-1]=parseFloat(i[i.length-1][0]):i[i.length-1]=i[i.length-1][0]),1===i.length&&(i=i[0]),"number"===typeof i)n=new l("number",[i]);else if(["+","-","*","/","**","%"].includes(i[1]))n=new l(i[1],[i[0],i[2]]);else{if(!Object.keys(s).includes(i[1]))throw console.log(i),new Error("结构不存在"+i[1]);n=new l(i[1],[i[0]])}return n}function p(e){let t=c(e);d=0;let n=f(t,[]);return n.run()}t["a"]=p},ac6f:function(e,t,n){e.exports=n.p+"static/img/refuted.d21e0353.png"},acac:function(e,t,n){},b680:function(e,t,n){"use strict";var i=n("23e7"),a=n("a691"),r=n("408a"),o=n("1148"),s=n("d039"),c=1..toFixed,l=Math.floor,u=function(e,t,n){return 0===t?n:t%2===1?u(e,t-1,n*e):u(e*e,t/2,n)},d=function(e){var t=0,n=e;while(n>=4096)t+=12,n/=4096;while(n>=2)t+=1,n/=2;return t},f=c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!s((function(){c.call({})}));i({target:"Number",proto:!0,forced:f},{toFixed:function(e){var t,n,i,s,c=r(this),f=a(e),p=[0,0,0,0,0,0],h="",m="0",b=function(e,t){var n=-1,i=t;while(++n<6)i+=e*p[n],p[n]=i%1e7,i=l(i/1e7)},v=function(e){var t=6,n=0;while(--t>=0)n+=p[t],p[t]=l(n/e),n=n%e*1e7},_=function(){var e=6,t="";while(--e>=0)if(""!==t||0===e||0!==p[e]){var n=String(p[e]);t=""===t?n:t+o.call("0",7-n.length)+n}return t};if(f<0||f>20)throw RangeError("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(h="-",c=-c),c>1e-21)if(t=d(c*u(2,69,1))-69,n=t<0?c*u(2,-t,1):c/u(2,t,1),n*=4503599627370496,t=52-t,t>0){b(0,n),i=f;while(i>=7)b(1e7,0),i-=7;b(u(10,i,1),0),i=t-1;while(i>=23)v(1<<23),i-=23;v(1<<i),b(1,1),v(2),m=_()}else b(0,n),b(1<<-t,0),m=_()+o.call("0",f);return f>0?(s=m.length,m=h+(s<=f?"0."+o.call("0",f-s)+m:m.slice(0,s-f)+"."+m.slice(s-f))):m=h+m,m}})},c40e:function(e,t,n){},defd:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"main"},[n("searchComponent",{attrs:{"search-config":e.searchConfig},on:{search:e.handleSearch}}),n("div",{staticClass:"extend-action"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:e.add}},[e._v("新增")]),n("el-button",{attrs:{size:"small"},on:{click:e.batchExport}},[e._v("批量导出")]),n("el-button",{attrs:{type:"small"},on:{click:e.openDraft}},[e._v("草稿箱")])],1),n("customTable",{attrs:{columns:e.columns,"data-source":e.dataSource,total:e.total,height:"calc(100vh - 410px)",loading:e.loading},on:{pageChange:e.handlePageChange},scopedSlots:e._u([{key:"action",fn:function(t){return[1==t.data.permitting_state?n("div",{staticClass:"action"},[n("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(n){return e.handleToDetail(t.data)}}},[e._v("详情")]),n("el-button",{attrs:{disabled:1!=t.data.permitting_state||1==t.data.permitting_state&&1!=t.data.state,size:"small",type:"primary"},on:{click:function(n){return e.handleRed(t.data)}}},[e._v("冲红")]),n("el-button",{attrs:{disabled:1!=t.data.permitting_state||1==t.data.permitting_state&&1!=t.data.state,size:"small",type:"danger"},on:{click:function(n){return e.handleVoid(t.data)}}},[e._v("作废")])],1):n("div",{staticClass:"action"},[n("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(n){return e.handleToDetail(t.data)}}},[e._v("详情")])],1)]}},{key:"permitting_state_name",fn:function(t){return[n("el-tag",[e._v(e._s(t.data.permitting_state_name))])]}}])}),n("el-drawer",{attrs:{size:"85%",visible:e.showDetailModal,"destroy-on-close":!0},on:{"update:visible":function(t){e.showDetailModal=t},close:e.closeDrawer}},[n("detail-modal",[e.showDetailModal?n("invoice-create",{attrs:{"with-modal":e.withModal},on:{refresh:e.modalRefresh,refreshList:e.refreshList,close:e.closeDrawer}}):e._e()],1)],1),n("el-dialog",{attrs:{visible:e.showDraft,width:"80%","destroy-on-close":!0},on:{"update:visible":function(t){e.showDraft=t},close:e.closeDraft}},[e.showDraft?n("invoice-draft"):e._e()],1)],1)},a=[],r=n("c7eb"),o=n("5530"),s=n("1da1"),c=(n("d81d"),n("a573"),n("878f")),l=n("6cff"),u=n("38d4"),d=n("277f"),f=n("c1df"),p=n.n(f),h=n("ed08"),m=n("1aac"),b=n("2068"),v=n("267e"),_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"main"},[n("customTable",{attrs:{columns:e.columns,"data-source":e.dataSource,total:e.total,loading:e.loading,height:"calc(100vh - 462px)"},on:{pageChange:e.handlePageChange},scopedSlots:e._u([{key:"action",fn:function(t){return[n("div",{staticClass:"action"},[n("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(n){return e.handleToDetail(t.data)}}},[e._v("详情")]),n("el-popconfirm",{attrs:{title:"确定删除该条内容吗"},on:{onConfirm:function(n){return e.handleDelete(t.data)}}},[n("el-button",{attrs:{slot:"reference",size:"small",type:"danger"},slot:"reference"},[e._v("删除")])],1)],1)]}}])}),n("el-drawer",{attrs:{visible:e.showDrawer,size:"75%","append-to-body":!0,"destroy-on-close":!0},on:{"update:visible":function(t){e.showDrawer=t},close:e.closeDrawer}},[n("detail-modal",[e.showDrawer?n("create-draft",{attrs:{"with-modal":e.withModal},on:{close:e.closeDrawer,draftToCreate:e.draftToCreate}}):e._e()],1)],1)],1)},y=[],g=n("5c96"),x={name:"InvoiceDraft",components:{customTable:c["a"],createDraft:b["default"],detailModal:m["a"]},data:function(){return{loading:!1,total:0,withModal:void 0,showDrawer:!1,columns:[{title:"id",key:"id",minWidth:"100"},{title:"发票状态",key:"state_name",minWidth:"100"},{title:"收票公司",key:"payment_company_name",minWidth:"100"},{title:"开票公司",key:"revenue_company_name",minWidth:"100"},{title:"税率",key:"tariff",minWidth:"100"},{title:"类型",key:"type",minWidth:"100"},{title:"发票金额",key:"money",minWidth:"100"},{title:"项目名称/编号",key:"project_name",minWidth:"100"},{title:"合同名称/编号",key:"contract_name",minWidth:"100"},{title:"快速操作",key:"action",fixed:"right",width:"200px",render:"action"}],dataSource:[],searchParams:{page:1,limit:10}}},mounted:function(){this.getList()},methods:{closeDrawer:function(){this.withModal=void 0,this.showDrawer=!1},getList:function(){var e=this;return Object(s["a"])(Object(r["a"])().mark((function t(){var n;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,t.next=4,Object(u["f"])(e.searchParams);case 4:n=t.sent,200===n.code?e.dataSource=n.data:g["Message"].error(n.msg),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),g["Message"].error(t.t0.msg||"获取草稿箱出错");case 11:return t.prev=11,e.loading=!1,t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[0,8,11,14]])})))()},handleToDetail:function(e){var t=this;return Object(s["a"])(Object(r["a"])().mark((function n(){var i;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(u["e"])(e);case 2:i=n.sent,t.withModal={id:e.id,data:i.data,is_permit:!1,hide_permit_btn:!0,type:"draft_edit"},t.showDrawer=!0;case 5:case"end":return n.stop()}}),n)})))()},handleDelete:function(e){var t=this;return Object(s["a"])(Object(r["a"])().mark((function n(){var i;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,t.formLoading=!0,n.next=4,Object(u["c"])({id:e.id});case 4:i=n.sent,200===i.code?(g["Message"].success("已删除"),t.getList()):g["Message"].error(i.msg),n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](0),g["Message"].error(n.t0.msg||"删除失败");case 11:return n.prev=11,t.formLoading=!1,n.finish(11);case 14:case"end":return n.stop()}}),n,null,[[0,8,11,14]])})))()},handlePageChange:function(e){this.searchParams=Object(o["a"])(Object(o["a"])({},this.searchParams),e),this.getList()},draftToCreate:function(e){var t=this;return Object(s["a"])(Object(r["a"])().mark((function n(){return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,t.loading=!0,t.withModal=void 0,t.showDrawer=!1,n.next=6,Object(u["c"])({id:e});case 6:t.getList(),n.next=12;break;case 9:n.prev=9,n.t0=n["catch"](0),g["Message"].error(n.t0.msg);case 12:return n.prev=12,t.loading=!1,n.finish(12);case 15:case"end":return n.stop()}}),n,null,[[0,9,12,15]])})))()}}},j=x,w=(n("70ec"),n("2877")),O=Object(w["a"])(j,_,y,!1,null,"dc779344",null),k=O.exports,S={components:{customTable:c["a"],searchComponent:l["a"],detailModal:m["a"],invoiceCreate:b["default"],invoiceDraft:k},data:function(){return{showDraft:!1,showDetailModal:!1,modalFreshControl:!0,withModal:{id:null},columns:[{title:"发票序号",key:"id",minWidth:"100"},{title:"创建人",key:"create_name",minWidth:"120"},{title:"开票日期",key:"create_time",minWidth:"100"},{title:"发票状态",key:"state_name",minWidth:"100"},{title:"收票公司",key:"payment_company_name",minWidth:"100"},{title:"开票公司",key:"revenue_company_name",minWidth:"100"},{title:"税率",key:"tariff",minWidth:"100"},{title:"类型",key:"type",minWidth:"100"},{title:"发票金额",key:"money",minWidth:"100"},{title:"项目名称/编号",key:"project_name",minWidth:"100"},{title:"合同名称/编号",key:"contract_name",minWidth:"100"},{title:"审批状态",key:"permitting_state_name",minWidth:"100",render:"permitting_state_name"},{title:"快速操作",key:"action",fixed:"right",width:"200px",render:"action"}],dataSource:[],searchParams:{page:1,limit:10},total:0,loading:!1,companyList:[],searchConfig:{formItemLength:8,span:6,labelWidth:"60px",initValue:{},formItem:[{label:"税率",value:"tariff",type:"select",options:[{value:"1",label:"1%"},{value:"3",label:"3%"},{value:"6",label:"6%"},{value:"9",label:"9%"},{value:"13",label:"13%"}]},{label:"发票类型",value:"type",type:"select",options:[{value:"1",label:"普票"},{value:"2",label:"专票"}]},{label:"发票状态",value:"state",type:"select",options:[{value:"0",label:"全部"},{value:"1",label:"正常"},{value:"2",label:"冲红"},{value:"3",label:"作废"},{value:"4",label:"冲红中"},{value:"5",label:"作废中"}]},{label:"审批状态",value:"permitting_state",type:"select",options:[{value:"1",label:"已审批"},{value:"2",label:"已驳回"},{value:"3",label:"待审批"}]},{label:"收票公司",value:"payment_company_id",type:"company",placeholder:"请选择付款公司"},{label:"开票公司",value:"revenue_company_id",type:"company",placeholder:"请选择收款公司"},{label:"所属项目",value:"project_id",type:"project"},{label:"所属合同",value:"contract_id",type:"contract"},{label:"项目金额",value:["money_min","money_max"],type:"amount"},{label:"开票时间",value:"time",type:"dateRange"}]}}},mounted:function(){var e,t,n,i,a=this.$route.params.from;a&&a===v["a"].FROM_TREE_TO_INVOICE_LIST?this.searchConfig.initValue={project_id:null===(e=this.$route.params.state)||void 0===e?void 0:e.project_id,contract_id:null===(t=this.$route.params.state)||void 0===t?void 0:t.id,payment_company_id:null===(n=this.$route.params.state)||void 0===n?void 0:n.contract_party_a_company_id,revenue_company_id:null===(i=this.$route.params.state)||void 0===i?void 0:i.contract_party_b_company_id}:this.getDataSource()},methods:{openDraft:function(){this.showDraft=!0},closeDraft:function(){this.showDraft=!1},closeDrawer:function(){this.withModal=void 0,this.showDetailModal=!1,this.refreshList()},refreshList:function(){this.getDataSource()},modalRefresh:function(){var e=this;this.modalFreshControl=!1,this.$nextTick((function(){e.modalFreshControl=!0}))},batchExport:function(){var e=this;return Object(s["a"])(Object(r["a"])().mark((function t(){var n,i,a;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["h"])(Object(o["a"])({page:1,limit:1e6},e.searchParams));case 2:n=t.sent,i=e.columns.map((function(e){return e.key})),a=[],n.data.map((function(e){var t={};i.map((function(n){t[n]=e[n]})),a.push(t)})),Object(h["b"])(a,e.$route.meta.title,e.columns.map((function(e){return e.title})),e.$route.meta.title);case 7:case"end":return t.stop()}}),t)})))()},handleRed:function(e){this.invoicesOffsetRed(e.id)},handleVoid:function(e){this.invoicesCancel(e.id)},handleToDetail:function(e){var t=this;return Object(s["a"])(Object(r["a"])().mark((function n(){var i;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(d["t"])({id:e.id});case 2:i=n.sent,t.withModal={id:i.data.id,data:i.data,is_permit:!1,type:"edit"},t.showDetailModal=!0;case 5:case"end":return n.stop()}}),n)})))()},handleSelectChange:function(e){this.selectArr=e},handlePageChange:function(e){this.searchParams=Object(o["a"])(Object(o["a"])({},this.searchParams),e),this.getDataSource()},handleSearch:function(e){this.searchParams=Object(o["a"])(Object(o["a"])({},this.searchParams),e),e.time?(this.searchParams.start_time=p()(e.time[0]).format("YYYY-MM-DD"),this.searchParams.end_time=p()(e.time[1]).format("YYYY-MM-DD")):(this.searchParams.start_time="",this.searchParams.end_time=""),this.getDataSource()},add:function(){this.withModal={isAdd:!0,type:"create",is_permit:!1},this.showDetailModal=!0},getDataSource:function(){var e=this;return Object(s["a"])(Object(r["a"])().mark((function t(){var n;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,Object(u["h"])(e.searchParams);case 3:n=t.sent,e.loading=!1,e.total=n.count,n.data.map((function(e){e.tariff=e.tariff+"%",e.permitting_state_name=1===e.permitting_state?"已审批":2===e.permitting_state?"已驳回":"待审批"})),e.dataSource=n.data,console.log(n);case 9:case"end":return t.stop()}}),t)})))()},invoicesOffsetRed:function(e){var t=this;return Object(s["a"])(Object(r["a"])().mark((function n(){var i;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(u["i"])({id:e});case 2:i=n.sent,200===i.code&&(t.$message.success(i.msg),t.getDataSource());case 4:case"end":return n.stop()}}),n)})))()},invoicesCancel:function(e){var t=this;return Object(s["a"])(Object(r["a"])().mark((function n(){var i;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(u["g"])({id:e});case 2:i=n.sent,200===i.code&&(t.$message.success(i.msg),t.getDataSource());case 4:case"end":return n.stop()}}),n)})))()}}},P=S,q=(n("8a3c2"),Object(w["a"])(P,i,a,!1,null,"5f00ab07",null));t["default"]=q.exports},ed08:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return s}));n("53ca"),n("d81d"),n("a434"),n("d3b7"),n("4d63"),n("ac1f"),n("2c3e"),n("00b4"),n("25f0"),n("4d90"),n("5319"),n("0643"),n("4e3e"),n("a573"),n("159b");var i=n("21a6"),a=n("25ca");n("bc3a"),n("aeb1");function r(e,t,n,r){var o=[],s=[],c=function(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t};for(var l in e)if(console.log("------------------------"),Object.prototype.hasOwnProperty.call(e,l)){var u=e[l],d=[];for(var f in u)if(Object.prototype.hasOwnProperty.call(u,f)){var p=u[f];d.push(p),s.length<c(u)&&s.push(f)}o.push(d)}var h=[];n.map((function(e,t){"快速操作"!=e&&"详情"!=e&&h.push(e)})),o.splice(0,0,s,h),console.log("excel_data",a);var m=a["utils"].aoa_to_sheet(o),b=a["utils"].book_new(),v=[{hidden:!0}];m["!rows"]=v,a["utils"].book_append_sheet(b,m,r);var _=a["write"](b,{bookType:"xlsx",type:"array"}),y=new Blob([_],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});Object(i["saveAs"])(y,t+".xlsx")}function o(e){var t=-1!==e.lastIndexOf("?")?decodeURIComponent(e.substring(e.lastIndexOf("/")+1,e.lastIndexOf("?"))):decodeURIComponent(e.substring(e.lastIndexOf("/")+1)),n=t.substring(t.lastIndexOf(".")+1);if("png"==n||"jpg"==n||"pdf"==n){var a=document.createElement("a");a.href=e,a.download=t,a.target="_blank",a.click()}else fetch(e,{mode:"no-cors"}).then((function(e){return e.blob()})).then((function(e){console.log("blob",e),Object(i["saveAs"])(e,t)}))}function s(e,t,n){console.log("self",e);var i=e.$router.resolve({name:t,query:n}),a=window.open(i.href,t);a&&a.location.reload()}}}]);