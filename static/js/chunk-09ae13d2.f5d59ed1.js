(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-09ae13d2"],{"3e6b":function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{padding:"20px"}},[n("el-row",[n("el-col",{attrs:{span:24}},[n("el-button",{attrs:{type:"primary"},on:{click:e.handleAddPersonnel}},[e._v("新建")])],1)],1),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[n("el-table-column",{attrs:{label:"角色组"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.title))])]}}])}),n("el-table-column",{attrs:{label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("i",{staticClass:"el-icon-time"}),n("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.create_time))])]}}])}),n("el-table-column",{attrs:{label:"更新时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("i",{staticClass:"el-icon-time"}),n("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.update_time))])]}}])}),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini"},on:{click:function(n){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),n("el-button",{staticStyle:{"margin-right":"10px"},attrs:{size:"mini"},on:{click:function(n){return e.handleEditP(t.$index,t.row)}}},[e._v("成员")]),n("el-popconfirm",{attrs:{title:"确定删除该条数据吗?"},on:{onConfirm:function(n){return e.handleDelete(t.$index,t.row)}}},[n("el-button",{attrs:{slot:"reference",size:"mini",type:"danger"},slot:"reference"},[e._v(" 删除 ")])],1)]}}])})],1),n("el-dialog",{attrs:{title:e.isAddPersonnel?"新建角色组":"编辑角色组",visible:e.systemModalVisible},on:{"update:visible":function(t){e.systemModalVisible=t}}},[e.isAddPersonnel?n("el-form",{attrs:{model:e.form}},[n("el-form-item",{attrs:{label:"角色组名称","label-width":e.formLabelWidth}},[n("el-input",{attrs:{title:e.form.title,autocomplete:"off"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1)],1):n("div",[n("el-tree",{ref:"tree",attrs:{data:e.data,"show-checkbox":"","node-key":"id","current-node-key":e.checkedArr,"default-expanded-keys":e.defaultChecked,"default-checked-keys":e.defaultChecked},scopedSlots:e._u([{key:"default",fn:function(t){t.node;var s=t.data;return n("span",{staticClass:"custom-tree-node"},[n("span",[e._v(e._s(s.title))]),n("span",{staticStyle:{"margin-left":"20px"}})])}}])})],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.systemModalVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.handleSavePersonnel}},[e._v("确 定")])],1)],1),n("el-dialog",{attrs:{title:"角色成员编辑",visible:e.systemModalVisibleP},on:{"update:visible":function(t){e.systemModalVisibleP=t}}},[e.isAddPersonnel?n("el-form",{attrs:{model:e.form}},[n("el-form-item",{attrs:{label:"角色组名称","label-width":e.formLabelWidth}},[n("el-input",{attrs:{title:e.form.title,autocomplete:"off"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1)],1):n("div",[n("el-tree",{ref:"tree",attrs:{data:e.data1,"show-checkbox":"","node-key":"id","current-node-key":e.checkedArr,"default-expanded-keys":e.defaultChecked,"default-checked-keys":e.defaultChecked},scopedSlots:e._u([{key:"default",fn:function(t){t.node;var s=t.data;return n("span",{staticClass:"custom-tree-node"},[n("span",[e._v(e._s(s.name))]),n("span",{staticStyle:{"margin-left":"20px"}})])}}])})],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.systemModalVisibleP=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.handleSavePersonnelP}},[e._v("确 定")])],1)],1)],1)},a=[],i=n("c7eb"),o=n("2909"),r=n("5530"),l=n("1da1"),d=(n("a15b"),n("d81d"),n("a9e3"),n("b64b"),n("d3b7"),n("6062"),n("3ca3"),n("a573"),n("ddb0"),n("c24f")),c={name:"systemSettings",data:function(){return{data:[],defaultChecked:[],checkedArr:[],data1:[],isAddPersonnel:!1,systemModalVisible:!1,systemModalVisibleP:!1,formLabelWidth:"120px",tableData:[],form:{title:""}}},watch:{CheckedArr:{handler:function(e,t){console.log("vvvvvvvvvv",e)}}},mounted:function(){this.handleGetList()},methods:{resetFrom:function(){var e=this;Object.keys(this.form).map((function(t){e.form[t]=""}))},handleSavePersonnel:function(){var e=this;return Object(l["a"])(Object(i["a"])().mark((function t(){var n,s,a;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.isAddPersonnel?e.$store.dispatch("user/addGroup",Object(r["a"])({},e.form)).then((function(t){e.$message(t.msg),e.handleGetList(),e.resetFrom()})):(n=e.$refs.tree.getCheckedNodes(!1,!0),console.log("11111111111111",n.map((function(e){return e.id}))),s=[],n.map((function(e){s.push(e.id),s.push(e.pid)})),a=Object(o["a"])(new Set(s)),e.$store.dispatch("user/updateGroup",{id:e.rowId,field:"rules",value:a.join(",")}).then((function(t){e.$message(t.msg),e.handleGetList(),e.resetFrom()}))),e.systemModalVisible=!1;case 2:case"end":return t.stop()}}),t)})))()},handleAddPersonnel:function(){this.isAddPersonnel=!0,this.systemModalVisible=!0},handleEdit:function(e,t){var n=this;return Object(l["a"])(Object(i["a"])().mark((function e(){var s,a,o;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=[],n.rowId=t.id,e.next=4,Object(d["g"])();case 4:a=e.sent,n.data=a.data[0].children,o=[],a.data[0].children.map((function(e){o.push(e.id),e.children.length&&e.children.map((function(e){o.push(e.id)}))})),t.rules.split(",").map((function(e){174!=e&&188!=e&&149!=e&&162!=e&&163!=e&&169!=e&&174!=e&&183!=e&&28!=e&&29!=e&&46!=e&&129!=e&&134!=e&&135!=e&&136!=e&&138!=e&&139!=e&&140!=e&&141!=e&&9!=e&&s.push(Number(e))})),console.log("arrNum",s),n.defaultChecked=s,n.isAddPersonnel=!1,n.systemModalVisible=!0;case 13:case"end":return e.stop()}}),e)})))()},handleEditP:function(e,t){var n=this;return Object(l["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:n.rowId=t.id,n.$store.dispatch("user/requestList",{url:"/Authorize/getGroupUserList",id:t.id}).then((function(e){var t=[];e[0].children.map((function(e){e.checked&&t.push(e.id)})),n.defaultChecked=t,n.data1=e[0].children,n.systemModalVisibleP=!0}));case 2:case"end":return e.stop()}}),e)})))()},handleSavePersonnelP:function(){var e=this,t=this.$refs.tree.getCheckedNodes(!1,!0);console.log(t.map((function(e){return e.id}))),this.$store.dispatch("user/requestList",{url:"/Authorize/updateGroupUser",id:this.rowId,users:t.map((function(e){return e.id})).join(",")}).then((function(t){e.$message(t.msg),e.systemModalVisibleP=!1,e.handleGetList(),e.resetFrom()}))},handleDelete:function(e,t){var n=this;console.log(e,t),this.$store.dispatch("user/delGroup",{id:t.id}).then((function(e){n.$message(e.msg),n.handleGetList()}))},handleGetList:function(){var e=this;this.$store.dispatch("user/requestList",{url:"/Authorize/getGroupList",limit:99999,page:1}).then((function(t){console.log("Response",t),e.tableData=t.data}))}}},u=c,f=(n("f0a4"),n("2877")),h=Object(f["a"])(u,s,a,!1,null,"7030e799",null);t["default"]=h.exports},"62ef":function(e,t,n){},a15b:function(e,t,n){"use strict";var s=n("23e7"),a=n("44ad"),i=n("fc6a"),o=n("a640"),r=[].join,l=a!=Object,d=o("join",",");s({target:"Array",proto:!0,forced:l||!d},{join:function(e){return r.call(i(this),void 0===e?",":e)}})},f0a4:function(e,t,n){"use strict";n("62ef")}}]);