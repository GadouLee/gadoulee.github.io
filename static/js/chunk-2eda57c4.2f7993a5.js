(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2eda57c4","chunk-2d20828a"],{"0538":function(t,e,n){"use strict";var r=n("1c0b"),o=n("861d"),i=[].slice,a={},s=function(t,e,n){if(!(e in a)){for(var r=[],o=0;o<e;o++)r[o]="a["+o+"]";a[e]=Function("C,a","return new C("+r.join(",")+")")}return a[e](t,n)};t.exports=Function.bind||function(t){var e=r(this),n=i.call(arguments,1),a=function(){var r=n.concat(i.call(arguments));return this instanceof a?s(e,r.length,r):e.apply(t,r)};return o(e.prototype)&&(a.prototype=e.prototype),a}},1940:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return b}));var r=n("da65"),o=n("daf9");function i(t){return!(t.prototype&&t.prototype.render)&&!r["a"].isPrototypeOf(t)}function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.prefix,r=void 0===n?"":n,o=e.suffix,i=void 0===o?"":o,a=t.displayName||t.name||t.constructor&&t.constructor.name||"<component>";return r+a+i}var s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},p=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e},d=!1,f=console;function h(t){var e=Object(o["g"])().allowStateChanges;return Object(o["g"])().allowStateChanges=t,e}function y(t){Object(o["g"])().allowStateChanges=t}function v(t,e,n,r,o){var i=h(t),a=void 0;try{a=e(n,r,o)}finally{y(i)}return a}function g(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t[e],o=_[e],i=r?!0===n?function(){o.apply(this,arguments),r.apply(this,arguments)}:function(){r.apply(this,arguments),o.apply(this,arguments)}:o;t[e]=i}function m(t,e){if(null==t||null==e||"object"!==("undefined"===typeof t?"undefined":s(t))||"object"!==("undefined"===typeof e?"undefined":s(e)))return t!==e;var n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(var r=void 0,o=n.length-1;r=n[o];o--)if(e[r]!==t[r])return!0;return!1}var _={componentWillMount:function(){var t=this;if(!0!==d){var e=a(this),n=!1,i=!1;f.call(this,"props"),f.call(this,"state");var s=this.render.bind(this),u=null,l=!1,c=function(){return u=new o["c"](e+".render()",(function(){if(!l&&(l=!0,"function"===typeof t.componentWillReact&&t.componentWillReact(),!0!==t.__$mobxIsUnmounted)){var e=!0;try{i=!0,n||r["a"].prototype.forceUpdate.call(t),e=!1}finally{i=!1,e&&u.dispose()}}})),u.reactComponent=t,p.$mobx=u,t.render=p,p(t.props,t.state,t.context)},p=function(t,e,n){l=!1;var r=void 0,o=void 0;if(u.track((function(){try{o=v(!1,s,t,e,n)}catch(i){r=i}})),r)throw r;return o};this.render=c}function f(t){var e=this[t],r=Object(o["n"])("reactive "+t);Object.defineProperty(this,t,{configurable:!0,enumerable:!0,get:function(){return r.reportObserved(),e},set:function(t){!i&&m(e,t)?(e=t,n=!0,r.reportChanged(),n=!1):e=t}})}},componentWillUnmount:function(){!0!==d&&(this.render.$mobx&&this.render.$mobx.dispose(),this.__$mobxIsUnmounted=!0)},componentDidMount:function(){},componentDidUpdate:function(){},shouldComponentUpdate:function(t,e){return d&&f.warn("[mobx-preact] It seems that a re-rendering of a React component is triggered while in static (server-side) mode. Please make sure components are rendered only once server-side."),this.state!==e||m(this.props,t)}};function b(t){var e,n;if(arguments.length>1&&f.warn('Mobx observer: Using observer to inject stores is not supported. Use `@connect(["store1", "store2"]) ComponentClass instead or preferably, use `@inject("store1", "store2") @observer ComponentClass` or `inject("store1", "store2")(observer(componentClass))``'),!0===t.isMobxInjector&&f.warn("Mobx observer: You are trying to use 'observer' on a component that already has 'inject'. Please apply 'observer' before applying 'inject'"),i(t))return b((n=e=function(e){function n(){return u(this,n),p(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return c(n,e),l(n,[{key:"render",value:function(){return t.call(this,this.props,this.context)}}]),n}(r["a"]),e.displayName=a(t),n));if(!t)throw new Error("Please pass a valid component to 'observer'");var o=t.prototype||t;return x(o),t.isMobXReactObserver=!0,t}function x(t){g(t,"componentWillMount",!0),g(t,"componentDidMount"),t.shouldComponentUpdate||(t.shouldComponentUpdate=_.shouldComponentUpdate)}var E=b((function(t){var e=t.children;return e[0]()}));E.displayName="Observer";"undefined"!==typeof window?window:"undefined"!==typeof t||"undefined"!==typeof self&&self;function O(t,e){return e={exports:{}},t(e,e.exports),e.exports}O((function(t,e){(function(e,n){t.exports=n()})(0,(function(){var t={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},e={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},n=Object.defineProperty,r=Object.getOwnPropertyNames,o=Object.getOwnPropertySymbols,i=Object.getOwnPropertyDescriptor,a=Object.getPrototypeOf,s=a&&a(Object);return function u(l,c,p){if("string"!==typeof c){if(s){var d=a(c);d&&d!==s&&u(l,d,p)}var f=r(c);o&&(f=f.concat(o(c)));for(var h=0;h<f.length;++h){var y=f[h];if(!t[y]&&!e[y]&&(!p||!p[y])){var v=i(c,y);try{n(l,y,v)}catch(g){}}}return l}return l}}))}));var w={children:!0,key:!0,ref:!0},A=console;(function(t){function e(){return u(this,e),p(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}c(e,t),l(e,[{key:"render",value:function(t){var e=t.children;return e.length>1?Object(r["g"])("div",null," ",e," "):e[0]}},{key:"getChildContext",value:function(){var t={},e=this.context.mobxStores;if(e)for(var n in e)t[n]=e[n];for(var r in this.props)w[r]||"suppressChangedStoreWarning"===r||(t[r]=this.props[r]);return{mobxStores:t}}},{key:"componentWillReceiveProps",value:function(t){if(Object.keys(t).length!==Object.keys(this.props).length&&A.warn("MobX Provider: The set of provided stores has changed. Please avoid changing stores as the change might not propagate to all children"),!t.suppressChangedStoreWarning)for(var e in t)w[e]||this.props[e]===t[e]||A.warn("MobX Provider: Provided store '"+e+"' has changed. Please avoid replacing stores as the change might not propagate to all children")}}])})(r["a"]);if(!r["a"])throw new Error("mobx-preact requires Preact to be available")}).call(this,n("c8ba"))},"1a9d":function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return b}));var r=n("daf9");function o(t){throw new Error("[mobx-utils] "+t)}function i(t,e){void 0===e&&(e="Illegal state"),t||o(e)}var a=function(t){return t&&t!==Object.prototype&&Object.getOwnPropertyNames(t).concat(a(Object.getPrototypeOf(t))||[])},s=function(t){var e=a(t),n=e.filter((function(t,n){return e.indexOf(t)===n}));return n},u=function(t){return s(t).filter((function(t){return"constructor"!==t&&!~t.indexOf("__")}))},l="pending",c="fulfilled",p="rejected";function d(t){switch(this.state){case l:return t.pending&&t.pending(this.value);case p:return t.rejected&&t.rejected(this.value);case c:return t.fulfilled?t.fulfilled(this.value):this.value}}function f(t,e){if(i(arguments.length<=2,"fromPromise expects up to two arguments"),i("function"===typeof t||"object"===typeof t&&t&&"function"===typeof t.then,"Please pass a promise or function to fromPromise"),!0===t.isPromiseBasedObservable)return t;"function"===typeof t&&(t=new Promise(t));var n=t;t.then(Object(r["j"])("observableFromPromise-resolve",(function(t){n.value=t,n.state=c})),Object(r["j"])("observableFromPromise-reject",(function(t){n.value=t,n.state=p}))),n.isPromiseBasedObservable=!0,n.case=d;var o=e&&e.state===c?e.value:void 0;return Object(r["p"])(n,{value:o,state:l},{},{deep:!1}),n}(function(t){function e(e){void 0===e&&(e=void 0);var n=t(Promise.resolve(e));return n.state=c,n.value=e,n}t.reject=Object(r["j"])("fromPromise.reject",(function(e){var n=t(Promise.reject(e));return n.state=p,n.value=e,n})),t.resolve=Object(r["j"])("fromPromise.resolve",e)})(f||(f={}));var h=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};(function(){function t(t,e){var n=this;Object(r["E"])((function(){n.current=e,n.subscription=t.subscribe(n)}))}t.prototype.dispose=function(){this.subscription&&this.subscription.unsubscribe()},t.prototype.next=function(t){this.current=t},t.prototype.complete=function(){this.dispose()},t.prototype.error=function(t){this.current=t,this.dispose()},h([r["A"].ref],t.prototype,"current",void 0),h([r["j"].bound],t.prototype,"next",null),h([r["j"].bound],t.prototype,"complete",null),h([r["j"].bound],t.prototype,"error",null)})();var y=function(){return y=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},y.apply(this,arguments)},v=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},g=["model","reset","submit","isDirty","isPropertyDirty","resetProperty"];(function(){function t(t){var e=this;this.model=t,this.localValues=r["A"].map({}),this.localComputedValues=r["A"].map({}),this.isPropertyDirty=function(t){return e.localValues.has(t)},i(Object(r["y"])(t),"createViewModel expects an observable object"),u(t).forEach((function(n){if(n!==r["a"]&&"__mobxDidRunLazyInitializers"!==n){if(i(-1===g.indexOf(n),"The propertyname "+n+" is reserved and cannot be used with viewModels"),Object(r["u"])(t,n)){var o=Object(r["f"])(t,n).derivation;e.localComputedValues.set(n,Object(r["l"])(o.bind(e)))}var a=Object.getOwnPropertyDescriptor(t,n),s=a?{enumerable:a.enumerable}:{};Object.defineProperty(e,n,y(y({},s),{configurable:!0,get:function(){return Object(r["u"])(t,n)?e.localComputedValues.get(n).get():e.isPropertyDirty(n)?e.localValues.get(n):e.model[n]},set:Object(r["j"])((function(t){t!==e.model[n]?e.localValues.set(n,t):e.localValues.delete(n)}))}))}}))}Object.defineProperty(t.prototype,"isDirty",{get:function(){return this.localValues.size>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"changedValues",{get:function(){return this.localValues.toJS()},enumerable:!1,configurable:!0}),t.prototype.submit=function(){var t=this;Object(r["z"])(this.localValues).forEach((function(e){var n=t.localValues.get(e),o=t.model[e];Object(r["w"])(o)?o.replace(n):Object(r["x"])(o)?(o.clear(),o.merge(n)):Object(r["t"])(n)||(t.model[e]=n)})),this.localValues.clear()},t.prototype.reset=function(){this.localValues.clear()},t.prototype.resetProperty=function(t){this.localValues.delete(t)},v([r["l"]],t.prototype,"isDirty",null),v([r["l"]],t.prototype,"changedValues",null),v([r["j"].bound],t.prototype,"submit",null),v([r["j"].bound],t.prototype,"reset",null),v([r["j"].bound],t.prototype,"resetProperty",null)})();function m(t){if(!t)return"ROOT";var e=[];while(t.parent)e.push(t.path),t=t.parent;return e.reverse().join("/")}function _(t){return Object(r["y"])(t)||Object(r["w"])(t)||Object(r["x"])(t)}function b(t,e){var n=new WeakMap;function o(r){var o=n.get(r.object);i(r,o),e(r,m(o),t)}function i(t,e){switch(t.type){case"add":a(t.newValue,e,t.name);break;case"update":s(t.oldValue),a(t.newValue,e,t.name||""+t.index);break;case"remove":case"delete":s(t.oldValue);break;case"splice":t.removed.map(s),t.added.forEach((function(n,r){return a(n,e,""+(t.index+r))}));for(var r=t.index+t.addedCount;r<t.object.length;r++)if(_(t.object[r])){var o=n.get(t.object[r]);o&&(o.path=""+r)}break}}function a(t,e,i){if(_(t)){var s=n.get(t);if(s){if(s.parent!==e||s.path!==i)throw new Error("The same observable object cannot appear twice in the same tree, trying to assign it to '"+m(e)+"/"+i+"', but it already exists at '"+m(s.parent)+"/"+s.path+"'")}else{var u={parent:e,path:i,dispose:Object(r["B"])(t,o)};n.set(t,u),Object(r["o"])(t).forEach((function(t){var e=t[0],n=t[1];return a(n,u,e)}))}}}function s(t){if(_(t)){var e=n.get(t);if(!e)return;n.delete(t),e.dispose(),Object(r["I"])(t).forEach(s)}}return a(t,void 0,""),function(){s(t)}}var x=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},t(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),E=(function(t){function e(e,n,o){var i=void 0===o?{}:o,a=i.name,s=void 0===a?"ogm"+(1e3*Math.random()|0):a,u=i.keyToName,l=void 0===u?function(t){return""+t}:u,c=t.call(this)||this;c._keyToName=l,c._groupBy=n,c._ogmInfoKey=Symbol("ogmInfo"+s),c._base=e;for(var p=0;p<e.length;p++)c._addItem(e[p]);return c._disposeBaseObserver=Object(r["B"])(c._base,(function(t){if("splice"===t.type)Object(r["H"])((function(){for(var e=0,n=t.removed;e<n.length;e++){var r=n[e];c._removeItem(r)}for(var o=0,i=t.added;o<i.length;o++){var a=i[o];c._addItem(a)}}));else{if("update"!==t.type)throw new Error("illegal state");Object(r["H"])((function(){c._removeItem(t.oldValue),c._addItem(t.newValue)}))}})),c}x(e,t),e.prototype.clear=function(){throw new Error("not supported")},e.prototype.delete=function(t){throw new Error("not supported")},e.prototype.set=function(t,e){throw new Error("not supported")},e.prototype.dispose=function(){this._disposeBaseObserver();for(var t=0;t<this._base.length;t++){var e=this._base[t],n=e[this._ogmInfoKey];n.reaction(),delete e[this._ogmInfoKey]}},e.prototype._getGroupArr=function(e){var n=t.prototype.get.call(this,e);return void 0===n&&(n=Object(r["A"])([],{name:"GroupArray["+this._keyToName(e)+"]",deep:!1}),t.prototype.set.call(this,e,n)),n},e.prototype._removeFromGroupArr=function(e,n){var r=t.prototype.get.call(this,e);1===r.length?t.prototype.delete.call(this,e):(n===r.length-1||(r[n]=r[r.length-1],r[n][this._ogmInfoKey].groupArrIndex=n),r.length--)},e.prototype._addItem=function(t){var e=this,n=this._groupBy(t),o=this._getGroupArr(n),i={groupByValue:n,groupArrIndex:o.length,reaction:Object(r["D"])((function(){return e._groupBy(t)}),(function(n,r){var o=t[e._ogmInfoKey];e._removeFromGroupArr(o.groupByValue,o.groupArrIndex);var i=e._getGroupArr(n),a=i.length;i.push(t),o.groupByValue=n,o.groupArrIndex=a}))};Object.defineProperty(t,this._ogmInfoKey,{configurable:!0,enumerable:!1,value:i}),o.push(t)},e.prototype._removeItem=function(t){var e=t[this._ogmInfoKey];this._removeFromGroupArr(e.groupByValue,e.groupArrIndex),e.reaction(),delete t[this._ogmInfoKey]}}(r["b"]),function(){function t(t,e){this.base=t,this.args=e,this.closestIdx=0,this.isDisposed=!1;for(var n=this.closest=this.root=t,r=0;r<this.args.length-1;r++){if(n=n.get(e[r]),!n)break;this.closest=n}this.closestIdx=r}return t.prototype.exists=function(){this.assertNotDisposed();var t=this.args.length;return this.closestIdx>=t-1&&this.closest.has(this.args[t-1])},t.prototype.get=function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");return this.closest.get(this.args[this.args.length-1])},t.prototype.set=function(t){this.assertNotDisposed();for(var e=this.args.length,n=this.closest,r=this.closestIdx;r<e-1;r++){var o=new Map;n.set(this.args[r],o),n=o}this.closestIdx=e-1,this.closest=n,n.set(this.args[e-1],t)},t.prototype.delete=function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");var t=this.args.length;this.closest.delete(this.args[t-1]);for(var e=this.root,n=[e],r=0;r<t-1;r++)e=e.get(this.args[r]),n.push(e);for(r=n.length-1;r>0;r--)0===n[r].size&&n[r-1].delete(this.args[r-1]);this.isDisposed=!0},t.prototype.assertNotDisposed=function(){if(this.isDisposed)throw new Error("Concurrent modification exception")},t}());(function(){function t(){this.store=new Map,this.argsLength=-1}t.prototype.entry=function(t){if(-1===this.argsLength)this.argsLength=t.length;else if(this.argsLength!==t.length)throw new Error("DeepMap should be used with functions with a consistent length, expected: "+this.argsLength+", got: "+t.length);return this.last&&(this.last.isDisposed=!0),this.last=new E(this.store,t)}})();new Set,new Set;var O,w=Promise.resolve();O="undefined"!==typeof queueMicrotask?queueMicrotask:"undefined"!==typeof t&&t.nextTick?function(e){t.nextTick(e)}:function(t){setTimeout(t,0)};var A=function(){return new Promise((function(t){O(t)}))}}).call(this,n("4362"))},"262e":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));n("131a");function r(t,e){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},r(t,e)}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&r(t,e)}},"26ee":function(t,e,n){"use strict";var r=n("5ea3"),o="object"==typeof self&&self&&self.Object===Object&&self,i=r["a"]||o||Function("return this")();e["a"]=i},"2edc":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));n("e439"),n("d3b7"),n("5d41");var r=n("7e84");function o(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=Object(r["a"])(t)););return t}function i(){return i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=o(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},i.apply(null,arguments)}function a(t,e,n,o){var a=i(Object(r["a"])(1&o?t.prototype:t),e,n);return 2&o&&"function"==typeof a?function(t){return a.apply(n,t)}:a}},"2f74":function(t,e,n){"use strict";function r(){return!1}e["a"]=r},"4ae1":function(t,e,n){var r=n("23e7"),o=n("d066"),i=n("1c0b"),a=n("825a"),s=n("861d"),u=n("7c73"),l=n("0538"),c=n("d039"),p=o("Reflect","construct"),d=c((function(){function t(){}return!(p((function(){}),[],t)instanceof t)})),f=!c((function(){p((function(){}))})),h=d||f;r({target:"Reflect",stat:!0,forced:h,sham:h},{construct:function(t,e){i(t),a(e);var n=arguments.length<3?t:i(arguments[2]);if(f&&!d)return p(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(l.apply(t,r))}var o=n.prototype,c=u(s(o)?o:Object.prototype),h=Function.apply.call(t,c,e);return s(h)?h:c}})},"4d26":function(t,e,n){var r,o;
/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(){"use strict";var n={}.hasOwnProperty;function i(){for(var t="",e=0;e<arguments.length;e++){var n=arguments[e];n&&(t=s(t,a(n)))}return t}function a(t){if("string"===typeof t||"number"===typeof t)return t;if("object"!==typeof t)return"";if(Array.isArray(t))return i.apply(null,t);if(t.toString!==Object.prototype.toString&&!t.toString.toString().includes("[native code]"))return t.toString();var e="";for(var r in t)n.call(t,r)&&t[r]&&(e=s(e,r));return e}function s(t,e){return e?t?t+" "+e:t+e:t}t.exports?(i.default=i,t.exports=i):(r=[],o=function(){return i}.apply(e,r),void 0===o||(t.exports=o))})()},"58e0":function(t,e,n){"use strict";(function(t){var r=n("26ee"),o=n("2f74"),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,a=i&&"object"==typeof t&&t&&!t.nodeType&&t,s=a&&a.exports===i,u=s?r["a"].Buffer:void 0,l=u?u.isBuffer:void 0,c=l||o["a"];e["a"]=c}).call(this,n("dd40")(t))},"5d41":function(t,e,n){var r=n("23e7"),o=n("861d"),i=n("825a"),a=n("5135"),s=n("06cf"),u=n("e163");function l(t,e){var n,r,c=arguments.length<3?t:arguments[2];return i(t)===c?t[e]:(n=s.f(t,e))?a(n,"value")?n.value:void 0===n.get?void 0:n.get.call(c):o(r=u(t))?l(r,e,c):void 0}r({target:"Reflect",stat:!0},{get:l})},"5ea3":function(t,e,n){"use strict";(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e["a"]=n}).call(this,n("c8ba"))},"7e84":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));n("3410"),n("131a");function r(t){return r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},r(t)}},"8a605":function(t,e,n){var r;(function(o,i,a){if(o){for(var s,u={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},l={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},c={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},p={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},d=1;d<20;++d)u[111+d]="f"+d;for(d=0;d<=9;++d)u[d+96]=d.toString();A.prototype.bind=function(t,e,n){var r=this;return t=t instanceof Array?t:[t],r._bindMultiple.call(r,t,e,n),r},A.prototype.unbind=function(t,e){var n=this;return n.bind.call(n,t,(function(){}),e)},A.prototype.trigger=function(t,e){var n=this;return n._directMap[t+":"+e]&&n._directMap[t+":"+e]({},t),n},A.prototype.reset=function(){var t=this;return t._callbacks={},t._directMap={},t},A.prototype.stopCallback=function(t,e){var n=this;if((" "+e.className+" ").indexOf(" mousetrap ")>-1)return!1;if(w(e,n.target))return!1;if("composedPath"in t&&"function"===typeof t.composedPath){var r=t.composedPath()[0];r!==t.target&&(e=r)}return"INPUT"==e.tagName||"SELECT"==e.tagName||"TEXTAREA"==e.tagName||e.isContentEditable},A.prototype.handleKey=function(){var t=this;return t._handleKey.apply(t,arguments)},A.addKeycodes=function(t){for(var e in t)t.hasOwnProperty(e)&&(u[e]=t[e]);s=null},A.init=function(){var t=A(i);for(var e in t)"_"!==e.charAt(0)&&(A[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e))},A.init(),o.Mousetrap=A,t.exports&&(t.exports=A),r=function(){return A}.call(e,n,e,t),r===a||(t.exports=r)}function f(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)}function h(t){if("keypress"==t.type){var e=String.fromCharCode(t.which);return t.shiftKey||(e=e.toLowerCase()),e}return u[t.which]?u[t.which]:l[t.which]?l[t.which]:String.fromCharCode(t.which).toLowerCase()}function y(t,e){return t.sort().join(",")===e.sort().join(",")}function v(t){var e=[];return t.shiftKey&&e.push("shift"),t.altKey&&e.push("alt"),t.ctrlKey&&e.push("ctrl"),t.metaKey&&e.push("meta"),e}function g(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function m(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function _(t){return"shift"==t||"ctrl"==t||"alt"==t||"meta"==t}function b(){if(!s)for(var t in s={},u)t>95&&t<112||u.hasOwnProperty(t)&&(s[u[t]]=t);return s}function x(t,e,n){return n||(n=b()[t]?"keydown":"keypress"),"keypress"==n&&e.length&&(n="keydown"),n}function E(t){return"+"===t?["+"]:(t=t.replace(/\+{2}/g,"+plus"),t.split("+"))}function O(t,e){var n,r,o,i=[];for(n=E(t),o=0;o<n.length;++o)r=n[o],p[r]&&(r=p[r]),e&&"keypress"!=e&&c[r]&&(r=c[r],i.push("shift")),_(r)&&i.push(r);return e=x(r,i,e),{key:r,modifiers:i,action:e}}function w(t,e){return null!==t&&t!==i&&(t===e||w(t.parentNode,e))}function A(t){var e=this;if(t=t||i,!(e instanceof A))return new A(t);e.target=t,e._callbacks={},e._directMap={};var n,r={},o=!1,a=!1,s=!1;function u(t){t=t||{};var e,n=!1;for(e in r)t[e]?n=!0:r[e]=0;n||(s=!1)}function l(t,n,o,i,a,s){var u,l,c=[],p=o.type;if(!e._callbacks[t])return[];for("keyup"==p&&_(t)&&(n=[t]),u=0;u<e._callbacks[t].length;++u)if(l=e._callbacks[t][u],(i||!l.seq||r[l.seq]==l.level)&&p==l.action&&("keypress"==p&&!o.metaKey&&!o.ctrlKey||y(n,l.modifiers))){var d=!i&&l.combo==a,f=i&&l.seq==i&&l.level==s;(d||f)&&e._callbacks[t].splice(u,1),c.push(l)}return c}function c(t,n,r,o){e.stopCallback(n,n.target||n.srcElement,r,o)||!1===t(n,r)&&(g(n),m(n))}function p(t){"number"!==typeof t.which&&(t.which=t.keyCode);var n=h(t);n&&("keyup"!=t.type||o!==n?e.handleKey(n,v(t),t):o=!1)}function d(){clearTimeout(n),n=setTimeout(u,1e3)}function b(t,e,n,i){function a(e){return function(){s=e,++r[t],d()}}function l(e){c(n,e,t),"keyup"!==i&&(o=h(e)),setTimeout(u,10)}r[t]=0;for(var p=0;p<e.length;++p){var f=p+1===e.length,y=f?l:a(i||O(e[p+1]).action);x(e[p],y,i,t,p)}}function x(t,n,r,o,i){e._directMap[t+":"+r]=n,t=t.replace(/\s+/g," ");var a,s=t.split(" ");s.length>1?b(t,s,n,r):(a=O(t,r),e._callbacks[a.key]=e._callbacks[a.key]||[],l(a.key,a.modifiers,{type:a.action},o,t,i),e._callbacks[a.key][o?"unshift":"push"]({callback:n,modifiers:a.modifiers,action:a.action,seq:o,level:i,combo:t}))}e._handleKey=function(t,e,n){var r,o=l(t,e,n),i={},p=0,d=!1;for(r=0;r<o.length;++r)o[r].seq&&(p=Math.max(p,o[r].level));for(r=0;r<o.length;++r)if(o[r].seq){if(o[r].level!=p)continue;d=!0,i[o[r].seq]=1,c(o[r].callback,n,o[r].combo,o[r].seq)}else d||c(o[r].callback,n,o[r].combo);var f="keypress"==n.type&&a;n.type!=s||_(t)||f||u(i),a=d&&"keydown"==n.type},e._bindMultiple=function(t,e,n){for(var r=0;r<t.length;++r)x(t[r],e,n)},f(t,"keypress",p),f(t,"keydown",p),f(t,"keyup",p)}})("undefined"!==typeof window?window:null,"undefined"!==typeof window?document:null)},"8f33":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));n("4ae1");var r=n("7e84");function o(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(o=function(){return!!t})()}var i=n("53ca");function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t,e){if(e&&("object"==Object(i["a"])(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return a(t)}function u(t,e,n){return e=Object(r["a"])(e),s(t,o()?Reflect.construct(e,n||[],Object(r["a"])(t).constructor):e.apply(t,n))}},a434:function(t,e,n){"use strict";var r=n("23e7"),o=n("23cb"),i=n("a691"),a=n("50c4"),s=n("7b0b"),u=n("65f0"),l=n("8418"),c=n("1dde"),p=n("ae40"),d=c("splice"),f=p("splice",{ACCESSORS:!0,0:0,1:2}),h=Math.max,y=Math.min,v=9007199254740991,g="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!d||!f},{splice:function(t,e){var n,r,c,p,d,f,m=s(this),_=a(m.length),b=o(t,_),x=arguments.length;if(0===x?n=r=0:1===x?(n=0,r=_-b):(n=x-2,r=y(h(i(e),0),_-b)),_+n-r>v)throw TypeError(g);for(c=u(m,r),p=0;p<r;p++)d=b+p,d in m&&l(c,p,m[d]);if(c.length=r,n<r){for(p=b;p<_-r;p++)d=p+r,f=p+n,d in m?m[f]=m[d]:delete m[f];for(p=_;p>_-r+n;p--)delete m[p-1]}else if(n>r)for(p=_-r;p>b;p--)d=p+r-1,f=p+n-1,d in m?m[f]=m[d]:delete m[f];for(p=0;p<n;p++)m[p+b]=arguments[p+2];return m.length=_-r+n,c}})},bee2:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("a38e");function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,Object(r["a"])(o.key),o)}}function i(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}},c6eb:function(t,e,n){"use strict";(function(t){var r=n("5ea3"),o="object"==typeof exports&&exports&&!exports.nodeType&&exports,i=o&&"object"==typeof t&&t&&!t.nodeType&&t,a=i&&i.exports===o,s=a&&r["a"].process,u=function(){try{var t=i&&i.require&&i.require("util").types;return t||s&&s.binding&&s.binding("util")}catch(e){}}();e["a"]=u}).call(this,n("dd40")(t))},c740:function(t,e,n){"use strict";var r=n("23e7"),o=n("b727").findIndex,i=n("44d2"),a=n("ae40"),s="findIndex",u=!0,l=a(s);s in[]&&Array(1)[s]((function(){u=!1})),r({target:"Array",proto:!0,forced:u||!l},{findIndex:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),i(s)},c814:function(t,e,n){},d4ec:function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",(function(){return r}))},da65:function(t,e,n){"use strict";n.d(e,"a",(function(){return A})),n.d(e,"b",(function(){return w})),n.d(e,"c",(function(){return F})),n.d(e,"d",(function(){return W})),n.d(e,"e",(function(){return x})),n.d(e,"f",(function(){return O})),n.d(e,"g",(function(){return x})),n.d(e,"h",(function(){return V})),n.d(e,"i",(function(){return o})),n.d(e,"j",(function(){return Y})),n.d(e,"k",(function(){return C}));var r,o,i,a,s,u,l,c,p,d,f,h,y={},v=[],g=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,m=Array.isArray;function _(t,e){for(var n in e)t[n]=e[n];return t}function b(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function x(t,e,n){var o,i,a,s={};for(a in e)"key"==a?o=e[a]:"ref"==a?i=e[a]:s[a]=e[a];if(arguments.length>2&&(s.children=arguments.length>3?r.call(arguments,2):n),"function"==typeof t&&null!=t.defaultProps)for(a in t.defaultProps)void 0===s[a]&&(s[a]=t.defaultProps[a]);return E(t,s,o,i,null)}function E(t,e,n,r,a){var s={type:t,props:e,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==a?++i:a,__i:-1,__u:0};return null==a&&null!=o.vnode&&o.vnode(s),s}function O(){return{current:null}}function w(t){return t.children}function A(t,e){this.props=t,this.context=e}function S(t,e){if(null==e)return t.__?S(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e)return n.__e;return"function"==typeof t.type?S(t):null}function M(t){var e,n;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e){t.__e=t.__c.base=n.__e;break}return M(t)}}function j(t){(!t.__d&&(t.__d=!0)&&a.push(t)&&!T.__r++||s!==o.debounceRendering)&&((s=o.debounceRendering)||u)(T)}function T(){var t,e,n,r,i,s,u,c;for(a.sort(l);t=a.shift();)t.__d&&(e=a.length,r=void 0,s=(i=(n=t).__v).__e,u=[],c=[],n.__P&&((r=_({},i)).__v=i.__v+1,o.vnode&&o.vnode(r),B(n.__P,r,i,n.__n,n.__P.namespaceURI,32&i.__u?[s]:null,u,null==s?S(i):s,!!(32&i.__u),c),r.__v=i.__v,r.__.__k[r.__i]=r,X(u,r,c),r.__e!=s&&M(r)),a.length>e&&a.sort(l));T.__r=0}function P(t,e,n,r,o,i,a,s,u,l,c){var p,d,f,h,g,m,_=r&&r.__k||v,b=e.length;for(u=D(n,e,_,u,b),p=0;p<b;p++)null!=(f=n.__k[p])&&(d=-1===f.__i?y:_[f.__i]||y,f.__i=p,m=B(t,f,d,o,i,a,s,u,l,c),h=f.__e,f.ref&&d.ref!=f.ref&&(d.ref&&H(d.ref,null,f),c.push(f.ref,f.__c||h,f)),null==g&&null!=h&&(g=h),4&f.__u||d.__k===f.__k?u=N(f,u,t):"function"==typeof f.type&&void 0!==m?u=m:h&&(u=h.nextSibling),f.__u&=-7);return n.__e=g,u}function D(t,e,n,r,o){var i,a,s,u,l,c=n.length,p=c,d=0;for(t.__k=new Array(o),i=0;i<o;i++)null!=(a=e[i])&&"boolean"!=typeof a&&"function"!=typeof a?(u=i+d,(a=t.__k[i]="string"==typeof a||"number"==typeof a||"bigint"==typeof a||a.constructor==String?E(null,a,null,null,null):m(a)?E(w,{children:a},null,null,null):void 0===a.constructor&&a.__b>0?E(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):a).__=t,a.__b=t.__b+1,s=null,-1!==(l=a.__i=R(a,n,u,p))&&(p--,(s=n[l])&&(s.__u|=2)),null==s||null===s.__v?(-1==l&&d--,"function"!=typeof a.type&&(a.__u|=4)):l!=u&&(l==u-1?d--:l==u+1?d++:(l>u?d--:d++,a.__u|=4))):t.__k[i]=null;if(p)for(i=0;i<c;i++)null!=(s=n[i])&&0==(2&s.__u)&&(s.__e==r&&(r=S(s)),U(s,s));return r}function N(t,e,n){var r,o;if("function"==typeof t.type){for(r=t.__k,o=0;r&&o<r.length;o++)r[o]&&(r[o].__=t,e=N(r[o],e,n));return e}t.__e!=e&&(e&&t.type&&!n.contains(e)&&(e=S(t)),n.insertBefore(t.__e,e||null),e=t.__e);do{e=e&&e.nextSibling}while(null!=e&&8==e.nodeType);return e}function C(t,e){return e=e||[],null==t||"boolean"==typeof t||(m(t)?t.some((function(t){C(t,e)})):e.push(t)),e}function R(t,e,n,r){var o,i,a=t.key,s=t.type,u=e[n];if(null===u||u&&a==u.key&&s===u.type&&0==(2&u.__u))return n;if(r>(null!=u&&0==(2&u.__u)?1:0))for(o=n-1,i=n+1;o>=0||i<e.length;){if(o>=0){if((u=e[o])&&0==(2&u.__u)&&a==u.key&&s===u.type)return o;o--}if(i<e.length){if((u=e[i])&&0==(2&u.__u)&&a==u.key&&s===u.type)return i;i++}}return-1}function L(t,e,n){"-"==e[0]?t.setProperty(e,null==n?"":n):t[e]=null==n?"":"number"!=typeof n||g.test(e)?n:n+"px"}function I(t,e,n,r,o){var i;t:if("style"==e)if("string"==typeof n)t.style.cssText=n;else{if("string"==typeof r&&(t.style.cssText=r=""),r)for(e in r)n&&e in n||L(t.style,e,"");if(n)for(e in n)r&&n[e]===r[e]||L(t.style,e,n[e])}else if("o"==e[0]&&"n"==e[1])i=e!=(e=e.replace(c,"$1")),e=e.toLowerCase()in t||"onFocusOut"==e||"onFocusIn"==e?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+i]=n,n?r?n.u=r.u:(n.u=p,t.addEventListener(e,i?f:d,i)):t.removeEventListener(e,i?f:d,i);else{if("http://www.w3.org/2000/svg"==o)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=e&&"height"!=e&&"href"!=e&&"list"!=e&&"form"!=e&&"tabIndex"!=e&&"download"!=e&&"rowSpan"!=e&&"colSpan"!=e&&"role"!=e&&"popover"!=e&&e in t)try{t[e]=null==n?"":n;break t}catch(t){}"function"==typeof n||(null==n||!1===n&&"-"!=e[4]?t.removeAttribute(e):t.setAttribute(e,"popover"==e&&1==n?"":n))}}function k(t){return function(e){if(this.l){var n=this.l[e.type+t];if(null==e.t)e.t=p++;else if(e.t<n.u)return;return n(o.event?o.event(e):e)}}}function B(t,e,n,r,i,a,s,u,l,c){var p,d,f,h,y,v,g,x,E,O,S,M,j,T,D,N,C,R=e.type;if(void 0!==e.constructor)return null;128&n.__u&&(l=!!(32&n.__u),a=[u=e.__e=n.__e]),(p=o.__b)&&p(e);t:if("function"==typeof R)try{if(x=e.props,E="prototype"in R&&R.prototype.render,O=(p=R.contextType)&&r[p.__c],S=p?O?O.props.value:p.__:r,n.__c?g=(d=e.__c=n.__c).__=d.__E:(E?e.__c=d=new R(x,S):(e.__c=d=new A(x,S),d.constructor=R,d.render=G),O&&O.sub(d),d.props=x,d.state||(d.state={}),d.context=S,d.__n=r,f=d.__d=!0,d.__h=[],d._sb=[]),E&&null==d.__s&&(d.__s=d.state),E&&null!=R.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=_({},d.__s)),_(d.__s,R.getDerivedStateFromProps(x,d.__s))),h=d.props,y=d.state,d.__v=e,f)E&&null==R.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),E&&null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(E&&null==R.getDerivedStateFromProps&&x!==h&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(x,S),!d.__e&&(null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(x,d.__s,S)||e.__v==n.__v)){for(e.__v!=n.__v&&(d.props=x,d.state=d.__s,d.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some((function(t){t&&(t.__=e)})),M=0;M<d._sb.length;M++)d.__h.push(d._sb[M]);d._sb=[],d.__h.length&&s.push(d);break t}null!=d.componentWillUpdate&&d.componentWillUpdate(x,d.__s,S),E&&null!=d.componentDidUpdate&&d.__h.push((function(){d.componentDidUpdate(h,y,v)}))}if(d.context=S,d.props=x,d.__P=t,d.__e=!1,j=o.__r,T=0,E){for(d.state=d.__s,d.__d=!1,j&&j(e),p=d.render(d.props,d.state,d.context),D=0;D<d._sb.length;D++)d.__h.push(d._sb[D]);d._sb=[]}else do{d.__d=!1,j&&j(e),p=d.render(d.props,d.state,d.context),d.state=d.__s}while(d.__d&&++T<25);d.state=d.__s,null!=d.getChildContext&&(r=_(_({},r),d.getChildContext())),E&&!f&&null!=d.getSnapshotBeforeUpdate&&(v=d.getSnapshotBeforeUpdate(h,y)),u=P(t,m(N=null!=p&&p.type===w&&null==p.key?p.props.children:p)?N:[N],e,n,r,i,a,s,u,l,c),d.base=e.__e,e.__u&=-161,d.__h.length&&s.push(d),g&&(d.__E=d.__=null)}catch(t){if(e.__v=null,l||null!=a)if(t.then){for(e.__u|=l?160:128;u&&8==u.nodeType&&u.nextSibling;)u=u.nextSibling;a[a.indexOf(u)]=null,e.__e=u}else for(C=a.length;C--;)b(a[C]);else e.__e=n.__e,e.__k=n.__k;o.__e(t,e,n)}else null==a&&e.__v==n.__v?(e.__k=n.__k,e.__e=n.__e):u=e.__e=z(n.__e,e,n,r,i,a,s,l,c);return(p=o.diffed)&&p(e),128&e.__u?void 0:u}function X(t,e,n){for(var r=0;r<n.length;r++)H(n[r],n[++r],n[++r]);o.__c&&o.__c(e,t),t.some((function(e){try{t=e.__h,e.__h=[],t.some((function(t){t.call(e)}))}catch(t){o.__e(t,e.__v)}}))}function z(t,e,n,i,a,s,u,l,c){var p,d,f,h,v,g,_,x=n.props,E=e.props,O=e.type;if("svg"==O?a="http://www.w3.org/2000/svg":"math"==O?a="http://www.w3.org/1998/Math/MathML":a||(a="http://www.w3.org/1999/xhtml"),null!=s)for(p=0;p<s.length;p++)if((v=s[p])&&"setAttribute"in v==!!O&&(O?v.localName==O:3==v.nodeType)){t=v,s[p]=null;break}if(null==t){if(null==O)return document.createTextNode(E);t=document.createElementNS(a,O,E.is&&E),l&&(o.__m&&o.__m(e,s),l=!1),s=null}if(null===O)x===E||l&&t.data===E||(t.data=E);else{if(s=s&&r.call(t.childNodes),x=n.props||y,!l&&null!=s)for(x={},p=0;p<t.attributes.length;p++)x[(v=t.attributes[p]).name]=v.value;for(p in x)if(v=x[p],"children"==p);else if("dangerouslySetInnerHTML"==p)f=v;else if(!(p in E)){if("value"==p&&"defaultValue"in E||"checked"==p&&"defaultChecked"in E)continue;I(t,p,null,v,a)}for(p in E)v=E[p],"children"==p?h=v:"dangerouslySetInnerHTML"==p?d=v:"value"==p?g=v:"checked"==p?_=v:l&&"function"!=typeof v||x[p]===v||I(t,p,v,x[p],a);if(d)l||f&&(d.__html===f.__html||d.__html===t.innerHTML)||(t.innerHTML=d.__html),e.__k=[];else if(f&&(t.innerHTML=""),P(t,m(h)?h:[h],e,n,i,"foreignObject"==O?"http://www.w3.org/1999/xhtml":a,s,u,s?s[0]:n.__k&&S(n,0),l,c),null!=s)for(p=s.length;p--;)b(s[p]);l||(p="value","progress"==O&&null==g?t.removeAttribute("value"):void 0!==g&&(g!==t[p]||"progress"==O&&!g||"option"==O&&g!==x[p])&&I(t,p,g,x[p],a),p="checked",void 0!==_&&_!==t[p]&&I(t,p,_,x[p],a))}return t}function H(t,e,n){try{if("function"==typeof t){var r="function"==typeof t.__u;r&&t.__u(),r&&null==e||(t.__u=t(e))}else t.current=e}catch(t){o.__e(t,n)}}function U(t,e,n){var r,i;if(o.unmount&&o.unmount(t),(r=t.ref)&&(r.current&&r.current!==t.__e||H(r,null,e)),null!=(r=t.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(t){o.__e(t,e)}r.base=r.__P=null}if(r=t.__k)for(i=0;i<r.length;i++)r[i]&&U(r[i],e,n||"function"!=typeof t.type);n||b(t.__e),t.__c=t.__=t.__e=void 0}function G(t,e,n){return this.constructor(t,n)}function Y(t,e,n){var i,a,s,u;e==document&&(e=document.documentElement),o.__&&o.__(t,e),a=(i="function"==typeof n)?null:n&&n.__k||e.__k,s=[],u=[],B(e,t=(!i&&n||e).__k=x(w,null,[t]),a||y,y,e.namespaceURI,!i&&n?[n]:a?null:e.firstChild?r.call(e.childNodes):null,s,!i&&n?n:a?a.__e:e.firstChild,i,u),X(s,t,u)}function V(t,e){Y(t,e,V)}function F(t,e,n){var o,i,a,s,u=_({},t.props);for(a in t.type&&t.type.defaultProps&&(s=t.type.defaultProps),e)"key"==a?o=e[a]:"ref"==a?i=e[a]:u[a]=void 0===e[a]&&void 0!==s?s[a]:e[a];return arguments.length>2&&(u.children=arguments.length>3?r.call(arguments,2):n),E(t.type,u,o||t.key,i||t.ref,null)}function W(t,e){var n={__c:e="__cC"+h++,__:t,Consumer:function(t,e){return t.children(e)},Provider:function(t){var n,r;return this.getChildContext||(n=new Set,(r={})[e]=this,this.getChildContext=function(){return r},this.componentWillUnmount=function(){n=null},this.shouldComponentUpdate=function(t){this.props.value!==t.value&&n.forEach((function(t){t.__e=!0,j(t)}))},this.sub=function(t){n.add(t);var e=t.componentWillUnmount;t.componentWillUnmount=function(){n&&n.delete(t),e&&e.call(t)}}),t.children}};return n.Provider.__=n.Consumer.contextType=n}r=v.slice,o={__e:function(t,e,n,r){for(var o,i,a;e=e.__;)if((o=e.__c)&&!o.__)try{if((i=o.constructor)&&null!=i.getDerivedStateFromError&&(o.setState(i.getDerivedStateFromError(t)),a=o.__d),null!=o.componentDidCatch&&(o.componentDidCatch(t,r||{}),a=o.__d),a)return o.__E=o}catch(e){t=e}throw t}},i=0,A.prototype.setState=function(t,e){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=_({},this.state),"function"==typeof t&&(t=t(_({},n),this.props)),t&&_(n,t),null!=t&&this.__v&&(e&&this._sb.push(e),j(this))},A.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),j(this))},A.prototype.render=w,a=[],u="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,l=function(t,e){return t.__v.__b-e.__v.__b},T.__r=0,c=/(PointerCapture)$|Capture$/i,p=0,d=k(!1),f=k(!0),h=0},daf9:function(t,e,n){"use strict";(function(t,r){n.d(e,"a",(function(){return j})),n.d(e,"b",(function(){return Bn})),n.d(e,"c",(function(){return fe})),n.d(e,"d",(function(){return Ht})),n.d(e,"e",(function(){return zt})),n.d(e,"f",(function(){return Qn})),n.d(e,"g",(function(){return ee})),n.d(e,"h",(function(){return xt})),n.d(e,"i",(function(){return Xt})),n.d(e,"j",(function(){return Me})),n.d(e,"k",(function(){return De})),n.d(e,"l",(function(){return gt})),n.d(e,"m",(function(){return Xe})),n.d(e,"n",(function(){return D})),n.d(e,"o",(function(){return nn})),n.d(e,"p",(function(){return ze})),n.d(e,"q",(function(){return We})),n.d(e,"r",(function(){return Jn})),n.d(e,"s",(function(){return Te})),n.d(e,"t",(function(){return qe})),n.d(e,"u",(function(){return $e})),n.d(e,"v",(function(){return Qe})),n.d(e,"w",(function(){return Ln})),n.d(e,"x",(function(){return Xn})),n.d(e,"y",(function(){return $n})),n.d(e,"z",(function(){return tn})),n.d(e,"A",(function(){return pt})),n.d(e,"B",(function(){return on})),n.d(e,"C",(function(){return ke})),n.d(e,"D",(function(){return Re})),n.d(e,"E",(function(){return je})),n.d(e,"F",(function(){return rn})),n.d(e,"G",(function(){return pn})),n.d(e,"H",(function(){return hn})),n.d(e,"I",(function(){return en})),n.d(e,"J",(function(){return yn}));var o="An invariant failed, however the error is obfuscated because this is a production build.",i=[];Object.freeze(i);var a={};function s(){return++Qt.mobxGuid}function u(t){throw l(!1,t),"X"}function l(t,e){if(!t)throw new Error("[mobx] "+(e||o))}Object.freeze(a);function c(t,e){return!1}function p(t){var e=!1;return function(){if(!e)return e=!0,t.apply(this,arguments)}}var d=function(){};function f(t){var e=[];return t.forEach((function(t){-1===e.indexOf(t)&&e.push(t)})),e}function h(t){return null!==t&&"object"===typeof t}function y(t){if(null===t||"object"!==typeof t)return!1;var e=Object.getPrototypeOf(t);return e===Object.prototype||null===e}function v(t){if(E(t)||Xn(t))return t;if(Array.isArray(t))return new Map(t);if(y(t)){var e=new Map;for(var n in t)e.set(n,t[n]);return e}return u("Cannot convert to map from '"+t+"'")}function g(t,e,n){Object.defineProperty(t,e,{enumerable:!1,writable:!0,configurable:!0,value:n})}function m(t,e,n){Object.defineProperty(t,e,{enumerable:!1,writable:!1,configurable:!0,value:n})}function _(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return!n||!1!==n.configurable&&!1!==n.writable}function b(t,e){0}function x(t,e){var n="isMobX"+t;return e.prototype[n]=!0,function(t){return h(t)&&!0===t[n]}}function E(t){return t instanceof Map}function O(t){return t instanceof Set}function w(t){var e=new Set;for(var n in t)e.add(n);return Object.getOwnPropertySymbols(t).forEach((function(n){Object.getOwnPropertyDescriptor(t,n).enumerable&&e.add(n)})),Array.from(e)}function A(t){return t&&t.toString?t.toString():new String(t).toString()}function S(t){return null===t?null:"object"===typeof t?""+t:t}var M="undefined"!==typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,j=Symbol("mobx administration"),T=function(){function t(t){void 0===t&&(t="Atom@"+s()),this.name=t,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=new Set,this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=ft.NOT_TRACKING}return t.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach((function(t){return t()}))},t.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach((function(t){return t()}))},t.prototype.reportObserved=function(){return se(this)},t.prototype.reportChanged=function(){ie(),ue(this),ae()},t.prototype.toString=function(){return this.name},t}(),P=x("Atom",T);function D(t,e,n){void 0===e&&(e=d),void 0===n&&(n=d);var r=new T(t);return e!==d&&Ie(r,e),n!==d&&ke(r,n),r}function N(t,e){return t===e}function C(t,e){return nr(t,e)}function R(t,e){return nr(t,e,1)}function L(t,e){return Object.is(t,e)}var I={identity:N,structural:C,default:L,shallow:R},k=function(t,e){return k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},k(t,e)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function B(t,e){function n(){this.constructor=t}k(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var X=function(){return X=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},X.apply(this,arguments)};function z(t){var e="function"===typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function H(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(r=i.next()).done)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(o)throw o.error}}return a}function U(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(H(arguments[e]));return t}var G=Symbol("mobx did run lazy initializers"),Y=Symbol("mobx pending decorators"),V={},F={};function W(t,e){var n=e?V:F;return n[t]||(n[t]={configurable:!0,enumerable:e,get:function(){return K(this),this[t]},set:function(e){K(this),this[t]=e}})}function K(t){var e,n;if(!0!==t[G]){var r=t[Y];if(r){g(t,G,!0);var o=U(Object.getOwnPropertySymbols(r),Object.keys(r));try{for(var i=z(o),a=i.next();!a.done;a=i.next()){var s=a.value,u=r[s];u.propertyCreator(t,u.prop,u.descriptor,u.decoratorTarget,u.decoratorArguments)}}catch(l){e={error:l}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}}}function Z(t,e){return function(){var n,r=function(r,o,i,a){if(!0===a)return e(r,o,i,r,n),null;if(!Object.prototype.hasOwnProperty.call(r,Y)){var s=r[Y];g(r,Y,X({},s))}return r[Y][o]={prop:o,propertyCreator:e,descriptor:i,decoratorTarget:r,decoratorArguments:n},W(o,t)};return q(arguments)?(n=i,r.apply(null,arguments)):(n=Array.prototype.slice.call(arguments),r)}}function q(t){return(2===t.length||3===t.length)&&("string"===typeof t[1]||"symbol"===typeof t[1])||4===t.length&&!0===t[3]}function $(t,e,n){return Qe(t)?t:Array.isArray(t)?pt.array(t,{name:n}):y(t)?pt.object(t,void 0,{name:n}):E(t)?pt.map(t,{name:n}):O(t)?pt.set(t,{name:n}):t}function J(t,e,n){return void 0===t||null===t||$n(t)||Ln(t)||Xn(t)||Un(t)?t:Array.isArray(t)?pt.array(t,{name:n,deep:!1}):y(t)?pt.object(t,void 0,{name:n,deep:!1}):E(t)?pt.map(t,{name:n,deep:!1}):O(t)?pt.set(t,{name:n,deep:!1}):u(!1)}function Q(t){return t}function tt(t,e,n){return nr(t,e)?e:t}function et(e){l(e);var n=Z(!0,(function(t,n,r,o,i){var a=r?r.initializer?r.initializer.call(t):r.value:void 0;Yn(t).addObservableProp(n,a,e)})),r=("undefined"!==typeof t&&Object({VUE_APP_BASE_API:"/prod-api",NODE_ENV:"production",BASE_URL:"/"}),n);return r.enhancer=e,r}var nt={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function rt(t){return null===t||void 0===t?nt:"string"===typeof t?{name:t,deep:!0,proxy:!0}:t}Object.freeze(nt);var ot=et($),it=et(J),at=et(Q),st=et(tt);function ut(t){return t.defaultDecorator?t.defaultDecorator.enhancer:!1===t.deep?Q:$}function lt(t,e,n){if("string"===typeof arguments[1]||"symbol"===typeof arguments[1])return ot.apply(null,arguments);if(Qe(t))return t;var r=y(t)?pt.object(t,e,n):Array.isArray(t)?pt.array(t,e):E(t)?pt.map(t,e):O(t)?pt.set(t,e):t;if(r!==t)return r;u(!1)}var ct={box:function(t,e){arguments.length>2&&dt("box");var n=rt(e);return new Yt(t,ut(n),n.name,!0,n.equals)},array:function(t,e){arguments.length>2&&dt("array");var n=rt(e);return Pn(t,ut(n),n.name)},map:function(t,e){arguments.length>2&&dt("map");var n=rt(e);return new Bn(t,ut(n),n.name)},set:function(t,e){arguments.length>2&&dt("set");var n=rt(e);return new Hn(t,ut(n),n.name)},object:function(t,e,n){"string"===typeof arguments[1]&&dt("object");var r=rt(n);if(!1===r.proxy)return ze({},t,e,r);var o=He(r),i=ze({},void 0,void 0,r),a=xn(i);return Ue(a,t,e,o),a},ref:at,shallow:it,deep:ot,struct:st},pt=lt;function dt(t){u("Expected one or two arguments to observable."+t+". Did you accidentally try to use observable."+t+" as decorator?")}Object.keys(ct).forEach((function(t){return pt[t]=ct[t]}));var ft,ht,yt=Z(!1,(function(t,e,n,r,o){var i=n.get,a=n.set,s=o[0]||{};Yn(t).addComputedProp(t,e,X({get:i,set:a,context:t},s))})),vt=yt({equals:I.structural}),gt=function(t,e,n){if("string"===typeof e)return yt.apply(null,arguments);if(null!==t&&"object"===typeof t&&1===arguments.length)return yt.apply(null,arguments);var r="object"===typeof e?e:{};return r.get=t,r.set="function"===typeof e?e:r.set,r.name=r.name||t.name||"",new Ft(r)};gt.struct=vt,function(t){t[t["NOT_TRACKING"]=-1]="NOT_TRACKING",t[t["UP_TO_DATE"]=0]="UP_TO_DATE",t[t["POSSIBLY_STALE"]=1]="POSSIBLY_STALE",t[t["STALE"]=2]="STALE"}(ft||(ft={})),function(t){t[t["NONE"]=0]="NONE",t[t["LOG"]=1]="LOG",t[t["BREAK"]=2]="BREAK"}(ht||(ht={}));var mt=function(){function t(t){this.cause=t}return t}();function _t(t){return t instanceof mt}function bt(t){switch(t.dependenciesState){case ft.UP_TO_DATE:return!1;case ft.NOT_TRACKING:case ft.STALE:return!0;case ft.POSSIBLY_STALE:for(var e=Dt(!0),n=Tt(),r=t.observing,o=r.length,i=0;i<o;i++){var a=r[i];if(Wt(a)){if(Qt.disableErrorBoundaries)a.get();else try{a.get()}catch(s){return Pt(n),Nt(e),!0}if(t.dependenciesState===ft.STALE)return Pt(n),Nt(e),!0}}return Ct(t),Pt(n),Nt(e),!1}}function xt(){return null!==Qt.trackingDerivation}function Et(t){var e=t.observers.size>0;Qt.computationDepth>0&&e&&u(!1),Qt.allowStateChanges||!e&&"strict"!==Qt.enforceActions||u(!1)}function Ot(t){0}function wt(t,e,n){var r=Dt(!0);Ct(t),t.newObserving=new Array(t.observing.length+100),t.unboundDepsCount=0,t.runId=++Qt.runId;var o,i=Qt.trackingDerivation;if(Qt.trackingDerivation=t,!0===Qt.disableErrorBoundaries)o=e.call(n);else try{o=e.call(n)}catch(a){o=new mt(a)}return Qt.trackingDerivation=i,St(t),At(t),Nt(r),o}function At(t){}function St(t){for(var e=t.observing,n=t.observing=t.newObserving,r=ft.UP_TO_DATE,o=0,i=t.unboundDepsCount,a=0;a<i;a++){var s=n[a];0===s.diffValue&&(s.diffValue=1,o!==a&&(n[o]=s),o++),s.dependenciesState>r&&(r=s.dependenciesState)}n.length=o,t.newObserving=null,i=e.length;while(i--){s=e[i];0===s.diffValue&&re(s,t),s.diffValue=0}while(o--){s=n[o];1===s.diffValue&&(s.diffValue=0,ne(s,t))}r!==ft.UP_TO_DATE&&(t.dependenciesState=r,t.onBecomeStale())}function Mt(t){var e=t.observing;t.observing=[];var n=e.length;while(n--)re(e[n],t);t.dependenciesState=ft.NOT_TRACKING}function jt(t){var e=Tt();try{return t()}finally{Pt(e)}}function Tt(){var t=Qt.trackingDerivation;return Qt.trackingDerivation=null,t}function Pt(t){Qt.trackingDerivation=t}function Dt(t){var e=Qt.allowStateReads;return Qt.allowStateReads=t,e}function Nt(t){Qt.allowStateReads=t}function Ct(t){if(t.dependenciesState!==ft.UP_TO_DATE){t.dependenciesState=ft.UP_TO_DATE;var e=t.observing,n=e.length;while(n--)e[n].lowestObserverState=ft.UP_TO_DATE}}var Rt=0,Lt=1,It=Object.getOwnPropertyDescriptor((function(){}),"name");It&&It.configurable;function kt(t,e,n){var r=function(){return Bt(t,e,n||this,arguments)};return r.isMobxAction=!0,r}function Bt(t,e,n,r){var o=Xt(t,n,r);try{return e.apply(n,r)}catch(i){throw o.error=i,i}finally{zt(o)}}function Xt(t,e,n){var r=be()&&!!t,o=0,i=Tt();ie();var a=Ut(!0),s=Dt(!0),u={prevDerivation:i,prevAllowStateChanges:a,prevAllowStateReads:s,notifySpy:r,startTime:o,actionId:Lt++,parentActionId:Rt};return Rt=u.actionId,u}function zt(t){Rt!==t.actionId&&u("invalid action stack. did you forget to finish an action?"),Rt=t.parentActionId,void 0!==t.error&&(Qt.suppressReactionErrors=!0),Gt(t.prevAllowStateChanges),Nt(t.prevAllowStateReads),ae(),Pt(t.prevDerivation),t.notifySpy,Qt.suppressReactionErrors=!1}function Ht(t,e){var n,r=Ut(t);try{n=e()}finally{Gt(r)}return n}function Ut(t){var e=Qt.allowStateChanges;return Qt.allowStateChanges=t,e}function Gt(t){Qt.allowStateChanges=t}var Yt=function(t){function e(e,n,r,o,i){void 0===r&&(r="ObservableValue@"+s()),void 0===o&&(o=!0),void 0===i&&(i=I.default);var a=t.call(this,r)||this;return a.enhancer=n,a.name=r,a.equals=i,a.hasUnreportedChange=!1,a.value=n(e,void 0,r),o&&be(),a}return B(e,t),e.prototype.dehanceValue=function(t){return void 0!==this.dehancer?this.dehancer(t):t},e.prototype.set=function(t){this.value;if(t=this.prepareNewValue(t),t!==Qt.UNCHANGED){be();0,this.setNewValue(t)}},e.prototype.prepareNewValue=function(t){if(Et(this),En(this)){var e=wn(this,{object:this,type:"update",newValue:t});if(!e)return Qt.UNCHANGED;t=e.newValue}return t=this.enhancer(t,this.value,this.name),this.equals(this.value,t)?Qt.UNCHANGED:t},e.prototype.setNewValue=function(t){var e=this.value;this.value=t,this.reportChanged(),An(this)&&Mn(this,{type:"update",object:this,newValue:t,oldValue:e})},e.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},e.prototype.intercept=function(t){return On(this,t)},e.prototype.observe=function(t,e){return e&&t({object:this,type:"update",newValue:this.value,oldValue:void 0}),Sn(this,t)},e.prototype.toJSON=function(){return this.get()},e.prototype.toString=function(){return this.name+"["+this.value+"]"},e.prototype.valueOf=function(){return S(this.get())},e.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},e}(T),Vt=x("ObservableValue",Yt),Ft=function(){function t(t){this.dependenciesState=ft.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=new Set,this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=ft.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+s(),this.value=new mt(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=ht.NONE,l(t.get,"missing option for computed: get"),this.derivation=t.get,this.name=t.name||"ComputedValue@"+s(),t.set&&(this.setter=kt(this.name+"-setter",t.set)),this.equals=t.equals||(t.compareStructural||t.struct?I.structural:I.default),this.scope=t.context,this.requiresReaction=!!t.requiresReaction,this.keepAlive=!!t.keepAlive}return t.prototype.onBecomeStale=function(){ce(this)},t.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach((function(t){return t()}))},t.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach((function(t){return t()}))},t.prototype.get=function(){this.isComputing&&u("Cycle detected in computation "+this.name+": "+this.derivation),0!==Qt.inBatch||0!==this.observers.size||this.keepAlive?(se(this),bt(this)&&this.trackAndCompute()&&le(this)):bt(this)&&(this.warnAboutUntrackedRead(),ie(),this.value=this.computeValue(!1),ae());var t=this.value;if(_t(t))throw t.cause;return t},t.prototype.peek=function(){var t=this.computeValue(!1);if(_t(t))throw t.cause;return t},t.prototype.set=function(t){if(this.setter){l(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,t)}finally{this.isRunningSetter=!1}}else l(!1,!1)},t.prototype.trackAndCompute=function(){be();var t=this.value,e=this.dependenciesState===ft.NOT_TRACKING,n=this.computeValue(!0),r=e||_t(t)||_t(n)||!this.equals(t,n);return r&&(this.value=n),r},t.prototype.computeValue=function(t){var e;if(this.isComputing=!0,Qt.computationDepth++,t)e=wt(this,this.derivation,this.scope);else if(!0===Qt.disableErrorBoundaries)e=this.derivation.call(this.scope);else try{e=this.derivation.call(this.scope)}catch(n){e=new mt(n)}return Qt.computationDepth--,this.isComputing=!1,e},t.prototype.suspend=function(){this.keepAlive||(Mt(this),this.value=void 0)},t.prototype.observe=function(t,e){var n=this,r=!0,o=void 0;return De((function(){var i=n.get();if(!r||e){var a=Tt();t({type:"update",object:n,newValue:i,oldValue:o}),Pt(a)}r=!1,o=i}))},t.prototype.warnAboutUntrackedRead=function(){},t.prototype.toJSON=function(){return this.get()},t.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},t.prototype.valueOf=function(){return S(this.get())},t.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},t}(),Wt=x("ComputedValue",Ft),Kt=function(){function t(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1}return t}(),Zt={};function qt(){return"undefined"!==typeof window?window:"undefined"!==typeof r?r:"undefined"!==typeof self?self:Zt}var $t=!0,Jt=!1,Qt=function(){var t=qt();return t.__mobxInstanceCount>0&&!t.__mobxGlobals&&($t=!1),t.__mobxGlobals&&t.__mobxGlobals.version!==(new Kt).version&&($t=!1),$t?t.__mobxGlobals?(t.__mobxInstanceCount+=1,t.__mobxGlobals.UNCHANGED||(t.__mobxGlobals.UNCHANGED={}),t.__mobxGlobals):(t.__mobxInstanceCount=1,t.__mobxGlobals=new Kt):(setTimeout((function(){Jt||u("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")}),1),new Kt)}();function te(){(Qt.pendingReactions.length||Qt.inBatch||Qt.isRunningReactions)&&u("isolateGlobalState should be called before MobX is running any reactions"),Jt=!0,$t&&(0===--qt().__mobxInstanceCount&&(qt().__mobxGlobals=void 0),Qt=new Kt)}function ee(){return Qt}function ne(t,e){t.observers.add(e),t.lowestObserverState>e.dependenciesState&&(t.lowestObserverState=e.dependenciesState)}function re(t,e){t.observers.delete(e),0===t.observers.size&&oe(t)}function oe(t){!1===t.isPendingUnobservation&&(t.isPendingUnobservation=!0,Qt.pendingUnobservations.push(t))}function ie(){Qt.inBatch++}function ae(){if(0===--Qt.inBatch){ve();for(var t=Qt.pendingUnobservations,e=0;e<t.length;e++){var n=t[e];n.isPendingUnobservation=!1,0===n.observers.size&&(n.isBeingObserved&&(n.isBeingObserved=!1,n.onBecomeUnobserved()),n instanceof Ft&&n.suspend())}Qt.pendingUnobservations=[]}}function se(t){Ot(t);var e=Qt.trackingDerivation;return null!==e?(e.runId!==t.lastAccessedBy&&(t.lastAccessedBy=e.runId,e.newObserving[e.unboundDepsCount++]=t,t.isBeingObserved||(t.isBeingObserved=!0,t.onBecomeObserved())),!0):(0===t.observers.size&&Qt.inBatch>0&&oe(t),!1)}function ue(t){t.lowestObserverState!==ft.STALE&&(t.lowestObserverState=ft.STALE,t.observers.forEach((function(e){e.dependenciesState===ft.UP_TO_DATE&&(e.isTracing!==ht.NONE&&pe(e,t),e.onBecomeStale()),e.dependenciesState=ft.STALE})))}function le(t){t.lowestObserverState!==ft.STALE&&(t.lowestObserverState=ft.STALE,t.observers.forEach((function(e){e.dependenciesState===ft.POSSIBLY_STALE?e.dependenciesState=ft.STALE:e.dependenciesState===ft.UP_TO_DATE&&(t.lowestObserverState=ft.UP_TO_DATE)})))}function ce(t){t.lowestObserverState===ft.UP_TO_DATE&&(t.lowestObserverState=ft.POSSIBLY_STALE,t.observers.forEach((function(e){e.dependenciesState===ft.UP_TO_DATE&&(e.dependenciesState=ft.POSSIBLY_STALE,e.isTracing!==ht.NONE&&pe(e,t),e.onBecomeStale())})))}function pe(t,e){if(console.log("[mobx.trace] '"+t.name+"' is invalidated due to a change in: '"+e.name+"'"),t.isTracing===ht.BREAK){var n=[];de(Ge(t),n,1),new Function("debugger;\n/*\nTracing '"+t.name+"'\n\nYou are entering this break point because derivation '"+t.name+"' is being traced and '"+e.name+"' is now forcing it to update.\nJust follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update\nThe stackframe you are looking for is at least ~6-8 stack-frames up.\n\n"+(t instanceof Ft?t.derivation.toString().replace(/[*]\//g,"/"):"")+"\n\nThe dependencies for this derivation are:\n\n"+n.join("\n")+"\n*/\n    ")()}}function de(t,e,n){e.length>=1e3?e.push("(and many more)"):(e.push(""+new Array(n).join("\t")+t.name),t.dependencies&&t.dependencies.forEach((function(t){return de(t,e,n+1)})))}var fe=function(){function t(t,e,n,r){void 0===t&&(t="Reaction@"+s()),void 0===r&&(r=!1),this.name=t,this.onInvalidate=e,this.errorHandler=n,this.requiresObservable=r,this.observing=[],this.newObserving=[],this.dependenciesState=ft.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+s(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=ht.NONE}return t.prototype.onBecomeStale=function(){this.schedule()},t.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,Qt.pendingReactions.push(this),ve())},t.prototype.isScheduled=function(){return this._isScheduled},t.prototype.runReaction=function(){if(!this.isDisposed){if(ie(),this._isScheduled=!1,bt(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending&&be()}catch(t){this.reportExceptionInDerivation(t)}}ae()}},t.prototype.track=function(t){if(!this.isDisposed){ie();be();0,this._isRunning=!0;var e=wt(this,t,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&Mt(this),_t(e)&&this.reportExceptionInDerivation(e.cause),ae()}},t.prototype.reportExceptionInDerivation=function(t){var e=this;if(this.errorHandler)this.errorHandler(t,this);else{if(Qt.disableErrorBoundaries)throw t;var n="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this+"'";Qt.suppressReactionErrors?console.warn("[mobx] (error in reaction '"+this.name+"' suppressed, fix error of causing action below)"):console.error(n,t),be()&&xe({type:"error",name:this.name,message:n,error:""+t}),Qt.globalReactionErrorHandlers.forEach((function(n){return n(t,e)}))}},t.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(ie(),Mt(this),ae()))},t.prototype.getDisposer=function(){var t=this.dispose.bind(this);return t[j]=this,t},t.prototype.toString=function(){return"Reaction["+this.name+"]"},t.prototype.trace=function(t){void 0===t&&(t=!1),dn(this,t)},t}();var he=100,ye=function(t){return t()};function ve(){Qt.inBatch>0||Qt.isRunningReactions||ye(ge)}function ge(){Qt.isRunningReactions=!0;var t=Qt.pendingReactions,e=0;while(t.length>0){++e===he&&(console.error("Reaction doesn't converge to a stable state after "+he+" iterations. Probably there is a cycle in the reactive function: "+t[0]),t.splice(0));for(var n=t.splice(0),r=0,o=n.length;r<o;r++)n[r].runReaction()}Qt.isRunningReactions=!1}var me=x("Reaction",fe);function _e(t){var e=ye;ye=function(n){return t((function(){return e(n)}))}}function be(){return!1}function xe(t){}function Ee(t){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}function Oe(){u(!1)}function we(t){return function(e,n,r){if(r){if(r.value)return{value:kt(t,r.value),enumerable:!1,configurable:!0,writable:!0};var o=r.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return kt(t,o.call(this))}}}return Ae(t).apply(this,arguments)}}function Ae(t){return function(e,n,r){Object.defineProperty(e,n,{configurable:!0,enumerable:!1,get:function(){},set:function(e){g(this,n,Me(t,e))}})}}function Se(t,e,n,r){return!0===r?(Pe(t,e,n.value),null):n?{configurable:!0,enumerable:!1,get:function(){return Pe(this,e,n.value||n.initializer.call(this)),this[e]},set:Oe}:{enumerable:!1,configurable:!0,set:function(t){Pe(this,e,t)},get:function(){}}}var Me=function(t,e,n,r){return 1===arguments.length&&"function"===typeof t?kt(t.name||"<unnamed action>",t):2===arguments.length&&"function"===typeof e?kt(t,e):1===arguments.length&&"string"===typeof t?we(t):!0!==r?we(e).apply(null,arguments):void g(t,e,kt(t.name||e,n.value,this))};function je(t,e){var n="string"===typeof t?t:t.name||"<unnamed action>",r="function"===typeof t?t:e;return Bt(n,r,this,void 0)}function Te(t){return"function"===typeof t&&!0===t.isMobxAction}function Pe(t,e,n){g(t,e,kt(e,n.bind(t)))}function De(t,e){void 0===e&&(e=a);var n,r=e&&e.name||t.name||"Autorun@"+s(),o=!e.scheduler&&!e.delay;if(o)n=new fe(r,(function(){this.track(l)}),e.onError,e.requiresObservable);else{var i=Ce(e),u=!1;n=new fe(r,(function(){u||(u=!0,i((function(){u=!1,n.isDisposed||n.track(l)})))}),e.onError,e.requiresObservable)}function l(){t(n)}return n.schedule(),n.getDisposer()}Me.bound=Se;var Ne=function(t){return t()};function Ce(t){return t.scheduler?t.scheduler:t.delay?function(e){return setTimeout(e,t.delay)}:Ne}function Re(t,e,n){void 0===n&&(n=a);var r,o=n.name||"Reaction@"+s(),i=Me(o,n.onError?Le(n.onError,e):e),u=!n.scheduler&&!n.delay,l=Ce(n),c=!0,p=!1,d=n.compareStructural?I.structural:n.equals||I.default,f=new fe(o,(function(){c||u?h():p||(p=!0,l(h))}),n.onError,n.requiresObservable);function h(){if(p=!1,!f.isDisposed){var e=!1;f.track((function(){var n=t(f);e=c||!d(r,n),r=n})),c&&n.fireImmediately&&i(r,f),c||!0!==e||i(r,f),c&&(c=!1)}}return f.schedule(),f.getDisposer()}function Le(t,e){return function(){try{return e.apply(this,arguments)}catch(n){t.call(this,n)}}}function Ie(t,e,n){return Be("onBecomeObserved",t,e,n)}function ke(t,e,n){return Be("onBecomeUnobserved",t,e,n)}function Be(t,e,n,r){var o="function"===typeof r?Jn(e,n):Jn(e),i="function"===typeof r?r:n,a=t+"Listeners";o[a]?o[a].add(i):o[a]=new Set([i]);var s=o[t];return"function"!==typeof s?u(!1):function(){var t=o[a];t&&(t.delete(i),0===t.size&&delete o[a])}}function Xe(t){var e=t.enforceActions,n=t.computedRequiresReaction,r=t.computedConfigurable,o=t.disableErrorBoundaries,i=t.reactionScheduler,a=t.reactionRequiresObservable,s=t.observableRequiresReaction;if(!0===t.isolateGlobalState&&te(),void 0!==e){"boolean"!==typeof e&&"strict"!==e||c("Deprecated value for 'enforceActions', use 'false' => '\"never\"', 'true' => '\"observed\"', '\"strict\"' => \"'always'\" instead");var l=void 0;switch(e){case!0:case"observed":l=!0;break;case!1:case"never":l=!1;break;case"strict":case"always":l="strict";break;default:u("Invalid value for 'enforceActions': '"+e+"', expected 'never', 'always' or 'observed'")}Qt.enforceActions=l,Qt.allowStateChanges=!0!==l&&"strict"!==l}void 0!==n&&(Qt.computedRequiresReaction=!!n),void 0!==a&&(Qt.reactionRequiresObservable=!!a),void 0!==s&&(Qt.observableRequiresReaction=!!s,Qt.allowStateReads=!Qt.observableRequiresReaction),void 0!==r&&(Qt.computedConfigurable=!!r),void 0!==o&&(!0===o&&console.warn("WARNING: Debug feature only. MobX will NOT recover from errors when `disableErrorBoundaries` is enabled."),Qt.disableErrorBoundaries=!!o),i&&_e(i)}function ze(t,e,n,r){r=rt(r);var o=He(r);return K(t),Yn(t,r.name,o.enhancer),e&&Ue(t,e,n,o),t}function He(t){return t.defaultDecorator||(!1===t.deep?at:ot)}function Ue(t,e,n,r){var o,i;ie();try{var a=M(e);try{for(var s=z(a),u=s.next();!u.done;u=s.next()){var l=u.value,c=Object.getOwnPropertyDescriptor(e,l);0;var p=n&&l in n?n[l]:c.get?yt:r;0;var d=p(t,l,c,!0);d&&Object.defineProperty(t,l,d)}}catch(f){o={error:f}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(o)throw o.error}}}finally{ae()}}function Ge(t,e){return Ye(Jn(t,e))}function Ye(t){var e={name:t.name};return t.observing&&t.observing.length>0&&(e.dependencies=f(t.observing).map(Ye)),e}var Ve=0;function Fe(){this.message="FLOW_CANCELLED"}function We(t){1!==arguments.length&&u("Flow expects 1 argument and cannot be used as decorator");var e=t.name||"<unnamed flow>";return function(){var n,r=this,o=arguments,i=++Ve,a=Me(e+" - runid: "+i+" - init",t).apply(r,o),s=void 0,u=new Promise((function(t,r){var o=0;function u(t){var n;s=void 0;try{n=Me(e+" - runid: "+i+" - yield "+o++,a.next).call(a,t)}catch(u){return r(u)}c(n)}function l(t){var n;s=void 0;try{n=Me(e+" - runid: "+i+" - yield "+o++,a.throw).call(a,t)}catch(u){return r(u)}c(n)}function c(e){if(!e||"function"!==typeof e.then)return e.done?t(e.value):(s=Promise.resolve(e.value),s.then(u,l));e.then(c,r)}n=r,u(void 0)}));return u.cancel=Me(e+" - runid: "+i+" - cancel",(function(){try{s&&Ke(s);var t=a.return(void 0),e=Promise.resolve(t.value);e.then(d,d),Ke(e),n(new Fe)}catch(r){n(r)}})),u}}function Ke(t){"function"===typeof t.cancel&&t.cancel()}function Ze(t,e){if(null===t||void 0===t)return!1;if(void 0!==e){if(!1===$n(t))return!1;if(!t[j].values.has(e))return!1;var n=Jn(t,e);return Wt(n)}return Wt(t)}function qe(t){return arguments.length>1?u(!1):Ze(t)}function $e(t,e){return"string"!==typeof e?u(!1):Ze(t,e)}function Je(t,e){return null!==t&&void 0!==t&&(void 0!==e?!!$n(t)&&t[j].values.has(e):$n(t)||!!t[j]||P(t)||me(t)||Wt(t))}function Qe(t){return 1!==arguments.length&&u(!1),Je(t)}function tn(t){return $n(t)?t[j].getKeys():Xn(t)||Un(t)?Array.from(t.keys()):Ln(t)?t.map((function(t,e){return e})):u(!1)}function en(t){return $n(t)?tn(t).map((function(e){return t[e]})):Xn(t)?tn(t).map((function(e){return t.get(e)})):Un(t)?Array.from(t.values()):Ln(t)?t.slice():u(!1)}function nn(t){return $n(t)?tn(t).map((function(e){return[e,t[e]]})):Xn(t)?tn(t).map((function(e){return[e,t.get(e)]})):Un(t)?Array.from(t.entries()):Ln(t)?t.map((function(t,e){return[e,t]})):u(!1)}function rn(t,e,n){if(2!==arguments.length||Un(t))if($n(t)){var r=t[j],o=r.values.get(e);o?r.write(e,n):r.addObservableProp(e,n,r.defaultEnhancer)}else if(Xn(t))t.set(e,n);else if(Un(t))t.add(e);else{if(!Ln(t))return u(!1);"number"!==typeof e&&(e=parseInt(e,10)),l(e>=0,"Not a valid index: '"+e+"'"),ie(),e>=t.length&&(t.length=e+1),t[e]=n,ae()}else{ie();var i=e;try{for(var a in i)rn(t,a,i[a])}finally{ae()}}}function on(t,e,n,r){return"function"===typeof n?sn(t,e,n,r):an(t,e,n)}function an(t,e,n){return Qn(t).observe(e,n)}function sn(t,e,n,r){return Qn(t,e).observe(n,r)}Fe.prototype=Object.create(Error.prototype);var un={detectCycles:!0,exportMapsAsObjects:!0,recurseEverything:!1};function ln(t,e,n,r){return r.detectCycles&&t.set(e,n),n}function cn(t,e,n){if(!e.recurseEverything&&!Qe(t))return t;if("object"!==typeof t)return t;if(null===t)return null;if(t instanceof Date)return t;if(Vt(t))return cn(t.get(),e,n);Qe(t)&&tn(t);var r=!0===e.detectCycles;if(r&&null!==t&&n.has(t))return n.get(t);if(Ln(t)||Array.isArray(t)){var o=ln(n,t,[],e),i=t.map((function(t){return cn(t,e,n)}));o.length=i.length;for(var a=0,s=i.length;a<s;a++)o[a]=i[a];return o}if(Un(t)||Object.getPrototypeOf(t)===Set.prototype){if(!1===e.exportMapsAsObjects){var u=ln(n,t,new Set,e);return t.forEach((function(t){u.add(cn(t,e,n))})),u}var l=ln(n,t,[],e);return t.forEach((function(t){l.push(cn(t,e,n))})),l}if(Xn(t)||Object.getPrototypeOf(t)===Map.prototype){if(!1===e.exportMapsAsObjects){var c=ln(n,t,new Map,e);return t.forEach((function(t,r){c.set(r,cn(t,e,n))})),c}var p=ln(n,t,{},e);return t.forEach((function(t,r){p[r]=cn(t,e,n)})),p}var d=ln(n,t,{},e);return w(t).forEach((function(r){d[r]=cn(t[r],e,n)})),d}function pn(t,e){var n;return"boolean"===typeof e&&(e={detectCycles:e}),e||(e=un),e.detectCycles=void 0===e.detectCycles?!0===e.recurseEverything:!0===e.detectCycles,e.detectCycles&&(n=new Map),cn(t,e,n)}function dn(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=!1;"boolean"===typeof t[t.length-1]&&(n=t.pop());var r=fn(t);if(!r)return u(!1);r.isTracing===ht.NONE&&console.log("[mobx.trace] '"+r.name+"' tracing enabled"),r.isTracing=n?ht.BREAK:ht.LOG}function fn(t){switch(t.length){case 0:return Qt.trackingDerivation;case 1:return Jn(t[0]);case 2:return Jn(t[0],t[1])}}function hn(t,e){void 0===e&&(e=void 0),ie();try{return t.apply(e)}finally{ae()}}function yn(t,e,n){return 1===arguments.length||e&&"object"===typeof e?gn(t,e):vn(t,e,n||{})}function vn(t,e,n){var r;"number"===typeof n.timeout&&(r=setTimeout((function(){if(!i[j].isDisposed){i();var t=new Error("WHEN_TIMEOUT");if(!n.onError)throw t;n.onError(t)}}),n.timeout)),n.name=n.name||"When@"+s();var o=kt(n.name+"-effect",e),i=De((function(e){t()&&(e.dispose(),r&&clearTimeout(r),o())}),n);return i}function gn(t,e){var n;var r=new Promise((function(r,o){var i=vn(t,r,X(X({},e),{onError:o}));n=function(){i(),o("WHEN_CANCELLED")}}));return r.cancel=n,r}function mn(t){return t[j]}function _n(t){return"string"===typeof t||"number"===typeof t||"symbol"===typeof t}var bn={has:function(t,e){if(e===j||"constructor"===e||e===G)return!0;var n=mn(t);return _n(e)?n.has(e):e in t},get:function(t,e){if(e===j||"constructor"===e||e===G)return t[e];var n=mn(t),r=n.values.get(e);if(r instanceof T){var o=r.get();return void 0===o&&n.has(e),o}return _n(e)&&n.has(e),t[e]},set:function(t,e,n){return!!_n(e)&&(rn(t,e,n),!0)},deleteProperty:function(t,e){if(!_n(e))return!1;var n=mn(t);return n.remove(e),!0},ownKeys:function(t){var e=mn(t);return e.keysAtom.reportObserved(),Reflect.ownKeys(t)},preventExtensions:function(t){return u("Dynamic observable objects cannot be frozen"),!1}};function xn(t){var e=new Proxy(t,bn);return t[j].proxy=e,e}function En(t){return void 0!==t.interceptors&&t.interceptors.length>0}function On(t,e){var n=t.interceptors||(t.interceptors=[]);return n.push(e),p((function(){var t=n.indexOf(e);-1!==t&&n.splice(t,1)}))}function wn(t,e){var n=Tt();try{for(var r=U(t.interceptors||[]),o=0,i=r.length;o<i;o++)if(e=r[o](e),l(!e||e.type,"Intercept handlers should return nothing or a change object"),!e)break;return e}finally{Pt(n)}}function An(t){return void 0!==t.changeListeners&&t.changeListeners.length>0}function Sn(t,e){var n=t.changeListeners||(t.changeListeners=[]);return n.push(e),p((function(){var t=n.indexOf(e);-1!==t&&n.splice(t,1)}))}function Mn(t,e){var n=Tt(),r=t.changeListeners;if(r){r=r.slice();for(var o=0,i=r.length;o<i;o++)r[o](e);Pt(n)}}var jn=1e4,Tn={get:function(t,e){return e===j?t[j]:"length"===e?t[j].getArrayLength():"number"===typeof e?Nn.get.call(t,e):"string"!==typeof e||isNaN(e)?Nn.hasOwnProperty(e)?Nn[e]:t[e]:Nn.get.call(t,parseInt(e))},set:function(t,e,n){return"length"===e&&t[j].setArrayLength(n),"number"===typeof e&&Nn.set.call(t,e,n),"symbol"===typeof e||isNaN(e)?t[e]=n:Nn.set.call(t,parseInt(e),n),!0},preventExtensions:function(t){return u("Observable arrays cannot be frozen"),!1}};function Pn(t,e,n,r){void 0===n&&(n="ObservableArray@"+s()),void 0===r&&(r=!1);var o=new Dn(n,e,r);m(o.values,j,o);var i=new Proxy(o.values,Tn);if(o.proxy=i,t&&t.length){var a=Ut(!0);o.spliceWithArray(0,0,t),Gt(a)}return i}var Dn=function(){function t(t,e,n){this.owned=n,this.values=[],this.proxy=void 0,this.lastKnownLength=0,this.atom=new T(t||"ObservableArray@"+s()),this.enhancer=function(n,r){return e(n,r,t+"[..]")}}return t.prototype.dehanceValue=function(t){return void 0!==this.dehancer?this.dehancer(t):t},t.prototype.dehanceValues=function(t){return void 0!==this.dehancer&&t.length>0?t.map(this.dehancer):t},t.prototype.intercept=function(t){return On(this,t)},t.prototype.observe=function(t,e){return void 0===e&&(e=!1),e&&t({object:this.proxy,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),Sn(this,t)},t.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},t.prototype.setArrayLength=function(t){if("number"!==typeof t||t<0)throw new Error("[mobx.array] Out of range: "+t);var e=this.values.length;if(t!==e)if(t>e){for(var n=new Array(t-e),r=0;r<t-e;r++)n[r]=void 0;this.spliceWithArray(e,0,n)}else this.spliceWithArray(t,e-t)},t.prototype.updateArrayLength=function(t,e){if(t!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed.");this.lastKnownLength+=e},t.prototype.spliceWithArray=function(t,e,n){var r=this;Et(this.atom);var o=this.values.length;if(void 0===t?t=0:t>o?t=o:t<0&&(t=Math.max(0,o+t)),e=1===arguments.length?o-t:void 0===e||null===e?0:Math.max(0,Math.min(e,o-t)),void 0===n&&(n=i),En(this)){var a=wn(this,{object:this.proxy,type:"splice",index:t,removedCount:e,added:n});if(!a)return i;e=a.removedCount,n=a.added}n=0===n.length?n:n.map((function(t){return r.enhancer(t,void 0)}));var s=this.spliceItemsIntoValues(t,e,n);return 0===e&&0===n.length||this.notifyArraySplice(t,n,s),this.dehanceValues(s)},t.prototype.spliceItemsIntoValues=function(t,e,n){var r;if(n.length<jn)return(r=this.values).splice.apply(r,U([t,e],n));var o=this.values.slice(t,t+e);return this.values=this.values.slice(0,t).concat(n,this.values.slice(t+e)),o},t.prototype.notifyArrayChildUpdate=function(t,e,n){var r=!this.owned&&be(),o=An(this),i=o||r?{object:this.proxy,type:"update",index:t,newValue:e,oldValue:n}:null;this.atom.reportChanged(),o&&Mn(this,i)},t.prototype.notifyArraySplice=function(t,e,n){var r=!this.owned&&be(),o=An(this),i=o||r?{object:this.proxy,type:"splice",index:t,removed:n,added:e,removedCount:n.length,addedCount:e.length}:null;this.atom.reportChanged(),o&&Mn(this,i)},t}(),Nn={intercept:function(t){return this[j].intercept(t)},observe:function(t,e){void 0===e&&(e=!1);var n=this[j];return n.observe(t,e)},clear:function(){return this.splice(0)},replace:function(t){var e=this[j];return e.spliceWithArray(0,e.values.length,t)},toJS:function(){return this.slice()},toJSON:function(){return this.toJS()},splice:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=this[j];switch(arguments.length){case 0:return[];case 1:return o.spliceWithArray(t);case 2:return o.spliceWithArray(t,e)}return o.spliceWithArray(t,e,n)},spliceWithArray:function(t,e,n){var r=this[j];return r.spliceWithArray(t,e,n)},push:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this[j];return n.spliceWithArray(n.values.length,0,t),n.values.length},pop:function(){return this.splice(Math.max(this[j].values.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this[j];return n.spliceWithArray(0,0,t),n.values.length},reverse:function(){var t=this.slice();return t.reverse.apply(t,arguments)},sort:function(t){var e=this.slice();return e.sort.apply(e,arguments)},remove:function(t){var e=this[j],n=e.dehanceValues(e.values).indexOf(t);return n>-1&&(this.splice(n,1),!0)},get:function(t){var e=this[j];if(e){if(t<e.values.length)return e.atom.reportObserved(),e.dehanceValue(e.values[t]);console.warn("[mobx.array] Attempt to read an array index ("+t+") that is out of bounds ("+e.values.length+"). Please check length first. Out of bound indices will not be tracked by MobX")}},set:function(t,e){var n=this[j],r=n.values;if(t<r.length){Et(n.atom);var o=r[t];if(En(n)){var i=wn(n,{type:"update",object:n.proxy,index:t,newValue:e});if(!i)return;e=i.newValue}e=n.enhancer(e,o);var a=e!==o;a&&(r[t]=e,n.notifyArrayChildUpdate(t,e,o))}else{if(t!==r.length)throw new Error("[mobx.array] Index out of bounds, "+t+" is larger than "+r.length);n.spliceWithArray(t,0,[e])}}};["concat","flat","includes","indexOf","join","lastIndexOf","slice","toString","toLocaleString"].forEach((function(t){"function"===typeof Array.prototype[t]&&(Nn[t]=function(){var e=this[j];e.atom.reportObserved();var n=e.dehanceValues(e.values);return n[t].apply(n,arguments)})})),["every","filter","find","findIndex","flatMap","forEach","map","some"].forEach((function(t){"function"===typeof Array.prototype[t]&&(Nn[t]=function(e,n){var r=this,o=this[j];o.atom.reportObserved();var i=o.dehanceValues(o.values);return i[t]((function(t,o){return e.call(n,t,o,r)}),n)})})),["reduce","reduceRight"].forEach((function(t){Nn[t]=function(){var e=this,n=this[j];n.atom.reportObserved();var r=arguments[0];return arguments[0]=function(t,o,i){return o=n.dehanceValue(o),r(t,o,i,e)},n.values[t].apply(n.values,arguments)}}));var Cn,Rn=x("ObservableArrayAdministration",Dn);function Ln(t){return h(t)&&Rn(t[j])}var In,kn={},Bn=function(){function t(t,e,n){if(void 0===e&&(e=$),void 0===n&&(n="ObservableMap@"+s()),this.enhancer=e,this.name=n,this[Cn]=kn,this._keysAtom=D(this.name+".keys()"),this[Symbol.toStringTag]="Map","function"!==typeof Map)throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(t)}return t.prototype._has=function(t){return this._data.has(t)},t.prototype.has=function(t){var e=this;if(!Qt.trackingDerivation)return this._has(t);var n=this._hasMap.get(t);if(!n){var r=n=new Yt(this._has(t),Q,this.name+"."+A(t)+"?",!1);this._hasMap.set(t,r),ke(r,(function(){return e._hasMap.delete(t)}))}return n.get()},t.prototype.set=function(t,e){var n=this._has(t);if(En(this)){var r=wn(this,{type:n?"update":"add",object:this,newValue:e,name:t});if(!r)return this;e=r.newValue}return n?this._updateValue(t,e):this._addValue(t,e),this},t.prototype.delete=function(t){var e=this;if(Et(this._keysAtom),En(this)){var n=wn(this,{type:"delete",object:this,name:t});if(!n)return!1}if(this._has(t)){var r=be(),o=An(this);n=o||r?{type:"delete",object:this,oldValue:this._data.get(t).value,name:t}:null;return hn((function(){e._keysAtom.reportChanged(),e._updateHasMapEntry(t,!1);var n=e._data.get(t);n.setNewValue(void 0),e._data.delete(t)})),o&&Mn(this,n),!0}return!1},t.prototype._updateHasMapEntry=function(t,e){var n=this._hasMap.get(t);n&&n.setNewValue(e)},t.prototype._updateValue=function(t,e){var n=this._data.get(t);if(e=n.prepareNewValue(e),e!==Qt.UNCHANGED){var r=be(),o=An(this),i=o||r?{type:"update",object:this,oldValue:n.value,name:t,newValue:e}:null;0,n.setNewValue(e),o&&Mn(this,i)}},t.prototype._addValue=function(t,e){var n=this;Et(this._keysAtom),hn((function(){var r=new Yt(e,n.enhancer,n.name+"."+A(t),!1);n._data.set(t,r),e=r.value,n._updateHasMapEntry(t,!0),n._keysAtom.reportChanged()}));var r=be(),o=An(this),i=o||r?{type:"add",object:this,name:t,newValue:e}:null;o&&Mn(this,i)},t.prototype.get=function(t){return this.has(t)?this.dehanceValue(this._data.get(t).get()):this.dehanceValue(void 0)},t.prototype.dehanceValue=function(t){return void 0!==this.dehancer?this.dehancer(t):t},t.prototype.keys=function(){return this._keysAtom.reportObserved(),this._data.keys()},t.prototype.values=function(){var t=this,e=this.keys();return ar({next:function(){var n=e.next(),r=n.done,o=n.value;return{done:r,value:r?void 0:t.get(o)}}})},t.prototype.entries=function(){var t=this,e=this.keys();return ar({next:function(){var n=e.next(),r=n.done,o=n.value;return{done:r,value:r?void 0:[o,t.get(o)]}}})},t.prototype[(Cn=j,Symbol.iterator)]=function(){return this.entries()},t.prototype.forEach=function(t,e){var n,r;try{for(var o=z(this),i=o.next();!i.done;i=o.next()){var a=H(i.value,2),s=a[0],u=a[1];t.call(e,u,s,this)}}catch(l){n={error:l}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},t.prototype.merge=function(t){var e=this;return Xn(t)&&(t=t.toJS()),hn((function(){var n=Ut(!0);try{y(t)?w(t).forEach((function(n){return e.set(n,t[n])})):Array.isArray(t)?t.forEach((function(t){var n=H(t,2),r=n[0],o=n[1];return e.set(r,o)})):E(t)?(t.constructor!==Map&&u("Cannot initialize from classes that inherit from Map: "+t.constructor.name),t.forEach((function(t,n){return e.set(n,t)}))):null!==t&&void 0!==t&&u("Cannot initialize map from "+t)}finally{Gt(n)}})),this},t.prototype.clear=function(){var t=this;hn((function(){jt((function(){var e,n;try{for(var r=z(t.keys()),o=r.next();!o.done;o=r.next()){var i=o.value;t.delete(i)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}))}))},t.prototype.replace=function(t){var e=this;return hn((function(){var n,r,o,i,a=v(t),s=new Map,u=!1;try{for(var l=z(e._data.keys()),c=l.next();!c.done;c=l.next()){var p=c.value;if(!a.has(p)){var d=e.delete(p);if(d)u=!0;else{var f=e._data.get(p);s.set(p,f)}}}}catch(w){n={error:w}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}try{for(var h=z(a.entries()),y=h.next();!y.done;y=h.next()){var g=H(y.value,2),m=(p=g[0],f=g[1],e._data.has(p));if(e.set(p,f),e._data.has(p)){var _=e._data.get(p);s.set(p,_),m||(u=!0)}}}catch(A){o={error:A}}finally{try{y&&!y.done&&(i=h.return)&&i.call(h)}finally{if(o)throw o.error}}if(!u)if(e._data.size!==s.size)e._keysAtom.reportChanged();else{var b=e._data.keys(),x=s.keys(),E=b.next(),O=x.next();while(!E.done){if(E.value!==O.value){e._keysAtom.reportChanged();break}E=b.next(),O=x.next()}}e._data=s})),this},Object.defineProperty(t.prototype,"size",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),t.prototype.toPOJO=function(){var t,e,n={};try{for(var r=z(this),o=r.next();!o.done;o=r.next()){var i=H(o.value,2),a=i[0],s=i[1];n["symbol"===typeof a?a:A(a)]=s}}catch(u){t={error:u}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},t.prototype.toJS=function(){return new Map(this)},t.prototype.toJSON=function(){return this.toPOJO()},t.prototype.toString=function(){var t=this;return this.name+"[{ "+Array.from(this.keys()).map((function(e){return A(e)+": "+t.get(e)})).join(", ")+" }]"},t.prototype.observe=function(t,e){return Sn(this,t)},t.prototype.intercept=function(t){return On(this,t)},t}(),Xn=x("ObservableMap",Bn),zn={},Hn=function(){function t(t,e,n){if(void 0===e&&(e=$),void 0===n&&(n="ObservableSet@"+s()),this.name=n,this[In]=zn,this._data=new Set,this._atom=D(this.name),this[Symbol.toStringTag]="Set","function"!==typeof Set)throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(t,r){return e(t,r,n)},t&&this.replace(t)}return t.prototype.dehanceValue=function(t){return void 0!==this.dehancer?this.dehancer(t):t},t.prototype.clear=function(){var t=this;hn((function(){jt((function(){var e,n;try{for(var r=z(t._data.values()),o=r.next();!o.done;o=r.next()){var i=o.value;t.delete(i)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}))}))},t.prototype.forEach=function(t,e){var n,r;try{for(var o=z(this),i=o.next();!i.done;i=o.next()){var a=i.value;t.call(e,a,a,this)}}catch(s){n={error:s}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},Object.defineProperty(t.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),t.prototype.add=function(t){var e=this;if(Et(this._atom),En(this)){var n=wn(this,{type:"add",object:this,newValue:t});if(!n)return this}if(!this.has(t)){hn((function(){e._data.add(e.enhancer(t,void 0)),e._atom.reportChanged()}));var r=be(),o=An(this);n=o||r?{type:"add",object:this,newValue:t}:null;0,o&&Mn(this,n)}return this},t.prototype.delete=function(t){var e=this;if(En(this)){var n=wn(this,{type:"delete",object:this,oldValue:t});if(!n)return!1}if(this.has(t)){var r=be(),o=An(this);n=o||r?{type:"delete",object:this,oldValue:t}:null;return hn((function(){e._atom.reportChanged(),e._data.delete(t)})),o&&Mn(this,n),!0}return!1},t.prototype.has=function(t){return this._atom.reportObserved(),this._data.has(this.dehanceValue(t))},t.prototype.entries=function(){var t=0,e=Array.from(this.keys()),n=Array.from(this.values());return ar({next:function(){var r=t;return t+=1,r<n.length?{value:[e[r],n[r]],done:!1}:{done:!0}}})},t.prototype.keys=function(){return this.values()},t.prototype.values=function(){this._atom.reportObserved();var t=this,e=0,n=Array.from(this._data.values());return ar({next:function(){return e<n.length?{value:t.dehanceValue(n[e++]),done:!1}:{done:!0}}})},t.prototype.replace=function(t){var e=this;return Un(t)&&(t=t.toJS()),hn((function(){var n=Ut(!0);try{Array.isArray(t)||O(t)?(e.clear(),t.forEach((function(t){return e.add(t)}))):null!==t&&void 0!==t&&u("Cannot initialize set from "+t)}finally{Gt(n)}})),this},t.prototype.observe=function(t,e){return Sn(this,t)},t.prototype.intercept=function(t){return On(this,t)},t.prototype.toJS=function(){return new Set(this)},t.prototype.toString=function(){return this.name+"[ "+Array.from(this).join(", ")+" ]"},t.prototype[(In=j,Symbol.iterator)]=function(){return this.values()},t}(),Un=x("ObservableSet",Hn),Gn=function(){function t(t,e,n,r){void 0===e&&(e=new Map),this.target=t,this.values=e,this.name=n,this.defaultEnhancer=r,this.keysAtom=new T(n+".keys")}return t.prototype.read=function(t){return this.values.get(t).get()},t.prototype.write=function(t,e){var n=this.target,r=this.values.get(t);if(r instanceof Ft)r.set(e);else{if(En(this)){var o=wn(this,{type:"update",object:this.proxy||n,name:t,newValue:e});if(!o)return;e=o.newValue}if(e=r.prepareNewValue(e),e!==Qt.UNCHANGED){var i=An(this),a=be();o=i||a?{type:"update",object:this.proxy||n,oldValue:r.value,name:t,newValue:e}:null;0,r.setNewValue(e),i&&Mn(this,o)}}},t.prototype.has=function(t){var e=this.pendingKeys||(this.pendingKeys=new Map),n=e.get(t);if(n)return n.get();var r=!!this.values.get(t);return n=new Yt(r,Q,this.name+"."+A(t)+"?",!1),e.set(t,n),n.get()},t.prototype.addObservableProp=function(t,e,n){void 0===n&&(n=this.defaultEnhancer);var r=this.target;if(b(r,t),En(this)){var o=wn(this,{object:this.proxy||r,name:t,type:"add",newValue:e});if(!o)return;e=o.newValue}var i=new Yt(e,n,this.name+"."+A(t),!1);this.values.set(t,i),e=i.value,Object.defineProperty(r,t,Wn(t)),this.notifyPropertyAddition(t,e)},t.prototype.addComputedProp=function(t,e,n){var r=this.target;n.name=n.name||this.name+"."+A(e),this.values.set(e,new Ft(n)),(t===r||_(t,e))&&Object.defineProperty(t,e,Zn(e))},t.prototype.remove=function(t){if(this.values.has(t)){var e=this.target;if(En(this)){var n=wn(this,{object:this.proxy||e,name:t,type:"remove"});if(!n)return}try{ie();var r=An(this),o=be(),i=this.values.get(t),a=i&&i.get();if(i&&i.set(void 0),this.keysAtom.reportChanged(),this.values.delete(t),this.pendingKeys){var s=this.pendingKeys.get(t);s&&s.set(!1)}delete this.target[t];n=r||o?{type:"remove",object:this.proxy||e,oldValue:a,name:t}:null;0,r&&Mn(this,n)}finally{ae()}}},t.prototype.illegalAccess=function(t,e){console.warn("Property '"+e+"' of '"+t+"' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner")},t.prototype.observe=function(t,e){return Sn(this,t)},t.prototype.intercept=function(t){return On(this,t)},t.prototype.notifyPropertyAddition=function(t,e){var n=An(this),r=be(),o=n||r?{type:"add",object:this.proxy||this.target,name:t,newValue:e}:null;if(n&&Mn(this,o),this.pendingKeys){var i=this.pendingKeys.get(t);i&&i.set(!0)}this.keysAtom.reportChanged()},t.prototype.getKeys=function(){var t,e;this.keysAtom.reportObserved();var n=[];try{for(var r=z(this.values),o=r.next();!o.done;o=r.next()){var i=H(o.value,2),a=i[0],s=i[1];s instanceof Yt&&n.push(a)}}catch(u){t={error:u}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},t}();function Yn(t,e,n){if(void 0===e&&(e=""),void 0===n&&(n=$),Object.prototype.hasOwnProperty.call(t,j))return t[j];y(t)||(e=(t.constructor.name||"ObservableObject")+"@"+s()),e||(e="ObservableObject@"+s());var r=new Gn(t,new Map,A(e),n);return g(t,j,r),r}var Vn=Object.create(null),Fn=Object.create(null);function Wn(t){return Vn[t]||(Vn[t]={configurable:!0,enumerable:!0,get:function(){return this[j].read(t)},set:function(e){this[j].write(t,e)}})}function Kn(t){var e=t[j];return e||(K(t),t[j])}function Zn(t){return Fn[t]||(Fn[t]={configurable:Qt.computedConfigurable,enumerable:!1,get:function(){return Kn(this).read(t)},set:function(e){Kn(this).write(t,e)}})}var qn=x("ObservableObjectAdministration",Gn);function $n(t){return!!h(t)&&(K(t),qn(t[j]))}function Jn(t,e){if("object"===typeof t&&null!==t){if(Ln(t))return void 0!==e&&u(!1),t[j].atom;if(Un(t))return t[j];if(Xn(t)){var n=t;if(void 0===e)return n._keysAtom;var r=n._data.get(e)||n._hasMap.get(e);return r||u(!1),r}if(K(t),e&&!t[j]&&t[e],$n(t)){if(!e)return u(!1);r=t[j].values.get(e);return r||u(!1),r}if(P(t)||Wt(t)||me(t))return t}else if("function"===typeof t&&me(t[j]))return t[j];return u(!1)}function Qn(t,e){return t||u("Expecting some object"),void 0!==e?Qn(Jn(t,e)):P(t)||Wt(t)||me(t)||Xn(t)||Un(t)?t:(K(t),t[j]?t[j]:void u(!1))}function tr(t,e){var n;return n=void 0!==e?Jn(t,e):$n(t)||Xn(t)||Un(t)?Qn(t):Jn(t),n.name}var er=Object.prototype.toString;function nr(t,e,n){return void 0===n&&(n=-1),rr(t,e,n)}function rr(t,e,n,r,o){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return!1;if(t!==t)return e!==e;var i=typeof t;if("function"!==i&&"object"!==i&&"object"!=typeof e)return!1;var a=er.call(t);if(a!==er.call(e))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+t===""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e;case"[object Symbol]":return"undefined"!==typeof Symbol&&Symbol.valueOf.call(t)===Symbol.valueOf.call(e);case"[object Map]":case"[object Set]":n>=0&&n++;break}t=or(t),e=or(e);var s="[object Array]"===a;if(!s){if("object"!=typeof t||"object"!=typeof e)return!1;var u=t.constructor,l=e.constructor;if(u!==l&&!("function"===typeof u&&u instanceof u&&"function"===typeof l&&l instanceof l)&&"constructor"in t&&"constructor"in e)return!1}if(0===n)return!1;n<0&&(n=-1),r=r||[],o=o||[];var c=r.length;while(c--)if(r[c]===t)return o[c]===e;if(r.push(t),o.push(e),s){if(c=t.length,c!==e.length)return!1;while(c--)if(!rr(t[c],e[c],n-1,r,o))return!1}else{var p=Object.keys(t),d=void 0;if(c=p.length,Object.keys(e).length!==c)return!1;while(c--)if(d=p[c],!ir(e,d)||!rr(t[d],e[d],n-1,r,o))return!1}return r.pop(),o.pop(),!0}function or(t){return Ln(t)?t.slice():E(t)||Xn(t)||O(t)||Un(t)?Array.from(t.entries()):t}function ir(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ar(t){return t[Symbol.iterator]=sr,t}function sr(){return this}if("undefined"===typeof Proxy||"undefined"===typeof Symbol)throw new Error("[mobx] MobX 5+ requires Proxy and Symbol objects. If your environment doesn't support Symbol or Proxy objects, please downgrade to MobX 4. For React Native Android, consider upgrading JSCore.");(function(){function t(){}t.name})(),"object"===typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:Ee,extras:{getDebugName:tr},$mobx:j})}).call(this,n("4362"),n("c8ba"))},dd40:function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},dff1:function(t,e,n){"use strict";(function(t){var r=n("26ee"),o="object"==typeof exports&&exports&&!exports.nodeType&&exports,i=o&&"object"==typeof t&&t&&!t.nodeType&&t,a=i&&i.exports===o,s=a?r["a"].Buffer:void 0,u=s?s.allocUnsafe:void 0;function l(t,e){if(e)return t.slice();var n=t.length,r=u?u(n):new t.constructor(n);return t.copy(r),r}e["a"]=l}).call(this,n("dd40")(t))},fa53:function(t,e,n){"use strict";n.d(e,"f",(function(){return Tb})),n.d(e,"e",(function(){return u["e"]})),n.d(e,"b",(function(){return Gm})),n.d(e,"c",(function(){return Xv})),n.d(e,"a",(function(){return kp}));var r,o,i,a,s=n("1940"),u=n("da65"),l=0,c=[],p=u["i"],d=p.__b,f=p.__r,h=p.diffed,y=p.__c,v=p.unmount,g=p.__;function m(t,e){p.__h&&p.__h(o,t,l||e),l=0;var n=o.__H||(o.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function _(t){return l=1,b(I,t)}function b(t,e,n){var i=m(r++,2);if(i.t=t,!i.__c&&(i.__=[n?n(e):I(void 0,e),function(t){var e=i.__N?i.__N[0]:i.__[0],n=i.t(e,t);e!==n&&(i.__N=[n,i.__[1]],i.__c.setState({}))}],i.__c=o,!o.u)){var a=function(t,e,n){if(!i.__c.__H)return!0;var r=i.__c.__H.__.filter((function(t){return!!t.__c}));if(r.every((function(t){return!t.__N})))return!s||s.call(this,t,e,n);var o=i.__c.props!==t;return r.forEach((function(t){if(t.__N){var e=t.__[0];t.__=t.__N,t.__N=void 0,e!==t.__[0]&&(o=!0)}})),s&&s.call(this,t,e,n)||o};o.u=!0;var s=o.shouldComponentUpdate,u=o.componentWillUpdate;o.componentWillUpdate=function(t,e,n){if(this.__e){var r=s;s=void 0,a(t,e,n),s=r}u&&u.call(this,t,e,n)},o.shouldComponentUpdate=a}return i.__N||i.__}function x(t,e){var n=m(r++,3);!p.__s&&L(n.__H,e)&&(n.__=t,n.i=e,o.__H.__h.push(n))}function E(t,e){var n=m(r++,4);!p.__s&&L(n.__H,e)&&(n.__=t,n.i=e,o.__h.push(n))}function O(t){return l=5,A((function(){return{current:t}}),[])}function w(t,e,n){l=6,E((function(){return"function"==typeof t?(t(e()),function(){return t(null)}):t?(t.current=e(),function(){return t.current=null}):void 0}),null==n?n:n.concat(t))}function A(t,e){var n=m(r++,7);return L(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function S(t,e){return l=8,A((function(){return t}),e)}function M(t){var e=o.context[t.__c],n=m(r++,9);return n.c=t,e?(null==n.__&&(n.__=!0,e.sub(o)),e.props.value):t.__}function j(t,e){p.useDebugValue&&p.useDebugValue(e?e(t):t)}function T(){var t=m(r++,11);if(!t.__){for(var e=o.__v;null!==e&&!e.__m&&null!==e.__;)e=e.__;var n=e.__m||(e.__m=[0,0]);t.__="P"+n[0]+"-"+n[1]++}return t.__}function P(){for(var t;t=c.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(C),t.__H.__h.forEach(R),t.__H.__h=[]}catch(e){t.__H.__h=[],p.__e(e,t.__v)}}p.__b=function(t){o=null,d&&d(t)},p.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),g&&g(t,e)},p.__r=function(t){f&&f(t),r=0;var e=(o=t.__c).__H;e&&(i===o?(e.__h=[],o.__h=[],e.__.forEach((function(t){t.__N&&(t.__=t.__N),t.i=t.__N=void 0}))):(e.__h.forEach(C),e.__h.forEach(R),e.__h=[],r=0)),i=o},p.diffed=function(t){h&&h(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(1!==c.push(e)&&a===p.requestAnimationFrame||((a=p.requestAnimationFrame)||N)(P)),e.__H.__.forEach((function(t){t.i&&(t.__H=t.i),t.i=void 0}))),i=o=null},p.__c=function(t,e){e.some((function(t){try{t.__h.forEach(C),t.__h=t.__h.filter((function(t){return!t.__||R(t)}))}catch(n){e.some((function(t){t.__h&&(t.__h=[])})),e=[],p.__e(n,t.__v)}})),y&&y(t,e)},p.unmount=function(t){v&&v(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach((function(t){try{C(t)}catch(t){e=t}})),n.__H=void 0,e&&p.__e(e,n.__v))};var D="function"==typeof requestAnimationFrame;function N(t){var e,n=function(){clearTimeout(r),D&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(n,100);D&&(e=requestAnimationFrame(n))}function C(t){var e=o,n=t.__c;"function"==typeof n&&(t.__c=void 0,n()),o=e}function R(t){var e=o;t.__c=t.__(),o=e}function L(t,e){return!t||t.length!==e.length||e.some((function(e,n){return e!==t[n]}))}function I(t,e){return"function"==typeof e?e(t):e}function k(t,e){for(var n in e)t[n]=e[n];return t}function B(t,e){for(var n in t)if("__source"!==n&&!(n in e))return!0;for(var r in e)if("__source"!==r&&t[r]!==e[r])return!0;return!1}function X(t,e){var n=e(),r=_({t:{__:n,u:e}}),o=r[0].t,i=r[1];return E((function(){o.__=n,o.u=e,z(o)&&i({t:o})}),[t,n,e]),x((function(){return z(o)&&i({t:o}),t((function(){z(o)&&i({t:o})}))}),[t]),n}function z(t){var e,n,r=t.u,o=t.__;try{var i=r();return!((e=o)===(n=i)&&(0!==e||1/e==1/n)||e!=e&&n!=n)}catch(t){return!0}}function H(t){t()}function U(t){return t}function G(){return[!1,H]}var Y=E;function V(t,e){this.props=t,this.context=e}function F(t,e){function n(t){var n=this.props.ref,r=n==t.ref;return!r&&n&&(n.call?n(null):n.current=null),e?!e(this.props,t)||!r:B(this.props,t)}function r(e){return this.shouldComponentUpdate=n,Object(u["e"])(t,e)}return r.displayName="Memo("+(t.displayName||t.name)+")",r.prototype.isReactComponent=!0,r.__f=!0,r}(V.prototype=new u["a"]).isPureReactComponent=!0,V.prototype.shouldComponentUpdate=function(t,e){return B(this.props,t)||B(this.state,e)};var W=u["i"].__b;u["i"].__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),W&&W(t)};var K="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function Z(t){function e(e){var n=k({},e);return delete n.ref,t(n,e.ref||null)}return e.$$typeof=K,e.render=e,e.prototype.isReactComponent=e.__f=!0,e.displayName="ForwardRef("+(t.displayName||t.name)+")",e}var q=function(t,e){return null==t?null:Object(u["k"])(Object(u["k"])(t).map(e))},$={map:q,forEach:q,count:function(t){return t?Object(u["k"])(t).length:0},only:function(t){var e=Object(u["k"])(t);if(1!==e.length)throw"Children.only";return e[0]},toArray:u["k"]},J=u["i"].__e;u["i"].__e=function(t,e,n,r){if(t.then)for(var o,i=e;i=i.__;)if((o=i.__c)&&o.__c)return null==e.__e&&(e.__e=n.__e,e.__k=n.__k),o.__c(t,e);J(t,e,n,r)};var Q=u["i"].unmount;function tt(t,e,n){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach((function(t){"function"==typeof t.__c&&t.__c()})),t.__c.__H=null),null!=(t=k({},t)).__c&&(t.__c.__P===n&&(t.__c.__P=e),t.__c=null),t.__k=t.__k&&t.__k.map((function(t){return tt(t,e,n)}))),t}function et(t,e,n){return t&&n&&(t.__v=null,t.__k=t.__k&&t.__k.map((function(t){return et(t,e,n)})),t.__c&&t.__c.__P===e&&(t.__e&&n.appendChild(t.__e),t.__c.__e=!0,t.__c.__P=n)),t}function nt(){this.__u=0,this.o=null,this.__b=null}function rt(t){var e=t.__.__c;return e&&e.__a&&e.__a(t)}function ot(t){var e,n,r;function o(o){if(e||(e=t()).then((function(t){n=t.default||t}),(function(t){r=t})),r)throw r;if(!n)throw e;return Object(u["e"])(n,o)}return o.displayName="Lazy",o.__f=!0,o}function it(){this.i=null,this.l=null}u["i"].unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&32&t.__u&&(t.type=null),Q&&Q(t)},(nt.prototype=new u["a"]).__c=function(t,e){var n=e.__c,r=this;null==r.o&&(r.o=[]),r.o.push(n);var o=rt(r.__v),i=!1,a=function(){i||(i=!0,n.__R=null,o?o(s):s())};n.__R=a;var s=function(){if(!--r.__u){if(r.state.__a){var t=r.state.__a;r.__v.__k[0]=et(t,t.__c.__P,t.__c.__O)}var e;for(r.setState({__a:r.__b=null});e=r.o.pop();)e.forceUpdate()}};r.__u++||32&e.__u||r.setState({__a:r.__b=r.__v.__k[0]}),t.then(a,a)},nt.prototype.componentWillUnmount=function(){this.o=[]},nt.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=tt(this.__b,n,r.__O=r.__P)}this.__b=null}var o=e.__a&&Object(u["e"])(u["b"],null,t.fallback);return o&&(o.__u&=-33),[Object(u["e"])(u["b"],null,e.__a?null:t.children),o]};var at=function(t,e,n){if(++n[1]===n[0]&&t.l.delete(e),t.props.revealOrder&&("t"!==t.props.revealOrder[0]||!t.l.size))for(n=t.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;t.i=n=n[2]}};function st(t){return this.getChildContext=function(){return t.context},t.children}function ut(t){var e=this,n=t.h;e.componentWillUnmount=function(){Object(u["j"])(null,e.v),e.v=null,e.h=null},e.h&&e.h!==n&&e.componentWillUnmount(),e.v||(e.h=n,e.v={nodeType:1,parentNode:n,childNodes:[],contains:function(){return!0},appendChild:function(t){this.childNodes.push(t),e.h.appendChild(t)},insertBefore:function(t,n){this.childNodes.push(t),e.h.insertBefore(t,n)},removeChild:function(t){this.childNodes.splice(this.childNodes.indexOf(t)>>>1,1),e.h.removeChild(t)}}),Object(u["j"])(Object(u["e"])(st,{context:e.context},t.__v),e.v)}function lt(t,e){var n=Object(u["e"])(ut,{__v:t,h:e});return n.containerInfo=e,n}(it.prototype=new u["a"]).__a=function(t){var e=this,n=rt(e.__v),r=e.l.get(t);return r[0]++,function(o){var i=function(){e.props.revealOrder?(r.push(o),at(e,t,r)):o()};n?n(i):i()}},it.prototype.render=function(t){this.i=null,this.l=new Map;var e=Object(u["k"])(t.children);t.revealOrder&&"b"===t.revealOrder[0]&&e.reverse();for(var n=e.length;n--;)this.l.set(e[n],this.i=[1,0,this.i]);return t.children},it.prototype.componentDidUpdate=it.prototype.componentDidMount=function(){var t=this;this.l.forEach((function(e,n){at(t,n,e)}))};var ct="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,pt=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,dt=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,ft=/[A-Z0-9]/g,ht="undefined"!=typeof document,yt=function(t){return("undefined"!=typeof Symbol&&"symbol"==typeof Symbol()?/fil|che|rad/:/fil|che|ra/).test(t)};function vt(t,e,n){return null==e.__k&&(e.textContent=""),Object(u["j"])(t,e),"function"==typeof n&&n(),t?t.__c:null}function gt(t,e,n){return Object(u["h"])(t,e),"function"==typeof n&&n(),t?t.__c:null}u["a"].prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach((function(t){Object.defineProperty(u["a"].prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})}));var mt=u["i"].event;function _t(){}function bt(){return this.cancelBubble}function xt(){return this.defaultPrevented}u["i"].event=function(t){return mt&&(t=mt(t)),t.persist=_t,t.isPropagationStopped=bt,t.isDefaultPrevented=xt,t.nativeEvent=t};var Et,Ot={enumerable:!1,configurable:!0,get:function(){return this.class}},wt=u["i"].vnode;u["i"].vnode=function(t){"string"==typeof t.type&&function(t){var e=t.props,n=t.type,r={},o=-1===n.indexOf("-");for(var i in e){var a=e[i];if(!("value"===i&&"defaultValue"in e&&null==a||ht&&"children"===i&&"noscript"===n||"class"===i||"className"===i)){var s=i.toLowerCase();"defaultValue"===i&&"value"in e&&null==e.value?i="value":"download"===i&&!0===a?a="":"translate"===s&&"no"===a?a=!1:"o"===s[0]&&"n"===s[1]?"ondoubleclick"===s?i="ondblclick":"onchange"!==s||"input"!==n&&"textarea"!==n||yt(e.type)?"onfocus"===s?i="onfocusin":"onblur"===s?i="onfocusout":dt.test(i)&&(i=s):s=i="oninput":o&&pt.test(i)?i=i.replace(ft,"-$&").toLowerCase():null===a&&(a=void 0),"oninput"===s&&r[i=s]&&(i="oninputCapture"),r[i]=a}}"select"==n&&r.multiple&&Array.isArray(r.value)&&(r.value=Object(u["k"])(e.children).forEach((function(t){t.props.selected=-1!=r.value.indexOf(t.props.value)}))),"select"==n&&null!=r.defaultValue&&(r.value=Object(u["k"])(e.children).forEach((function(t){t.props.selected=r.multiple?-1!=r.defaultValue.indexOf(t.props.value):r.defaultValue==t.props.value}))),e.class&&!e.className?(r.class=e.class,Object.defineProperty(r,"className",Ot)):(e.className&&!e.class||e.class&&e.className)&&(r.class=r.className=e.className),t.props=r}(t),t.$$typeof=ct,wt&&wt(t)};var At=u["i"].__r;u["i"].__r=function(t){At&&At(t),Et=t.__c};var St=u["i"].diffed;u["i"].diffed=function(t){St&&St(t);var e=t.props,n=t.__e;null!=n&&"textarea"===t.type&&"value"in e&&e.value!==n.value&&(n.value=null==e.value?"":e.value),Et=null};var Mt={ReactCurrentDispatcher:{current:{readContext:function(t){return Et.__n[t.__c].props.value},useCallback:S,useContext:M,useDebugValue:j,useDeferredValue:U,useEffect:x,useId:T,useImperativeHandle:w,useInsertionEffect:Y,useLayoutEffect:E,useMemo:A,useReducer:b,useRef:O,useState:_,useSyncExternalStore:X,useTransition:G}}};function jt(t){return u["e"].bind(null,t)}function Tt(t){return!!t&&t.$$typeof===ct}function Pt(t){return Tt(t)&&t.type===u["b"]}function Dt(t){return!!t&&!!t.displayName&&("string"==typeof t.displayName||t.displayName instanceof String)&&t.displayName.startsWith("Memo(")}function Nt(t){return Tt(t)?u["c"].apply(null,arguments):t}function Ct(t){return!!t.__k&&(Object(u["j"])(null,t),!0)}function Rt(t){return t&&(t.base||1===t.nodeType&&t)||null}var Lt=function(t,e){return t(e)},It=function(t,e){return t(e)},kt=u["b"],Bt=Tt;u["e"],u["d"],u["f"],u["b"],u["a"];var Xt=0;Array.isArray;function zt(t,e,n,r,o,i){e||(e={});var a,s,l=e;if("ref"in l)for(s in l={},e)"ref"==s?a=e[s]:l[s]=e[s];var c={type:t,props:l,key:n,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Xt,__i:-1,__u:0,__source:o,__self:i};if("function"==typeof t&&(a=t.defaultProps))for(s in a)void 0===l[s]&&(l[s]=a[s]);return u["i"].vnode&&u["i"].vnode(c),c}function Ht(t,e){var n=-1,r=null==t?0:t.length;while(++n<r)if(!1===e(t[n],n,t))break;return t}var Ut=Ht;function Gt(t){return function(e,n,r){var o=-1,i=Object(e),a=r(e),s=a.length;while(s--){var u=a[t?s:++o];if(!1===n(i[u],u,i))break}return e}}var Yt=Gt,Vt=Yt(),Ft=Vt;function Wt(t,e){var n=-1,r=Array(t);while(++n<t)r[n]=e(n);return r}var Kt=Wt,Zt=n("26ee"),qt=Zt["a"].Symbol,$t=qt,Jt=Object.prototype,Qt=Jt.hasOwnProperty,te=Jt.toString,ee=$t?$t.toStringTag:void 0;function ne(t){var e=Qt.call(t,ee),n=t[ee];try{t[ee]=void 0;var r=!0}catch(i){}var o=te.call(t);return r&&(e?t[ee]=n:delete t[ee]),o}var re=ne,oe=Object.prototype,ie=oe.toString;function ae(t){return ie.call(t)}var se=ae,ue="[object Null]",le="[object Undefined]",ce=$t?$t.toStringTag:void 0;function pe(t){return null==t?void 0===t?le:ue:ce&&ce in Object(t)?re(t):se(t)}var de=pe;function fe(t){return null!=t&&"object"==typeof t}var he=fe,ye="[object Arguments]";function ve(t){return he(t)&&de(t)==ye}var ge=ve,me=Object.prototype,_e=me.hasOwnProperty,be=me.propertyIsEnumerable,xe=ge(function(){return arguments}())?ge:function(t){return he(t)&&_e.call(t,"callee")&&!be.call(t,"callee")},Ee=xe,Oe=Array.isArray,we=Oe,Ae=n("58e0"),Se=9007199254740991,Me=/^(?:0|[1-9]\d*)$/;function je(t,e){var n=typeof t;return e=null==e?Se:e,!!e&&("number"==n||"symbol"!=n&&Me.test(t))&&t>-1&&t%1==0&&t<e}var Te=je,Pe=9007199254740991;function De(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Pe}var Ne=De,Ce="[object Arguments]",Re="[object Array]",Le="[object Boolean]",Ie="[object Date]",ke="[object Error]",Be="[object Function]",Xe="[object Map]",ze="[object Number]",He="[object Object]",Ue="[object RegExp]",Ge="[object Set]",Ye="[object String]",Ve="[object WeakMap]",Fe="[object ArrayBuffer]",We="[object DataView]",Ke="[object Float32Array]",Ze="[object Float64Array]",qe="[object Int8Array]",$e="[object Int16Array]",Je="[object Int32Array]",Qe="[object Uint8Array]",tn="[object Uint8ClampedArray]",en="[object Uint16Array]",nn="[object Uint32Array]",rn={};function on(t){return he(t)&&Ne(t.length)&&!!rn[de(t)]}rn[Ke]=rn[Ze]=rn[qe]=rn[$e]=rn[Je]=rn[Qe]=rn[tn]=rn[en]=rn[nn]=!0,rn[Ce]=rn[Re]=rn[Fe]=rn[Le]=rn[We]=rn[Ie]=rn[ke]=rn[Be]=rn[Xe]=rn[ze]=rn[He]=rn[Ue]=rn[Ge]=rn[Ye]=rn[Ve]=!1;var an=on;function sn(t){return function(e){return t(e)}}var un=sn,ln=n("c6eb"),cn=ln["a"]&&ln["a"].isTypedArray,pn=cn?un(cn):an,dn=pn,fn=Object.prototype,hn=fn.hasOwnProperty;function yn(t,e){var n=we(t),r=!n&&Ee(t),o=!n&&!r&&Object(Ae["a"])(t),i=!n&&!r&&!o&&dn(t),a=n||r||o||i,s=a?Kt(t.length,String):[],u=s.length;for(var l in t)!e&&!hn.call(t,l)||a&&("length"==l||o&&("offset"==l||"parent"==l)||i&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Te(l,u))||s.push(l);return s}var vn=yn,gn=Object.prototype;function mn(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||gn;return t===n}var _n=mn;function bn(t,e){return function(n){return t(e(n))}}var xn=bn,En=xn(Object.keys,Object),On=En,wn=Object.prototype,An=wn.hasOwnProperty;function Sn(t){if(!_n(t))return On(t);var e=[];for(var n in Object(t))An.call(t,n)&&"constructor"!=n&&e.push(n);return e}var Mn=Sn;function jn(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var Tn=jn,Pn="[object AsyncFunction]",Dn="[object Function]",Nn="[object GeneratorFunction]",Cn="[object Proxy]";function Rn(t){if(!Tn(t))return!1;var e=de(t);return e==Dn||e==Nn||e==Pn||e==Cn}var Ln=Rn;function In(t){return null!=t&&Ne(t.length)&&!Ln(t)}var kn=In;function Bn(t){return kn(t)?vn(t):Mn(t)}var Xn=Bn;function zn(t,e){return t&&Ft(t,e,Xn)}var Hn=zn;function Un(t,e){return function(n,r){if(null==n)return n;if(!kn(n))return t(n,r);var o=n.length,i=e?o:-1,a=Object(n);while(e?i--:++i<o)if(!1===r(a[i],i,a))break;return n}}var Gn=Un,Yn=Gn(Hn),Vn=Yn;function Fn(t){return t}var Wn=Fn;function Kn(t){return"function"==typeof t?t:Wn}var Zn=Kn;function qn(t,e){var n=we(t)?Ut:Vn;return n(t,Zn(e))}var $n=qn;function Jn(t){return null==t}var Qn=Jn;function tr(){this.__data__=[],this.size=0}var er=tr;function nr(t,e){return t===e||t!==t&&e!==e}var rr=nr;function or(t,e){var n=t.length;while(n--)if(rr(t[n][0],e))return n;return-1}var ir=or,ar=Array.prototype,sr=ar.splice;function ur(t){var e=this.__data__,n=ir(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():sr.call(e,n,1),--this.size,!0}var lr=ur;function cr(t){var e=this.__data__,n=ir(e,t);return n<0?void 0:e[n][1]}var pr=cr;function dr(t){return ir(this.__data__,t)>-1}var fr=dr;function hr(t,e){var n=this.__data__,r=ir(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var yr=hr;function vr(t){var e=-1,n=null==t?0:t.length;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}vr.prototype.clear=er,vr.prototype["delete"]=lr,vr.prototype.get=pr,vr.prototype.has=fr,vr.prototype.set=yr;var gr=vr;function mr(){this.__data__=new gr,this.size=0}var _r=mr;function br(t){var e=this.__data__,n=e["delete"](t);return this.size=e.size,n}var xr=br;function Er(t){return this.__data__.get(t)}var Or=Er;function wr(t){return this.__data__.has(t)}var Ar=wr,Sr=Zt["a"]["__core-js_shared__"],Mr=Sr,jr=function(){var t=/[^.]+$/.exec(Mr&&Mr.keys&&Mr.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Tr(t){return!!jr&&jr in t}var Pr=Tr,Dr=Function.prototype,Nr=Dr.toString;function Cr(t){if(null!=t){try{return Nr.call(t)}catch(e){}try{return t+""}catch(e){}}return""}var Rr=Cr,Lr=/[\\^$.*+?()[\]{}|]/g,Ir=/^\[object .+?Constructor\]$/,kr=Function.prototype,Br=Object.prototype,Xr=kr.toString,zr=Br.hasOwnProperty,Hr=RegExp("^"+Xr.call(zr).replace(Lr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ur(t){if(!Tn(t)||Pr(t))return!1;var e=Ln(t)?Hr:Ir;return e.test(Rr(t))}var Gr=Ur;function Yr(t,e){return null==t?void 0:t[e]}var Vr=Yr;function Fr(t,e){var n=Vr(t,e);return Gr(n)?n:void 0}var Wr=Fr,Kr=Wr(Zt["a"],"Map"),Zr=Kr,qr=Wr(Object,"create"),$r=qr;function Jr(){this.__data__=$r?$r(null):{},this.size=0}var Qr=Jr;function to(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var eo=to,no="__lodash_hash_undefined__",ro=Object.prototype,oo=ro.hasOwnProperty;function io(t){var e=this.__data__;if($r){var n=e[t];return n===no?void 0:n}return oo.call(e,t)?e[t]:void 0}var ao=io,so=Object.prototype,uo=so.hasOwnProperty;function lo(t){var e=this.__data__;return $r?void 0!==e[t]:uo.call(e,t)}var co=lo,po="__lodash_hash_undefined__";function fo(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=$r&&void 0===e?po:e,this}var ho=fo;function yo(t){var e=-1,n=null==t?0:t.length;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}yo.prototype.clear=Qr,yo.prototype["delete"]=eo,yo.prototype.get=ao,yo.prototype.has=co,yo.prototype.set=ho;var vo=yo;function go(){this.size=0,this.__data__={hash:new vo,map:new(Zr||gr),string:new vo}}var mo=go;function _o(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}var bo=_o;function xo(t,e){var n=t.__data__;return bo(e)?n["string"==typeof e?"string":"hash"]:n.map}var Eo=xo;function Oo(t){var e=Eo(this,t)["delete"](t);return this.size-=e?1:0,e}var wo=Oo;function Ao(t){return Eo(this,t).get(t)}var So=Ao;function Mo(t){return Eo(this,t).has(t)}var jo=Mo;function To(t,e){var n=Eo(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var Po=To;function Do(t){var e=-1,n=null==t?0:t.length;this.clear();while(++e<n){var r=t[e];this.set(r[0],r[1])}}Do.prototype.clear=mo,Do.prototype["delete"]=wo,Do.prototype.get=So,Do.prototype.has=jo,Do.prototype.set=Po;var No=Do,Co=200;function Ro(t,e){var n=this.__data__;if(n instanceof gr){var r=n.__data__;if(!Zr||r.length<Co-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new No(r)}return n.set(t,e),this.size=n.size,this}var Lo=Ro;function Io(t){var e=this.__data__=new gr(t);this.size=e.size}Io.prototype.clear=_r,Io.prototype["delete"]=xr,Io.prototype.get=Or,Io.prototype.has=Ar,Io.prototype.set=Lo;var ko=Io,Bo=function(){try{var t=Wr(Object,"defineProperty");return t({},"",{}),t}catch(e){}}(),Xo=Bo;function zo(t,e,n){"__proto__"==e&&Xo?Xo(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var Ho=zo,Uo=Object.prototype,Go=Uo.hasOwnProperty;function Yo(t,e,n){var r=t[e];Go.call(t,e)&&rr(r,n)&&(void 0!==n||e in t)||Ho(t,e,n)}var Vo=Yo;function Fo(t,e,n,r){var o=!n;n||(n={});var i=-1,a=e.length;while(++i<a){var s=e[i],u=r?r(n[s],t[s],s,n,t):void 0;void 0===u&&(u=t[s]),o?Ho(n,s,u):Vo(n,s,u)}return n}var Wo=Fo;function Ko(t,e){return t&&Wo(e,Xn(e),t)}var Zo=Ko;function qo(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}var $o=qo,Jo=Object.prototype,Qo=Jo.hasOwnProperty;function ti(t){if(!Tn(t))return $o(t);var e=_n(t),n=[];for(var r in t)("constructor"!=r||!e&&Qo.call(t,r))&&n.push(r);return n}var ei=ti;function ni(t){return kn(t)?vn(t,!0):ei(t)}var ri=ni;function oi(t,e){return t&&Wo(e,ri(e),t)}var ii=oi,ai=n("dff1");function si(t,e){var n=-1,r=t.length;e||(e=Array(r));while(++n<r)e[n]=t[n];return e}var ui=si;function li(t,e){var n=-1,r=null==t?0:t.length,o=0,i=[];while(++n<r){var a=t[n];e(a,n,t)&&(i[o++]=a)}return i}var ci=li;function pi(){return[]}var di=pi,fi=Object.prototype,hi=fi.propertyIsEnumerable,yi=Object.getOwnPropertySymbols,vi=yi?function(t){return null==t?[]:(t=Object(t),ci(yi(t),(function(e){return hi.call(t,e)})))}:di,gi=vi;function mi(t,e){return Wo(t,gi(t),e)}var _i=mi;function bi(t,e){var n=-1,r=e.length,o=t.length;while(++n<r)t[o+n]=e[n];return t}var xi=bi,Ei=xn(Object.getPrototypeOf,Object),Oi=Ei,wi=Object.getOwnPropertySymbols,Ai=wi?function(t){var e=[];while(t)xi(e,gi(t)),t=Oi(t);return e}:di,Si=Ai;function Mi(t,e){return Wo(t,Si(t),e)}var ji=Mi;function Ti(t,e,n){var r=e(t);return we(t)?r:xi(r,n(t))}var Pi=Ti;function Di(t){return Pi(t,Xn,gi)}var Ni=Di;function Ci(t){return Pi(t,ri,Si)}var Ri=Ci,Li=Wr(Zt["a"],"DataView"),Ii=Li,ki=Wr(Zt["a"],"Promise"),Bi=ki,Xi=Wr(Zt["a"],"Set"),zi=Xi,Hi=Wr(Zt["a"],"WeakMap"),Ui=Hi,Gi="[object Map]",Yi="[object Object]",Vi="[object Promise]",Fi="[object Set]",Wi="[object WeakMap]",Ki="[object DataView]",Zi=Rr(Ii),qi=Rr(Zr),$i=Rr(Bi),Ji=Rr(zi),Qi=Rr(Ui),ta=de;(Ii&&ta(new Ii(new ArrayBuffer(1)))!=Ki||Zr&&ta(new Zr)!=Gi||Bi&&ta(Bi.resolve())!=Vi||zi&&ta(new zi)!=Fi||Ui&&ta(new Ui)!=Wi)&&(ta=function(t){var e=de(t),n=e==Yi?t.constructor:void 0,r=n?Rr(n):"";if(r)switch(r){case Zi:return Ki;case qi:return Gi;case $i:return Vi;case Ji:return Fi;case Qi:return Wi}return e});var ea=ta,na=Object.prototype,ra=na.hasOwnProperty;function oa(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&ra.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var ia=oa,aa=Zt["a"].Uint8Array,sa=aa;function ua(t){var e=new t.constructor(t.byteLength);return new sa(e).set(new sa(t)),e}var la=ua;function ca(t,e){var n=e?la(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var pa=ca,da=/\w*$/;function fa(t){var e=new t.constructor(t.source,da.exec(t));return e.lastIndex=t.lastIndex,e}var ha=fa,ya=$t?$t.prototype:void 0,va=ya?ya.valueOf:void 0;function ga(t){return va?Object(va.call(t)):{}}var ma=ga;function _a(t,e){var n=e?la(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var ba=_a,xa="[object Boolean]",Ea="[object Date]",Oa="[object Map]",wa="[object Number]",Aa="[object RegExp]",Sa="[object Set]",Ma="[object String]",ja="[object Symbol]",Ta="[object ArrayBuffer]",Pa="[object DataView]",Da="[object Float32Array]",Na="[object Float64Array]",Ca="[object Int8Array]",Ra="[object Int16Array]",La="[object Int32Array]",Ia="[object Uint8Array]",ka="[object Uint8ClampedArray]",Ba="[object Uint16Array]",Xa="[object Uint32Array]";function za(t,e,n){var r=t.constructor;switch(e){case Ta:return la(t);case xa:case Ea:return new r(+t);case Pa:return pa(t,n);case Da:case Na:case Ca:case Ra:case La:case Ia:case ka:case Ba:case Xa:return ba(t,n);case Oa:return new r;case wa:case Ma:return new r(t);case Aa:return ha(t);case Sa:return new r;case ja:return ma(t)}}var Ha=za,Ua=Object.create,Ga=function(){function t(){}return function(e){if(!Tn(e))return{};if(Ua)return Ua(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),Ya=Ga;function Va(t){return"function"!=typeof t.constructor||_n(t)?{}:Ya(Oi(t))}var Fa=Va,Wa="[object Map]";function Ka(t){return he(t)&&ea(t)==Wa}var Za=Ka,qa=ln["a"]&&ln["a"].isMap,$a=qa?un(qa):Za,Ja=$a,Qa="[object Set]";function ts(t){return he(t)&&ea(t)==Qa}var es=ts,ns=ln["a"]&&ln["a"].isSet,rs=ns?un(ns):es,os=rs,is=1,as=2,ss=4,us="[object Arguments]",ls="[object Array]",cs="[object Boolean]",ps="[object Date]",ds="[object Error]",fs="[object Function]",hs="[object GeneratorFunction]",ys="[object Map]",vs="[object Number]",gs="[object Object]",ms="[object RegExp]",_s="[object Set]",bs="[object String]",xs="[object Symbol]",Es="[object WeakMap]",Os="[object ArrayBuffer]",ws="[object DataView]",As="[object Float32Array]",Ss="[object Float64Array]",Ms="[object Int8Array]",js="[object Int16Array]",Ts="[object Int32Array]",Ps="[object Uint8Array]",Ds="[object Uint8ClampedArray]",Ns="[object Uint16Array]",Cs="[object Uint32Array]",Rs={};function Ls(t,e,n,r,o,i){var a,s=e&is,u=e&as,l=e&ss;if(n&&(a=o?n(t,r,o,i):n(t)),void 0!==a)return a;if(!Tn(t))return t;var c=we(t);if(c){if(a=ia(t),!s)return ui(t,a)}else{var p=ea(t),d=p==fs||p==hs;if(Object(Ae["a"])(t))return Object(ai["a"])(t,s);if(p==gs||p==us||d&&!o){if(a=u||d?{}:Fa(t),!s)return u?ji(t,ii(a,t)):_i(t,Zo(a,t))}else{if(!Rs[p])return o?t:{};a=Ha(t,p,s)}}i||(i=new ko);var f=i.get(t);if(f)return f;i.set(t,a),os(t)?t.forEach((function(r){a.add(Ls(r,e,n,r,t,i))})):Ja(t)&&t.forEach((function(r,o){a.set(o,Ls(r,e,n,o,t,i))}));var h=l?u?Ri:Ni:u?ri:Xn,y=c?void 0:h(t);return Ut(y||t,(function(r,o){y&&(o=r,r=t[o]),Vo(a,o,Ls(r,e,n,o,t,i))})),a}Rs[us]=Rs[ls]=Rs[Os]=Rs[ws]=Rs[cs]=Rs[ps]=Rs[As]=Rs[Ss]=Rs[Ms]=Rs[js]=Rs[Ts]=Rs[ys]=Rs[vs]=Rs[gs]=Rs[ms]=Rs[_s]=Rs[bs]=Rs[xs]=Rs[Ps]=Rs[Ds]=Rs[Ns]=Rs[Cs]=!0,Rs[ds]=Rs[fs]=Rs[Es]=!1;var Is=Ls,ks=1,Bs=4;function Xs(t){return Is(t,ks|Bs)}var zs=Xs;function Hs(t,e,n,r){var o=t.length,i=n+(r?1:-1);while(r?i--:++i<o)if(e(t[i],i,t))return i;return-1}var Us=Hs;function Gs(t){return t!==t}var Ys=Gs;function Vs(t,e,n){var r=n-1,o=t.length;while(++r<o)if(t[r]===e)return r;return-1}var Fs=Vs;function Ws(t,e,n){return e===e?Fs(t,e,n):Us(t,Ys,n)}var Ks=Ws,Zs=/\s/;function qs(t){var e=t.length;while(e--&&Zs.test(t.charAt(e)));return e}var $s=qs,Js=/^\s+/;function Qs(t){return t?t.slice(0,$s(t)+1).replace(Js,""):t}var tu=Qs,eu="[object Symbol]";function nu(t){return"symbol"==typeof t||he(t)&&de(t)==eu}var ru=nu,ou=NaN,iu=/^[-+]0x[0-9a-f]+$/i,au=/^0b[01]+$/i,su=/^0o[0-7]+$/i,uu=parseInt;function lu(t){if("number"==typeof t)return t;if(ru(t))return ou;if(Tn(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Tn(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=tu(t);var n=au.test(t);return n||su.test(t)?uu(t.slice(2),n?2:8):iu.test(t)?ou:+t}var cu=lu,pu=1/0,du=17976931348623157e292;function fu(t){if(!t)return 0===t?t:0;if(t=cu(t),t===pu||t===-pu){var e=t<0?-1:1;return e*du}return t===t?t:0}var hu=fu;function yu(t){var e=hu(t),n=e%1;return e===e?n?e-n:e:0}var vu=yu,gu=Math.max;function mu(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=null==n?0:vu(n);return o<0&&(o=gu(r+o,0)),Ks(t,e,o)}var _u=mu;function bu(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var xu=bu,Eu=Math.max;function Ou(t,e,n){return e=Eu(void 0===e?t.length-1:e,0),function(){var r=arguments,o=-1,i=Eu(r.length-e,0),a=Array(i);while(++o<i)a[o]=r[e+o];o=-1;var s=Array(e+1);while(++o<e)s[o]=r[o];return s[e]=n(a),xu(t,this,s)}}var wu=Ou;function Au(t){return function(){return t}}var Su=Au,Mu=Xo?function(t,e){return Xo(t,"toString",{configurable:!0,enumerable:!1,value:Su(e),writable:!0})}:Wn,ju=Mu,Tu=800,Pu=16,Du=Date.now;function Nu(t){var e=0,n=0;return function(){var r=Du(),o=Pu-(r-n);if(n=r,o>0){if(++e>=Tu)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var Cu=Nu,Ru=Cu(ju),Lu=Ru;function Iu(t,e){return Lu(wu(t,e,Wn),t+"")}var ku=Iu;function Bu(t,e,n){if(!Tn(n))return!1;var r=typeof e;return!!("number"==r?kn(n)&&Te(e,n.length):"string"==r&&e in n)&&rr(n[e],t)}var Xu=Bu;function zu(t){return ku((function(e,n){var r=-1,o=n.length,i=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;i=t.length>3&&"function"==typeof i?(o--,i):void 0,a&&Xu(n[0],n[1],a)&&(i=o<3?void 0:i,o=1),e=Object(e);while(++r<o){var s=n[r];s&&t(e,s,r,i)}return e}))}var Hu,Uu=zu,Gu=Object.prototype,Yu=Gu.hasOwnProperty,Vu=Uu((function(t,e){if(_n(e)||kn(e))Wo(e,Xn(e),t);else for(var n in e)Yu.call(e,n)&&Vo(t,n,e[n])})),Fu=Vu,Wu=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n};(function(t){function e(e){var n=Wu(e,[]),r=e.container;if(!r)throw new Error("Ensure the container of LogicFlow is specified and valid.");return Fu({},t.defaults,n)}t.get=e})(Hu||(Hu={})),function(t){t.defaults={background:!1,grid:!1,textEdit:!0,snapline:!0,outline:!1,disabledTools:[]}}(Hu||(Hu={}));var Ku="__lodash_hash_undefined__";function Zu(t){return this.__data__.set(t,Ku),this}var qu=Zu;function $u(t){return this.__data__.has(t)}var Ju=$u;function Qu(t){var e=-1,n=null==t?0:t.length;this.__data__=new No;while(++e<n)this.add(t[e])}Qu.prototype.add=Qu.prototype.push=qu,Qu.prototype.has=Ju;var tl=Qu;function el(t,e){var n=-1,r=null==t?0:t.length;while(++n<r)if(e(t[n],n,t))return!0;return!1}var nl=el;function rl(t,e){return t.has(e)}var ol=rl,il=1,al=2;function sl(t,e,n,r,o,i){var a=n&il,s=t.length,u=e.length;if(s!=u&&!(a&&u>s))return!1;var l=i.get(t),c=i.get(e);if(l&&c)return l==e&&c==t;var p=-1,d=!0,f=n&al?new tl:void 0;i.set(t,e),i.set(e,t);while(++p<s){var h=t[p],y=e[p];if(r)var v=a?r(y,h,p,e,t,i):r(h,y,p,t,e,i);if(void 0!==v){if(v)continue;d=!1;break}if(f){if(!nl(e,(function(t,e){if(!ol(f,e)&&(h===t||o(h,t,n,r,i)))return f.push(e)}))){d=!1;break}}else if(h!==y&&!o(h,y,n,r,i)){d=!1;break}}return i["delete"](t),i["delete"](e),d}var ul=sl;function ll(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}var cl=ll;function pl(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var dl=pl,fl=1,hl=2,yl="[object Boolean]",vl="[object Date]",gl="[object Error]",ml="[object Map]",_l="[object Number]",bl="[object RegExp]",xl="[object Set]",El="[object String]",Ol="[object Symbol]",wl="[object ArrayBuffer]",Al="[object DataView]",Sl=$t?$t.prototype:void 0,Ml=Sl?Sl.valueOf:void 0;function jl(t,e,n,r,o,i,a){switch(n){case Al:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case wl:return!(t.byteLength!=e.byteLength||!i(new sa(t),new sa(e)));case yl:case vl:case _l:return rr(+t,+e);case gl:return t.name==e.name&&t.message==e.message;case bl:case El:return t==e+"";case ml:var s=cl;case xl:var u=r&fl;if(s||(s=dl),t.size!=e.size&&!u)return!1;var l=a.get(t);if(l)return l==e;r|=hl,a.set(t,e);var c=ul(s(t),s(e),r,o,i,a);return a["delete"](t),c;case Ol:if(Ml)return Ml.call(t)==Ml.call(e)}return!1}var Tl=jl,Pl=1,Dl=Object.prototype,Nl=Dl.hasOwnProperty;function Cl(t,e,n,r,o,i){var a=n&Pl,s=Ni(t),u=s.length,l=Ni(e),c=l.length;if(u!=c&&!a)return!1;var p=u;while(p--){var d=s[p];if(!(a?d in e:Nl.call(e,d)))return!1}var f=i.get(t),h=i.get(e);if(f&&h)return f==e&&h==t;var y=!0;i.set(t,e),i.set(e,t);var v=a;while(++p<u){d=s[p];var g=t[d],m=e[d];if(r)var _=a?r(m,g,d,e,t,i):r(g,m,d,t,e,i);if(!(void 0===_?g===m||o(g,m,n,r,i):_)){y=!1;break}v||(v="constructor"==d)}if(y&&!v){var b=t.constructor,x=e.constructor;b==x||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof x&&x instanceof x||(y=!1)}return i["delete"](t),i["delete"](e),y}var Rl=Cl,Ll=1,Il="[object Arguments]",kl="[object Array]",Bl="[object Object]",Xl=Object.prototype,zl=Xl.hasOwnProperty;function Hl(t,e,n,r,o,i){var a=we(t),s=we(e),u=a?kl:ea(t),l=s?kl:ea(e);u=u==Il?Bl:u,l=l==Il?Bl:l;var c=u==Bl,p=l==Bl,d=u==l;if(d&&Object(Ae["a"])(t)){if(!Object(Ae["a"])(e))return!1;a=!0,c=!1}if(d&&!c)return i||(i=new ko),a||dn(t)?ul(t,e,n,r,o,i):Tl(t,e,u,n,r,o,i);if(!(n&Ll)){var f=c&&zl.call(t,"__wrapped__"),h=p&&zl.call(e,"__wrapped__");if(f||h){var y=f?t.value():t,v=h?e.value():e;return i||(i=new ko),o(y,v,n,r,i)}}return!!d&&(i||(i=new ko),Rl(t,e,n,r,o,i))}var Ul=Hl;function Gl(t,e,n,r,o){return t===e||(null==t||null==e||!he(t)&&!he(e)?t!==t&&e!==e:Ul(t,e,n,r,Gl,o))}var Yl=Gl,Vl=1,Fl=2;function Wl(t,e,n,r){var o=n.length,i=o,a=!r;if(null==t)return!i;t=Object(t);while(o--){var s=n[o];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}while(++o<i){s=n[o];var u=s[0],l=t[u],c=s[1];if(a&&s[2]){if(void 0===l&&!(u in t))return!1}else{var p=new ko;if(r)var d=r(l,c,u,t,e,p);if(!(void 0===d?Yl(c,l,Vl|Fl,r,p):d))return!1}}return!0}var Kl=Wl;function Zl(t){return t===t&&!Tn(t)}var ql=Zl;function $l(t){var e=Xn(t),n=e.length;while(n--){var r=e[n],o=t[r];e[n]=[r,o,ql(o)]}return e}var Jl=$l;function Ql(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}var tc=Ql;function ec(t){var e=Jl(t);return 1==e.length&&e[0][2]?tc(e[0][0],e[0][1]):function(n){return n===t||Kl(n,t,e)}}var nc=ec,rc=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,oc=/^\w*$/;function ic(t,e){if(we(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!ru(t))||(oc.test(t)||!rc.test(t)||null!=e&&t in Object(e))}var ac=ic,sc="Expected a function";function uc(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(sc);var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=t.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(uc.Cache||No),n}uc.Cache=No;var lc=uc,cc=500;function pc(t){var e=lc(t,(function(t){return n.size===cc&&n.clear(),t})),n=e.cache;return e}var dc=pc,fc=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,hc=/\\(\\)?/g,yc=dc((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(fc,(function(t,n,r,o){e.push(r?o.replace(hc,"$1"):n||t)})),e})),vc=yc;function gc(t,e){var n=-1,r=null==t?0:t.length,o=Array(r);while(++n<r)o[n]=e(t[n],n,t);return o}var mc=gc,_c=1/0,bc=$t?$t.prototype:void 0,xc=bc?bc.toString:void 0;function Ec(t){if("string"==typeof t)return t;if(we(t))return mc(t,Ec)+"";if(ru(t))return xc?xc.call(t):"";var e=t+"";return"0"==e&&1/t==-_c?"-0":e}var Oc=Ec;function wc(t){return null==t?"":Oc(t)}var Ac=wc;function Sc(t,e){return we(t)?t:ac(t,e)?[t]:vc(Ac(t))}var Mc=Sc,jc=1/0;function Tc(t){if("string"==typeof t||ru(t))return t;var e=t+"";return"0"==e&&1/t==-jc?"-0":e}var Pc=Tc;function Dc(t,e){e=Mc(e,t);var n=0,r=e.length;while(null!=t&&n<r)t=t[Pc(e[n++])];return n&&n==r?t:void 0}var Nc=Dc;function Cc(t,e,n){var r=null==t?void 0:Nc(t,e);return void 0===r?n:r}var Rc=Cc;function Lc(t,e){return null!=t&&e in Object(t)}var Ic=Lc;function kc(t,e,n){e=Mc(e,t);var r=-1,o=e.length,i=!1;while(++r<o){var a=Pc(e[r]);if(!(i=null!=t&&n(t,a)))break;t=t[a]}return i||++r!=o?i:(o=null==t?0:t.length,!!o&&Ne(o)&&Te(a,o)&&(we(t)||Ee(t)))}var Bc=kc;function Xc(t,e){return null!=t&&Bc(t,e,Ic)}var zc=Xc,Hc=1,Uc=2;function Gc(t,e){return ac(t)&&ql(e)?tc(Pc(t),e):function(n){var r=Rc(n,t);return void 0===r&&r===e?zc(n,t):Yl(e,r,Hc|Uc)}}var Yc=Gc;function Vc(t){return function(e){return null==e?void 0:e[t]}}var Fc=Vc;function Wc(t){return function(e){return Nc(e,t)}}var Kc=Wc;function Zc(t){return ac(t)?Fc(Pc(t)):Kc(t)}var qc=Zc;function $c(t){return"function"==typeof t?t:null==t?Wn:"object"==typeof t?we(t)?Yc(t[0],t[1]):nc(t):qc(t)}var Jc=$c;function Qc(t){return function(e,n,r){var o=Object(e);if(!kn(e)){var i=Jc(n,3);e=Xn(e),n=function(t){return i(o[t],t,o)}}var a=t(e,n,r);return a>-1?o[i?e[a]:a]:void 0}}var tp=Qc,ep=Math.max;function np(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=null==n?0:vu(n);return o<0&&(o=ep(r+o,0)),Us(t,Jc(e,3),o)}var rp=np,op=tp(rp),ip=op;function ap(t){return void 0===t}var sp=ap,up=n("daf9");function lp(t,e,n){(void 0!==n&&!rr(t[e],n)||void 0===n&&!(e in t))&&Ho(t,e,n)}var cp=lp;function pp(t){return he(t)&&kn(t)}var dp=pp,fp="[object Object]",hp=Function.prototype,yp=Object.prototype,vp=hp.toString,gp=yp.hasOwnProperty,mp=vp.call(Object);function _p(t){if(!he(t)||de(t)!=fp)return!1;var e=Oi(t);if(null===e)return!0;var n=gp.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&vp.call(n)==mp}var bp=_p;function xp(t,e){if(("constructor"!==e||"function"!==typeof t[e])&&"__proto__"!=e)return t[e]}var Ep=xp;function Op(t){return Wo(t,ri(t))}var wp=Op;function Ap(t,e,n,r,o,i,a){var s=Ep(t,n),u=Ep(e,n),l=a.get(u);if(l)cp(t,n,l);else{var c=i?i(s,u,n+"",t,e,a):void 0,p=void 0===c;if(p){var d=we(u),f=!d&&Object(Ae["a"])(u),h=!d&&!f&&dn(u);c=u,d||f||h?we(s)?c=s:dp(s)?c=ui(s):f?(p=!1,c=Object(ai["a"])(u,!0)):h?(p=!1,c=ba(u,!0)):c=[]:bp(u)||Ee(u)?(c=s,Ee(s)?c=wp(s):Tn(s)&&!Ln(s)||(c=Fa(u))):p=!1}p&&(a.set(u,c),o(c,u,r,i,a),a["delete"](u)),cp(t,n,c)}}var Sp=Ap;function Mp(t,e,n,r,o){t!==e&&Ft(e,(function(i,a){if(o||(o=new ko),Tn(i))Sp(t,e,a,n,Mp,r,o);else{var s=r?r(Ep(t,a),i,a+"",t,e,o):void 0;void 0===s&&(s=i),cp(t,a,s)}}),ri)}var jp=Mp,Tp=Uu((function(t,e,n){jp(t,e,n)})),Pp=Tp,Dp={node:!1,edge:!1},Np={node:!0,edge:!0},Cp=function(t){return t&&"boolean"!==typeof t?Pp(zs(Dp),t):zs(!0===t?Np:Dp)},Rp=function(){return null!==Rc(window,"navigator.userAgent","").match(/MSIE|Trident/)};function Lp(t){try{return JSON.parse(JSON.stringify(t))}catch(e){return t}}function Ip(){}var kp,Bp,Xp,zp,Hp,Up,Gp,Yp=Ip,Vp=200,Fp=9999,Wp=10;(function(t){t[t["DEFAULT"]=1]="DEFAULT",t[t["TEXT_EDIT"]=2]="TEXT_EDIT",t[t["SHOW_MENU"]=3]="SHOW_MENU",t[t["ALLOW_CONNECT"]=4]="ALLOW_CONNECT",t[t["NOT_ALLOW_CONNECT"]=5]="NOT_ALLOW_CONNECT"})(kp||(kp={})),function(t){t["NODE"]="node",t["EDGE"]="edge",t["GRAPH"]="graph"}(Bp||(Bp={})),function(t){t["NODE"]="node",t["CIRCLE_NODE"]="circle-node",t["POLYGON_NODE"]="polygon-node",t["RECT_NODE"]="rect-node",t["TEXT_NODE"]="text-node",t["ELLIPSE_NODE"]="ellipse-node",t["DIAMOND_NODE"]="diamond-node",t["HTML_NODE"]="html-node",t["CUSTOM_HTML_NODE"]="custom-html-node",t["EDGE"]="edge",t["LINE_EDGE"]="line-edge",t["POLYLINE_EDGE"]="polyline-edge",t["BEZIER_EDGE"]="bezier-edge",t["GRAPH"]="graph"}(Xp||(Xp={})),function(t){t["ELEMENT_CLICK"]="element:click",t["NODE_ADD"]="node:add",t["NODE_DELETE"]="node:delete",t["NODE_CLICK"]="node:click",t["NODE_DBCLICK"]="node:dbclick",t["NODE_GROUP_COPY"]="node:group-copy-add",t["NODE_DND_ADD"]="node:dnd-add",t["NODE_DND_DRAG"]="node:dnd-drag",t["NODE_MOUSEDOWN"]="node:mousedown",t["NODE_DRAGSTART"]="node:dragstart",t["NODE_DRAG"]="node:drag",t["NODE_DROP"]="node:drop",t["NODE_MOUSEUP"]="node:mouseup",t["NODE_MOUSEMOVE"]="node:mousemove",t["NODE_MOUSEENTER"]="node:mouseenter",t["NODE_MOUSELEAVE"]="node:mouseleave",t["NODE_CONTEXTMENU"]="node:contextmenu",t["NODE_ROTATE"]="node:rotate",t["NODE_RESIZE"]="node:resize",t["NODE_FOCUS"]="node:focus",t["NODE_BLUR"]="node:blur",t["NODE_PROPERTIES_CHANGE"]="node:properties-change",t["NODE_PROPERTIES_DELETE"]="node:properties-delete",t["EDGE_ADD"]="edge:add",t["EDGE_DELETE"]="edge:delete",t["EDGE_CLICK"]="edge:click",t["EDGE_DBCLICK"]="edge:dbclick",t["EDGE_FOCUS"]="edge:focus",t["EDGE_BLUR"]="edge:blur",t["EDGE_MOUSEENTER"]="edge:mouseenter",t["EDGE_MOUSELEAVE"]="edge:mouseleave",t["EDGE_CONTEXTMENU"]="edge:contextmenu",t["EDGE_ADJUST"]="edge:adjust",t["EDGE_EXCHANGE_NODE"]="edge:exchange-node",t["ANCHOR_DRAGSTART"]="anchor:dragstart",t["ANCHOR_DRAG"]="anchor:drag",t["ANCHOR_DROP"]="anchor:drop",t["ANCHOR_DRAGEND"]="anchor:dragend",t["ADJUST_POINT_MOUSEDOWN"]="adjustPoint:mousedown",t["ADJUST_POINT_MOUSEUP"]="adjustPoint:mouseup",t["ADJUST_POINT_MOUSEMOVE"]="adjustPoint:mousemove",t["ADJUST_POINT_DRAGSTART"]="adjustPoint:dragstart",t["ADJUST_POINT_DRAG"]="adjustPoint:drag",t["ADJUST_POINT_DROP"]="adjustPoint:drop",t["ADJUST_POINT_DRAGEND"]="adjustPoint:dragend",t["BLANK_MOUSEDOWN"]="blank:mousedown",t["BLANK_DRAGSTART"]="blank:dragstart",t["BLANK_DRAG"]="blank:drag",t["BLANK_DROP"]="blank:drop",t["BLANK_MOUSEMOVE"]="blank:mousemove",t["BLANK_MOUSEUP"]="blank:mouseup",t["BLANK_CLICK"]="blank:click",t["BLANK_CONTEXTMENU"]="blank:contextmenu",t["SELECTION_MOUSEDOWN"]="selection:mousedown",t["SELECTION_DRAGSTART"]="selection:dragstart",t["SELECTION_DRAG"]="selection:drag",t["SELECTION_DROP"]="selection:drop",t["SELECTION_MOUSEMOVE"]="selection:mousemove",t["SELECTION_MOUSEUP"]="selection:mouseup",t["SELECTION_CONTEXTMENU"]="selection:contextmenu",t["CONNECTION_NOT_ALLOWED"]="connection:not-allowed",t["TEXT_MOUSEDOWN"]="text:mousedown",t["TEXT_DRAGSTART"]="text:dragstart",t["TEXT_DRAG"]="text:drag",t["TEXT_DROP"]="text:drop",t["TEXT_CLICK"]="text:click",t["TEXT_DBCLICK"]="text:dbclick",t["TEXT_BLUR"]="text:blur",t["TEXT_MOUSEMOVE"]="text:mousemove",t["TEXT_MOUSEUP"]="text:mouseup",t["TEXT_FOCUS"]="text:focus",t["TEXT_ADD"]="text:add",t["TEXT_UPDATE"]="text:update",t["TEXT_CLEAR"]="text:clear",t["LABEL_MOUSEDOWN"]="label:mousedown",t["LABEL_DRAGSTART"]="label:dragstart",t["LABEL_DRAG"]="label:drag",t["LABEL_DROP"]="label:drop",t["LABEL_CLICK"]="label:click",t["LABEL_DBCLICK"]="label:dbclick",t["LABEL_BLUR"]="label:blur",t["LABEL_MOUSEMOVE"]="label:mousemove",t["LABEL_MOUSEUP"]="label:mouseup",t["LABEL_FOCUS"]="label:focus",t["LABEL_ADD"]="label:add",t["LABEL_UPDATE"]="label:update",t["LABEL_CLEAR"]="label:clear",t["LABEL_DELETE"]="label:delete",t["LABEL_SHOULD_ADD"]="label:should-add",t["LABEL_BATCH_ADD"]="label:batch-add",t["LABEL_SHOULD_UPDATE"]="label:should-update",t["LABEL_SHOULD_DELETE"]="label:should-delete",t["LABEL_BATCH_DELETE"]="label:batch-delete",t["LABEL_NOT_ALLOWED_ADD"]="label:not-allowed-add",t["HISTORY_CHANGE"]="history:change",t["GRAPH_TRANSFORM"]="graph:transform",t["GRAPH_RENDERED"]="graph:rendered",t["GRAPH_UPDATED"]="graph:updated"}(zp||(zp={})),function(t){t[t["DEFAULT"]=0]="DEFAULT",t[t["INCREASE"]=1]="INCREASE"}(Hp||(Hp={})),function(t){t["HORIZONTAL"]="horizontal",t["VERTICAL"]="vertical"}(Up||(Up={})),function(t){t["TEXT"]="text",t["LABEL"]="label"}(Gp||(Gp={}));var Kp=0,Zp=function(){function t(t){var e=t.onDragStart,n=void 0===e?Yp:e,r=t.onDragging,o=void 0===r?Yp:r,i=t.onDragEnd,a=void 0===i?Yp:i,s=t.eventType,u=void 0===s?"":s,l=t.eventCenter,c=t.step,p=void 0===c?1:c,d=t.isStopPropagation,f=void 0===d||d,h=t.model,y=t.data,v=this;this.isDragging=!1,this.isStartDragging=!1,this.startX=0,this.startY=0,this.sumDeltaX=0,this.sumDeltaY=0,this.handleMouseDown=function(t){var e,n,r=null===window||void 0===window?void 0:window.document;if(t.button===Kp){v.isStopPropagation&&t.stopPropagation(),v.isStartDragging=!0,v.startX=t.clientX,v.startY=t.clientY,r.addEventListener("mousemove",v.handleMouseMove,!1),r.addEventListener("mouseup",v.handleMouseUp,!1);var o=null===(e=v.model)||void 0===e?void 0:e.getData();null===(n=v.eventCenter)||void 0===n||n.emit(zp["".concat(v.eventType,"_MOUSEDOWN")],{e:t,data:v.data||o}),v.startTime=(new Date).getTime()}},this.handleMouseMove=function(t){var e,n;if(v.isStopPropagation&&t.stopPropagation(),v.isStartDragging&&(v.sumDeltaX+=t.clientX-v.startX,v.sumDeltaY+=t.clientY-v.startY,v.startX=t.clientX,v.startY=t.clientY,v.step<=1||Math.abs(v.sumDeltaX)>v.step||Math.abs(v.sumDeltaY)>v.step)){var r=v.sumDeltaX%v.step,o=v.sumDeltaY%v.step,i=v.sumDeltaX-r,a=v.sumDeltaY-o;v.sumDeltaX=r,v.sumDeltaY=o;var s=null===(e=v.model)||void 0===e?void 0:e.getData();v.isDragging||(null===(n=v.eventCenter)||void 0===n||n.emit(zp["".concat(v.eventType,"_DRAGSTART")],{e:t,data:v.data||s}),v.onDragStart({event:t})),v.isDragging=!0,Promise.resolve().then((function(){var e,n;v.onDragging({deltaX:i,deltaY:a,event:t}),null===(e=v.eventCenter)||void 0===e||e.emit(zp["".concat(v.eventType,"_MOUSEMOVE")],{deltaX:i,deltaY:a,e:t,data:v.data||s}),null===(n=v.eventCenter)||void 0===n||n.emit(zp["".concat(v.eventType,"_DRAG")],{e:t,data:v.data||s})}))}},this.handleMouseUp=function(t){var e=window.document;v.isStartDragging=!1,v.isStopPropagation&&t.stopPropagation(),Promise.resolve().then((function(){var n,r,o;e.removeEventListener("mousemove",v.handleMouseMove,!1),e.removeEventListener("mouseup",v.handleMouseUp,!1);var i=null===(n=v.model)||void 0===n?void 0:n.getData();null===(r=v.eventCenter)||void 0===r||r.emit(zp["".concat(v.eventType,"_MOUSEUP")],{e:t,data:v.data||i}),v.isDragging&&(v.isDragging=!1,v.onDragEnd({event:t}),null===(o=v.eventCenter)||void 0===o||o.emit(zp["".concat(v.eventType,"_DROP")],{e:t,data:v.data||i}))}))},this.cancelDrag=function(){var t=null===window||void 0===window?void 0:window.document;t.removeEventListener("mousemove",v.handleMouseMove,!1),t.removeEventListener("mouseup",v.handleMouseUp,!1),v.onDragEnd({event:void 0}),v.isDragging=!1},this.destroy=function(){v.isStartDragging&&v.cancelDrag()},this.onDragStart=n,this.onDragging=o,this.onDragEnd=a,this.step=p,this.isStopPropagation=f,this.eventType=u,this.eventCenter=l,this.model=h,this.data=y}return t.prototype.setStep=function(t){this.step=t},t.prototype.setModel=function(t){this.model=t},t}();function qp(t,e,n,r){if(!Tn(t))return t;e=Mc(e,t);var o=-1,i=e.length,a=i-1,s=t;while(null!=s&&++o<i){var u=Pc(e[o]),l=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return t;if(o!=a){var c=s[u];l=r?r(c,u,s):void 0,void 0===l&&(l=Tn(c)?c:Te(e[o+1])?[]:{})}Vo(s,u,l),s=s[u]}return t}var $p=qp;function Jp(t,e,n){var r=-1,o=e.length,i={};while(++r<o){var a=e[r],s=Nc(t,a);n(s,a)&&$p(i,Mc(a,t),s)}return i}var Qp=Jp;function td(t,e){return Qp(t,e,(function(e,n){return zc(t,n)}))}var ed=td,nd=$t?$t.isConcatSpreadable:void 0;function rd(t){return we(t)||Ee(t)||!!(nd&&t&&t[nd])}var od=rd;function id(t,e,n,r,o){var i=-1,a=t.length;n||(n=od),o||(o=[]);while(++i<a){var s=t[i];e>0&&n(s)?e>1?id(s,e-1,n,r,o):xi(o,s):r||(o[o.length]=s)}return o}var ad=id;function sd(t){var e=null==t?0:t.length;return e?ad(t,1):[]}var ud=sd;function ld(t){return Lu(wu(t,void 0,ud),t+"")}var cd=ld,pd=cd((function(t,e){return null==t?{}:ed(t,e)})),dd=pd,fd=function(t){var e=t.x,n=t.y,r=t.width,o=t.height;return{x:e-r/2,y:n-o/2,x1:e+r/2,y1:n+o/2}},hd=function(t){var e=t.startPoint,n=t.endPoint,r=(e.x+n.x)/2,o=(e.y+n.y)/2,i=Math.abs(e.x-n.x)+10,a=Math.abs(e.y-n.y)+10;return{x:r-i/2,y:o-a/2,x1:r+i/2,y1:o+a/2}},yd=function(t){var e=t.points,n=Qd(e),r=Pd(n,8),o=r.x,i=r.y,a=r.width,s=r.height;return{x:o-a/2,y:i-s/2,x1:o+a/2,y1:i+s/2}},vd=function(t){var e=t.path,n=af(e),r=Pd(n,8),o=r.x,i=r.y,a=r.width,s=r.height;return{x:o-a/2,y:i-s/2,x1:o+a/2,y1:i+s/2}},gd=function(t){return t.modelType===Xp.LINE_EDGE?hd(t):t.modelType===Xp.POLYLINE_EDGE?yd(t):t.modelType===Xp.BEZIER_EDGE?vd(t):void 0},md=function(t,e,n,r){var o=(e.y-t.y)*(r.x-n.x)-(t.x-e.x)*(n.y-r.y);if(0===o)return!1;var i=((e.x-t.x)*(r.x-n.x)*(n.y-t.y)+(e.y-t.y)*(r.x-n.x)*t.x-(r.y-n.y)*(e.x-t.x)*n.x)/o,a=-((e.y-t.y)*(r.y-n.y)*(n.x-t.x)+(e.x-t.x)*(r.y-n.y)*t.y-(r.x-n.x)*(e.y-t.y)*n.y)/o;return(i-t.x)*(i-e.x)<=0&&(a-t.y)*(a-e.y)<=0&&(i-n.x)*(i-r.x)<=0&&(a-n.y)*(a-r.y)<=0&&{x:i,y:a}},_d=function(t,e,n){var r=t.x,o=t.y,i=e.x,a=e.y,s=n.x,u=n.y,l=(u-a)/(s-i),c=a-l*i;return(r>=i&&r<=s||r<=i&&r>=s)&&(o>=a&&o<=u||o<=a&&o>=u)&&Math.abs(o-l*r-c)<Number.EPSILON},bd=function(t){var e=t.start,n=t.end,r=t.offset,o=t.verticalLength,i=t.type,a={leftX:0,leftY:0,rightX:0,rightY:0},s=Math.atan((n.y-e.y)/(n.x-e.x)),u=Math.atan(r/o),l=Math.sqrt(o*o+r*r);return"start"===i?n.x>=e.x?(a.leftX=e.x+l*Math.sin(s+u),a.leftY=e.y-l*Math.cos(s+u),a.rightX=e.x-l*Math.sin(s-u),a.rightY=e.y+l*Math.cos(s-u)):(a.leftX=e.x-l*Math.sin(s+u),a.leftY=e.y+l*Math.cos(s+u),a.rightX=e.x+l*Math.sin(s-u),a.rightY=e.y-l*Math.cos(s-u)):"end"===i&&(n.x>=e.x?(a.leftX=n.x+l*Math.sin(s-u),a.leftY=n.y-l*Math.cos(s-u),a.rightX=n.x-l*Math.sin(s+u),a.rightY=n.y+l*Math.cos(s+u)):(a.leftX=n.x-l*Math.sin(s-u),a.leftY=n.y+l*Math.cos(s-u),a.rightX=n.x+l*Math.sin(s+u),a.rightY=n.y-l*Math.cos(s+u))),a},xd=function(){return xd=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},xd.apply(this,arguments)},Ed=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(r=i.next()).done)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(o)throw o.error}}return a},Od=function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))},wd=function(t,e){return 2*Math.abs(t.centerX-e.centerX)<t.width+e.width&&2*Math.abs(t.centerY-e.centerY)<t.height+e.height},Ad=function(t){var e=[],n={};return t.forEach((function(t){var e="".concat(t.x,"-").concat(t.y);t.id=e,n[e]=t})),Object.keys(n).forEach((function(t){e.push(n[t])})),e},Sd=function(t,e){return 0===t.width&&0===t.height?t:{x:t.x,y:t.y,centerX:t.centerX,centerY:t.centerY,minX:t.minX-e,minY:t.minY-e,maxX:t.maxX+e,maxY:t.maxY+e,height:t.height+2*e,width:t.width+2*e}},Md=function(t,e){var n=Math.abs(t.x-e.centerX),r=Math.abs(t.y-e.centerY);return n/e.width>r/e.height?Up.HORIZONTAL:Up.VERTICAL},jd=function(t,e,n){var r=Md(n,e);return r===Up.HORIZONTAL?{x:n.x>t.centerX?t.maxX:t.minX,y:n.y}:{x:n.x,y:n.y>t.centerY?t.maxY:t.minY}},Td=function(t,e){var n=Math.min(t.minX,e.minX),r=Math.min(t.minY,e.minY),o=Math.max(t.maxX,e.maxX),i=Math.max(t.maxY,e.maxY);return{x:(n+o)/2,y:(r+i)/2,centerX:(n+o)/2,centerY:(r+i)/2,minX:n,minY:r,maxX:o,maxY:i,height:i-r,width:o-n}},Pd=function(t,e){void 0===t&&(t=[]);var n=[],r=[];t.forEach((function(t){n.push(t.x),r.push(t.y)}));var o=Math.min.apply(Math,Od([],Ed(n),!1)),i=Math.max.apply(Math,Od([],Ed(n),!1)),a=Math.min.apply(Math,Od([],Ed(r),!1)),s=Math.max.apply(Math,Od([],Ed(r),!1)),u=i-o,l=s-a;return e&&(u+=e,l+=e),{centerX:(o+i)/2,centerY:(a+s)/2,maxX:i,maxY:s,minX:o,minY:a,x:(o+i)/2,y:(a+s)/2,height:l,width:u}},Dd=function(t){var e=t.minX,n=t.minY,r=t.maxX,o=t.maxY;return[{x:e,y:n},{x:r,y:n},{x:r,y:o},{x:e,y:o}]},Nd=function(t,e){var n=t.x,r=t.y;return n<e.minX||n>e.maxX||r<e.minY||r>e.maxY},Cd=function(t,e){return e<t.minX||e>t.maxX?[]:[{x:e,y:t.minY},{x:e,y:t.maxY}]},Rd=function(t,e){return e<t.minY||e>t.maxY?[]:[{x:t.minX,y:e},{x:t.maxX,y:e}]},Ld=function(t,e){return Od(Od([],Ed(Cd(t,e.x)),!1),Ed(Rd(t,e.y)),!1)},Id=function(t,e){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)},kd=function(t,e){var n=-2,r=0;return e.forEach((function(e){e&&(t.x===e.x&&(r+=n),t.y===e.y&&(r+=n))})),r},Bd=function(t,e,n,r,o){return Id(t,e)+Id(t,n)+kd(t,[e,n,r,o])},Xd=function(t,e,n,r,o){o||(o=0),t.unshift(e[r]),n[r]&&n[r]!==r&&o<=100&&Xd(t,e,n,n[r],o+1)},zd=function(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)},Hd=function(t,e,n,r){var o=e.x-t.x,i=e.y-t.y,a=r.x-n.x,s=r.y-n.y,u=(-i*(t.x-n.x)+o*(t.y-n.y))/(-a*i+o*s),l=(a*(t.y-n.y)-s*(t.x-n.x))/(-a*i+o*s);return u>=0&&u<=1&&l>=0&&l<=1},Ud=function(t,e,n){if(0===n.width&&0===n.height)return!1;var r=Ed(Dd(n),4),o=r[0],i=r[1],a=r[2],s=r[3];return Hd(t,e,o,i)||Hd(t,e,o,s)||Hd(t,e,i,a)||Hd(t,e,a,s)},Gd=function(t,e,n,r){var o=[];return t.forEach((function(t){t!==e&&(t.x!==e.x&&t.y!==e.y||Ud(t,e,n)||Ud(t,e,r)||o.push(t))})),Ad(o)},Yd=function(t,e,n,r,o,i,a){var s=[],u=[e],l={},c={},p={};e.id&&(c[e.id]=0,p[e.id]=Bd(e,n,e));var d={};t.forEach((function(t){t.id&&(d[t.id]=t)}));var f=function(){var f,h=1/0;if(u.forEach((function(t){t.id&&p[t.id]<h&&(h=p[t.id],f=t)})),f===n&&n.id){var y=[];return Xd(y,d,l,n.id),{value:y}}if(!f)return{value:[e,n]};zd(u,f),s.push(f),Gd(t,f,r,o).forEach((function(t){if(-1===s.indexOf(t)&&(-1===u.indexOf(t)&&u.push(t),(null===f||void 0===f?void 0:f.id)&&(null===t||void 0===t?void 0:t.id))){var r=p[f.id]+Id(f,t);if(c[t.id]&&r>=c[t.id])return;l[t.id]=f.id,c[t.id]=r,p[t.id]=c[t.id]+Bd(t,n,e,i,a)}}))};while(u.length){var h=f();if("object"===typeof h)return h.value}return[e,n]},Vd=function(t){return Hf(t)},Fd=function(t){var e=1;while(e<t.length-1){var n=t[e-1],r=t[e],o=t[e+1];n.x===r.x&&r.x===o.x||n.y===r.y&&r.y===o.y?t.splice(e,1):e++}return t},Wd=function(t,e,n,r,o){var i=Vd(n),a=Vd(r),s=Sd(i,o),u=Sd(a,o),l=jd(s,i,t),c=jd(u,a,e);if(wd(s,u)){var p=tf(t,e,l,c);return Od(Od([t,l],Ed(p),!1),[c,e],!1)}var d=Pd([l,c]),f=Td(s,d),h=Td(u,d),y=[];y=y.concat(Dd(f)),y=y.concat(Dd(h));var v={x:(t.x+e.x)/2,y:(t.y+e.y)/2};[d,f,h].forEach((function(t){y=y.concat(Ld(t,v).filter((function(t){return Nd(t,s)&&Nd(t,u)})))})),[{x:l.x,y:c.y},{x:c.x,y:l.y}].forEach((function(t){Nd(t,s)&&Nd(t,u)&&y.push(t)})),y.unshift(l),y.push(c),y=Ad(y);var g=Yd(y,l,c,i,a,t,e);return g.unshift(t),g.push(e),g.length>2&&(g=Fd(g)),Ad(g)},Kd=function(t){if(1===t.length){var e=Ed(t,1),n=e[0];return[n,n]}for(var r=t[0],o=t[1],i=Bf(r.x,r.y,o.x,o.y),a=1;a<t.length-1;a++){var s=t[a],u=t[a+1],l=Bf(s.x,s.y,u.x,u.y);l>i&&(i=l,r=s,o=u)}return[r,o]},Zd=function(t,e,n){var r=Xf(t,n),o=Xf(e,n);return r&&o},qd=function(t,e,n){var r=Xf(t,n),o=Xf(e,n),i=r&&o,a=r||o;return!i&&a},$d=function(t,e,n){for(var r=void 0,o=Hf(n),i=Dd(o),a=0;a<i.length;a++){var s=Hd(t,e,i[a],i[(a+1)%i.length]);s&&(r=[i[a],i[(a+1)%i.length]])}if(r)return md(t,e,r[0],r[1])},Jd=function(t,e){var n=void 0;return t.x===e.x?n=Up.VERTICAL:t.y===e.y&&(n=Up.HORIZONTAL),n},Qd=function(t){var e=t.split(" "),n=[];return e&&e.forEach((function(t){var e=Ed(t.split(","),2),r=e[0],o=e[1];n.push({x:Number(r),y:Number(o)})})),n},tf=function(t,e,n,r){var o=[],i=Jd(t,n),a=Jd(e,r);if(i===a)t.y===n.y?(o.push({x:n.x,y:(n.y+r.y)/2}),o.push({x:r.x,y:(n.y+r.y)/2})):(o.push({x:(n.x+r.x)/2,y:n.y}),o.push({x:(n.x+r.x)/2,y:r.y}));else{var s={x:n.x,y:r.y},u=_d(s,t,n),l=_d(s,e,r);if(u||l)s={x:r.x,y:n.y};else{var c=ef(s,t,n),p=ef(s,e,r);c&&p&&(s={x:r.x,y:n.y})}o.push(s)}return o},ef=function(t,e,n){return t.x===e.x&&t.x===n.x||t.y===e.y&&t.y===n.y},nf=function(t){if(!t)return 0;for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);t.match(/[A-Z]/)?e+=1.5:e+=r>=1&&r<=126||r>=65376&&r<=65439?1:2}return e},rf=function(t){var e,n=t.start,r=t.end;if(n.x===r.x&&n.y===r.y)e="";else{var o={start:n,end:r,offset:10,verticalLength:5},i=bd(xd(xd({},o),{type:"start"})),a=bd(xd(xd({},o),{type:"end"}));e="M".concat(i.leftX," ").concat(i.leftY,"\n    L").concat(i.rightX," ").concat(i.rightY,"\n    L").concat(a.rightX," ").concat(a.rightY,"\n    L").concat(a.leftX," ").concat(a.leftY," z")}return{d:e,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}},of=function(t){var e=t.start,n=t.end,r=t.sourceNode,o=t.targetNode,i=t.offset,a=Hf(r),s=Hf(o),u=Sd(a,i),l=Sd(s,i),c=jd(u,a,e),p=jd(l,s,n);return{sNext:c,ePre:p}},af=function(t){var e=t.replace(/M/g,"").replace(/C/g,",").split(","),n=sf(e[0]),r=sf(e[1]),o=sf(e[2]),i=sf(e[3]);return[n,r,o,i]},sf=function(t){var e=Ed(t.replace(/(^\s*)/g,"").split(" "),2),n=e[0],r=e[1];return{x:+n,y:+r}},uf=function(t,e){var n=Ed(t,4),r=n[0],o=n[1],i=n[2],a=n[3],s=Ey(r,o,i,a,e);return[s,t[3]]},lf=function(t,e){for(var n,r=t.x,o=t.y,i=Qd(e),a=Number.MAX_SAFE_INTEGER,s=[],u=0;u<i.length;u++)s.push({start:i[u],end:i[(u+1)%i.length]});if(s.forEach((function(t){var e=t.start,i=t.end;if(e.x===i.x){var s={x:e.x,y:o},u=_d(s,e,i);if(u){var l=Math.abs(e.x-r);l<a&&(a=l,n=s)}}else if(e.y===i.y){s={x:r,y:e.y},u=_d(s,e,i);if(u){l=Math.abs(e.y-o);l<a&&(a=l,n=s)}}})),!n){var l=s[0],c=l.start,p=l.end;n={x:c.x+(p.x-c.x)/2,y:c.y+(p.y-c.y)/2}}return n},cf=function(t){return dd(t,["id","type","sourceNodeId","sourceAnchorId","targetNodeId","targetAnchorId","pointsList","startPoint","endPoint","properties"])},pf=function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))};function df(t,e){return"function"!==typeof e?function(e,n,r){return Object.assign({type:t.edgeType},r)}:function(n,r,o){var i=e(n,r,o);return i?"string"===typeof i?Object.assign({},o,{type:i}):Object.assign({type:i},o):{type:t.edgeType}}}var ff=function(t){var e=t.rows,n=t.rowsLength,r=t.fontSize,o=0;return $n(e,(function(t){var e=nf(t);o=e>o?e:o})),{width:Math.ceil(o/2)*r+r/4,height:n*(r+2)+r/4}},hf=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(r=i.next()).done)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(o)throw o.error}}return a},yf=function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};function vf(t,e,n){return n&&e*Math.round(t/e)||t}function gf(t,e,n){if(!t)return[];var r=Math.min.apply(Math,yf([],hf(t.map((function(t){return t[0]}))),!1)),o=Math.max.apply(Math,yf([],hf(t.map((function(t){return t[0]}))),!1)),i=Math.min.apply(Math,yf([],hf(t.map((function(t){return t[1]}))),!1)),a=Math.max.apply(Math,yf([],hf(t.map((function(t){return t[1]}))),!1)),s=-r,u=-i,l=t.map((function(t){var e=hf(t,2),n=e[0],r=e[1];return[n+s,r+u]})),c=o-r,p=a-i,d=e?e/c:1,f=n?n/p:1,h=Math.min(d,f);return l.map((function(t){var e=hf(t,2),n=e[0],r=e[1];return[n*h,r*h]}))}var mf=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(r=i.next()).done)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(o)throw o.error}}return a},_f=function(t,e,n){var r=mf(t,2),o=r[0],i=r[1],a=mf(e,2),s=a[0],u=a[1],l=mf(n,2),c=l[0],p=l[1];return o>s&&o<c&&i>u&&i<p},bf=function(t,e){var n=e.multipleSelectKey,r=!1;switch(n){case"meta":r=t.metaKey;break;case"alt":r=t.altKey;break;case"shift":r=t.shiftKey;break;case"ctrl":r=t.ctrlKey;break;default:r=!1;break}return r},xf=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function Ef(t,e){return!!(t instanceof wf&&e instanceof wf)}var Of=function(t){function e(n,r,o){var i=t.call(this,3)||this;return i[0]=n,i[1]=r,i[2]=o,i.x=n,i.y=r,i.z=o,Object.setPrototypeOf(i,e.prototype),i}return xf(e,t),e.prototype.add=function(t){if(Ef(this,t))return new wf(this.x+t.x,this.y+t.y);var e=this.z+t.z;return new Af((this.x+t.x)/e,(this.y+t.y)/e)},e.prototype.subtract=function(t){if(Ef(this,t))return new wf(this.x-t.x,this.y-t.y);var e=this.z-t.z;return 0===e?new wf(this.x-t.x,this.y-t.y):new Af((this.x-t.x)/e,(this.y-t.y)/e)},e}(Array),wf=function(t){function e(n,r,o){var i=t.call(this,n,r,null!==o&&void 0!==o?o:0)||this;return Object.setPrototypeOf(i,e.prototype),i}return xf(e,t),e.prototype.toString=function(){return"Vector"},e.prototype.dot=function(t){var e=this;return t.reduce((function(t,n,r){return t+n*e[r]}))},e.prototype.cross=function(t){return new e(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)},e.prototype.getLength=function(){return Math.hypot(this.x,this.y)},e.prototype.normalize=function(){var t=this.getLength();return new e(this.x/t,this.y/t)},e.prototype.crossZ=function(t){return this.x*t.y-this.y*t.x},e.prototype.angle=function(t){var e=this.crossZ(t),n=Math.acos(this.normalize().dot(t.normalize()));return e>=0?n:-n},e}(Of),Af=function(t){function e(n,r){var o=t.call(this,n,r,1)||this;return Object.setPrototypeOf(o,e.prototype),o}return xf(e,t),e.prototype.toString=function(){return"Point"},e}(Of),Sf=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Mf=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(r=i.next()).done)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(o)throw o.error}}return a},jf=function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))},Tf=function(t){function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=t.call(this,n.length)||this;return o.fill(new Array(3)),n.forEach((function(t,e){o[e]=t})),o.columns=n[0].length,o.rows=n.length,Object.setPrototypeOf(o,e.prototype),o}return Sf(e,t),e.prototype.getRow=function(t){return this[t]},e.prototype.getColumn=function(t){return jf([],Mf(this.map((function(e){return e[t]}))),!1)},e.prototype.transpose=function(){for(var t=[],n=0;n<this.columns;n++)t.push(this.getColumn(n));return new(e.bind.apply(e,jf([void 0],Mf(t),!1)))},e.prototype.cross=function(t){var n=new Array(this.rows).fill("").map((function(){return[]}));if(this.columns===t.rows)for(var r=0;r<this.rows;r++)for(var o=this.getRow(r),i=function(e){var i=t.getColumn(e);n[r][e]=o.reduce((function(t,e,n){return t+e*i[n]}),0)},a=0;a<t.columns;a++)i(a);return new(e.bind.apply(e,jf([void 0],Mf(n),!1)))},e.prototype.to2D=function(){return this.map((function(t){return[t[0],t[1]]}))},e.prototype.toPoints=function(){return this.map((function(t){return new Af(t[0],t[1])}))},e.prototype.toString=function(){var t=Mf(this[0],2),e=t[0],n=t[1],r=Mf(this[1],2),o=r[0],i=r[1],a=Mf(this[2],2),s=a[0],u=a[1];return"matrix(".concat(e," ").concat(n," ").concat(o," ").concat(i," ").concat(s," ").concat(u,")")},e.prototype.translate=function(t,e){return this.cross(new Nf(t,e))},e.prototype.rotate=function(t){return this.cross(new Pf(t))},e.prototype.scale=function(t,e){return this.cross(new Df(t,e))},e}(Array),Pf=function(t){function e(n){var r=t.call(this,new wf(+Math.cos(n).toFixed(2),+Math.sin(n).toFixed(2),0),new wf(-Math.sin(n).toFixed(2),+Math.cos(n).toFixed(2),0),new wf(0,0,1))||this;return Object.setPrototypeOf(r,e.prototype),r}return Sf(e,t),e.prototype.inverse=function(){return this.transpose()},e}(Tf),Df=function(t){function e(n,r){var o=t.call(this,new wf(n,0,0),new wf(0,r,0),new wf(0,0,1))||this;return o.sx=n,o.sy=r,Object.setPrototypeOf(o,e.prototype),o}return Sf(e,t),e.prototype.inverse=function(){return new e(1/this.sx,1/this.sy)},e}(Tf),Nf=function(t){function e(n,r){var o=t.call(this,new wf(1,0,0),new wf(0,1,0),new wf(n,r,1))||this;return o.tx=n,o.ty=r,Object.setPrototypeOf(o,e.prototype),o}return Sf(e,t),e.prototype.inverse=function(){return new e(-this.tx,-this.ty)},e}(Tf);Object(up["m"])({isolateGlobalState:!0});var Cf=function(){return Cf=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Cf.apply(this,arguments)},Rf=function(t){var e=t.anchors;return e},Lf=function(t,e){for(var n,r=e.nodes,o=r.length-1;o>=0;o--){var i=r[o],a=zf(t,i);if(a){var s=i.getTargetAnchor(t);if(s){var u={node:i,anchorIndex:s.index,anchor:s.anchor};n&&!If(i,n.node,e)||(n=u)}}}return n},If=function(t,e,n){return t.zIndex>e.zIndex||n.nodesMap[t.id].index>n.nodesMap[e.id].index},kf=function(t,e){for(var n,r=Rf(e),o=Number.MAX_SAFE_INTEGER,i=0;i<r.length;i++){var a=Bf(t.x,t.y,r[i].x,r[i].y);a<o&&(o=a,n={index:i,anchor:Cf(Cf({},r[i]),{x:r[i].x,y:r[i].y,id:r[i].id})})}return n},Bf=function(t,e,n,r){return Math.hypot(t-n,e-r)},Xf=function(t,e){var n=!1,r=0,o=Hf(e);return t.x>=o.minX-r&&t.x<=o.maxX+r&&t.y>=o.minY-r&&t.y<=o.maxY+r&&(n=!0),n},zf=function(t,e){var n=!1,r=5,o=Hf(e);return t.x>=o.minX-r&&t.x<=o.maxX+r&&t.y>=o.minY-r&&t.y<=o.maxY+r&&(n=!0),n},Hf=function(t){var e=t.x,n=t.y,r=t.width,o=t.height;return{minX:e-r/2,minY:n-o/2,maxX:e+r/2,maxY:n+o/2,x:e,y:n,width:r,height:o,centerX:e,centerY:n}},Uf=function(t){var e=t,n=e.x,r=e.y,o=e.width,i=e.height,a=e.radius;return[{x:n-o/2+a,y:r-i/2+a,r:a},{x:n+o/2-a,y:r-i/2+a,r:a},{x:n-o/2+a,y:r+i/2-a,r:a},{x:n+o/2-a,y:r+i/2-a,r:a}]},Gf=function(t,e,n){var r,o=Uf(n),i=Number.MAX_SAFE_INTEGER;return o.forEach((function(e){var n=Bf(t.x,t.y,e.x,e.y);n<i&&(i=n,r=e)})),Yf(t,e,r)},Yf=function(t,e,n){var r,o=n.x,i=n.y,a=n.r;if(e===Up.HORIZONTAL){var s=o-Math.sqrt(a*a-(t.y-i)*(t.y-i)),u=o+Math.sqrt(a*a-(t.y-i)*(t.y-i)),l=Math.abs(s-t.x)<Math.abs(u-t.x)?s:u;r={x:l,y:t.y}}else if(e===Up.VERTICAL){var c=i-Math.sqrt(a*a-(t.x-o)*(t.x-o)),p=i+Math.sqrt(a*a-(t.x-o)*(t.x-o)),d=Math.abs(c-t.y)<Math.abs(p-t.y)?c:p;r={x:t.x,y:d}}return r},Vf=function(t,e){var n=e,r=!1,o=n.x,i=n.y,a=n.width,s=n.height,u=n.radius,l={minX:o-a/2+u,maxX:o+a/2-u,minY:i-s/2+u,maxY:i+s/2-u};return t.y===i+s/2||t.y===i-s/2?r=t.x>l.minX&&t.x<l.maxX:t.x!==o+a/2&&t.x!==o-a/2||(r=t.y>l.minY&&t.y<l.maxY),r},Ff=function(t,e,n){var r,o=n,i=o.x,a=o.y,s=o.rx,u=o.ry;if(e===Up.HORIZONTAL){var l=i-Math.sqrt(s*s-(t.y-a)*(t.y-a)*s*s/(u*u)),c=i+Math.sqrt(s*s-(t.y-a)*(t.y-a)*s*s/(u*u)),p=Math.abs(l-t.x)<Math.abs(c-t.x)?l:c;r={x:p,y:t.y}}else if(e===Up.VERTICAL){var d=a-Math.sqrt(u*u-(t.x-i)*(t.x-i)*u*u/(s*s)),f=a+Math.sqrt(u*u-(t.x-i)*(t.x-i)*u*u/(s*s)),h=Math.abs(d-t.y)<Math.abs(f-t.y)?d:f;r={x:t.x,y:h}}return r},Wf=function(t,e,n){for(var r,o=n.pointsPosition,i=Number.MAX_SAFE_INTEGER,a=[],s=0;s<o.length;s++)a.push({start:o[s],end:o[(s+1)%o.length]});return a.forEach((function(n){var o=n.start,a=n.end,s=o,u=a;o.x>a.x&&(s=a,u=o);var l={x:t.x,y:t.y};if(s.x===u.x&&e===Up.HORIZONTAL&&(l={x:s.x,y:t.y}),s.y===u.y&&e===Up.VERTICAL&&(l={x:t.x,y:s.y}),s.x!==u.x&&s.y!==u.y){var c=(u.y-s.y)/(u.x-s.x),p=(s.x*u.y-u.x*s.y)/(s.x-u.x);e===Up.HORIZONTAL?l={x:(t.y-p)/c,y:t.y}:e===Up.VERTICAL&&(l={x:t.x,y:c*t.x+p})}var d=_d(l,o,a);if(d){var f=Bf(l.x,l.y,t.x,t.y);f<i&&(i=f,r=l)}})),r},Kf=function(t){var e=dd(t,["id","type","x","y","text","label","properties","virtual","rotate","resizable","rotatable"]);return e},Zf=function(t,e,n,r){var o=t.x,i=t.y;return e.x>t.x?o=t.x+n/2:e.x<t.x&&(o=t.x-n/2),e.y>t.y?i=t.y+r/2:e.y<t.y&&(i=t.y-r/2),{x:o,y:i}},qf=function(t){var e=t.rows,n=t.style,r=t.rowsLength,o=t.className,i=document.createElement("div");i.className=o,i.style.fontSize="".concat(n.fontSize),i.style.width="".concat(n.width),i.style.lineHeight="".concat(n.lineHeight),i.style.padding="".concat(n.padding),n.fontFamily&&(i.style.fontFamily="".concat(n.fontFamily)),r>1?e.forEach((function(t){var e=document.createElement("div");e.textContent=t,i.appendChild(e)})):i.textContent=e[0],document.body.appendChild(i);var a=i.clientHeight;return document.body.removeChild(i),a},$f=function(t){var e=t.rows,n=t.rowsLength,r=t.fontSize,o=0;return e&&e.forEach((function(t){var e=nf(t);o=e>o?e:o})),{width:Math.ceil(o/2)*r+r/4,height:n*(r+2)+r/4}},Jf=function(t){return"object"!==typeof t?{isAllPass:!!t,msg:t?"":"不允许连接"}:t};const Qf="undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var th={randomUUID:Qf};let eh;const nh=new Uint8Array(16);function rh(){if(!eh&&(eh="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!eh))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return eh(nh)}const oh=[];for(let Pb=0;Pb<256;++Pb)oh.push((Pb+256).toString(16).slice(1));function ih(t,e=0){return oh[t[e+0]]+oh[t[e+1]]+oh[t[e+2]]+oh[t[e+3]]+"-"+oh[t[e+4]]+oh[t[e+5]]+"-"+oh[t[e+6]]+oh[t[e+7]]+"-"+oh[t[e+8]]+oh[t[e+9]]+"-"+oh[t[e+10]]+oh[t[e+11]]+oh[t[e+12]]+oh[t[e+13]]+oh[t[e+14]]+oh[t[e+15]]}function ah(t,e,n){if(th.randomUUID&&!e&&!t)return th.randomUUID();t=t||{};const r=t.random||(t.rng||rh)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(let t=0;t<16;++t)e[n+t]=r[t];return e}return ih(r)}var sh=ah,uh=function(){return sh()},lh=new Map,ch=function(t){var e=uh();function n(){t();var r=lh.get(e);if(r){var o=window.requestAnimationFrame(n);lh.set(e,o)}}var r=window.requestAnimationFrame(n);return lh.set(e,r),e},ph=function(t){var e=lh.get(t);e&&(window.cancelAnimationFrame(e),lh.delete(t))};function dh(t,e){var n=-1,r=kn(t)?Array(t.length):[];return Vn(t,(function(t,o,i){r[++n]=e(t,o,i)})),r}var fh=dh;function hh(t,e){var n=we(t)?mc:fh;return n(t,Jc(e,3))}var yh=hh;function vh(t,e){return mc(e,(function(e){return[e,t[e]]}))}var gh=vh;function mh(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}var _h=mh,bh="[object Map]",xh="[object Set]";function Eh(t){return function(e){var n=ea(e);return n==bh?cl(e):n==xh?_h(e):gh(e,t(e))}}var Oh=Eh,wh=Oh(Xn),Ah=wh,Sh=function(){return Sh=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Sh.apply(this,arguments)},Mh=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(r=i.next()).done)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(o)throw o.error}}return a};function jh(t){var e=t.x,n=void 0===e?0:e,r=t.y,o=void 0===r?0:r,i=t.value,a=t.fontSize,s=void 0===a?12:a,u=t.fill,l=void 0===u?"currentColor":u,c=t.overflowMode,p=void 0===c?"default":c,d=t.textWidth,f=void 0===d?void 0:d,h=t.model,y={x:n,y:o,fill:l,fontSize:s,textAnchor:"middle",dominantBaseline:"central"};if($n(Ah(t),(function(t){var e=Mh(t,2),n=e[0],r=e[1];"object"!==typeof r&&(y[n]=r)})),i){var v=String(i).split(/[\r\n]/g),g=v.length;if("default"!==p){var m=h.BaseType,_=h.modelType;if(m===Bp.NODE&&_!==Xp.TEXT_NODE||m===Bp.EDGE&&f)return Th(t)}if(g>1){var b=v.map((function(t,e){var r=s+2,i=(e-(g-1)/2)*r;return zt("tspan",{className:"lf-text-tspan",x:n,y:o+i,children:t})}));return zt("text",Sh({},y,{children:b}))}return zt("text",Sh({},y,{children:i}))}return null}function Th(t){var e=t.x,n=t.y,r=t.value,o=t.model,i=t.textWidth,a=t.fontSize,s=void 0===a?12:a,u=t.lineHeight,l=t.fontFamily,c=void 0===l?"":l,p=t.wrapPadding,d=void 0===p?"0, 0":p,f=t.overflowMode,h=o.width,y=o.height,v=o.textHeight,g=i||h,m=String(r).split(/[\r\n]/g),_=m.length,b=qf({rows:m,style:{fontSize:"".concat(s,"px"),width:"".concat(g,"px"),fontFamily:c,lineHeight:u,padding:d},rowsLength:_,className:"lf-get-text-height"}),x=y>b?y:b;v&&(x=v);var E="ellipsis"===f;return E&&(x=s+2),zt("g",{children:zt("foreignObject",{width:g,height:x,x:e-g/2,y:n-x/2,style:{overflow:"visible",textAlign:"left"},children:zt("div",{className:"lf-node-text-auto-wrap",style:{minHeight:x,width:g,padding:d},children:zt("div",{className:E?"lf-node-text-ellipsis-content":"lf-node-text-auto-wrap-content",title:E?m.join(""):"",style:Sh({},t),children:m.map((function(t){return zt("div",{className:"lf-node-text--auto-wrap-inner",children:t})}))})})})})}var Ph=function(){return Ph=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Ph.apply(this,arguments)},Dh=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(r=i.next()).done)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(o)throw o.error}}return a};function Nh(t){var e={x1:10,y1:10,x2:20,y2:20,stroke:"black"};return $n(Ah(t),(function(t){var n=Dh(t,2),r=n[0],o=n[1];("style"===r||"object"!==typeof o)&&(e[r]=o)})),zt("line",Ph({},e))}var Ch=Nh,Rh=function(){return Rh=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Rh.apply(this,arguments)},Lh=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(r=i.next()).done)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(o)throw o.error}}return a};function Ih(t){var e=t.x,n=t.y,r=t.width,o=t.height,i=t.className,a=t.strokeWidth,s=t.radius,u=void 0===s?0:s,l=e-r/2,c=n-o/2,p={};return p["stroke-width"]=a,$n(Ah(t),(function(t){var e=Lh(t,2),n=e[0],r=e[1];"object"!==typeof r&&(p[n]=r)})),p.className=i?"lf-basic-shape ".concat(i):"lf-basic-shape",u&&(p.rx=u,p.ry=u),p.x=l,p.y=c,zt("rect",Rh({},p))}var kh=Ih,Bh=function(){return Bh=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Bh.apply(this,arguments)},Xh=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(r=i.next()).done)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(o)throw o.error}}return a};function zh(t){var e={d:""};return $n(Ah(t),(function(t){var n=Xh(t,2),r=n[0],o=n[1];"style"!==r&&"object"===typeof o||(e[r]=o)})),zt("path",Bh({},e))}var Hh=function(){return Hh=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Hh.apply(this,arguments)},Uh=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(r=i.next()).done)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(o)throw o.error}}return a};function Gh(t){var e=t.x,n=void 0===e?0:e,r=t.y,o=void 0===r?0:r,i=t.r,a=void 0===i?4:i,s=t.className,u={cx:n,cy:o,r:a,fill:"transparent",fillOpacity:1,strokeWidth:1,stroke:"#000",strokeOpacity:1};return $n(Ah(t),(function(t){var e=Uh(t,2),n=e[0],r=e[1];"object"!==typeof r&&(u[n]=r)})),u.className=s?"lf-basic-shape ".concat(s):"lf-basic-shape",zt("circle",Hh({},u))}var Yh=Gh,Vh=function(){return Vh=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Vh.apply(this,arguments)},Fh=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(r=i.next()).done)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(o)throw o.error}}return a};function Wh(t){var e=t.x,n=void 0===e?0:e,r=t.y,o=void 0===r?0:r,i=t.rx,a=void 0===i?4:i,s=t.ry,u=void 0===s?4:s,l=t.className,c={cx:n,cy:o,rx:a,ry:u,fill:"transparent",fillOpacity:1,strokeWidth:1,stroke:"#000",strokeOpacity:1};return $n(Ah(t),(function(t){var e=Fh(t,2),n=e[0],r=e[1];"object"!==typeof r&&(c[n]=r)})),c.className=l?"lf-basic-shape ".concat(l):"lf-basic-shape",zt("ellipse",Vh({},c))}var Kh=Wh,Zh=function(){return Zh=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Zh.apply(this,arguments)},qh=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(r=i.next()).done)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(o)throw o.error}}return a};function $h(t){var e=t.points,n=void 0===e?[]:e,r=t.className,o={fill:"transparent",fillOpacity:1,strokeWidth:1,stroke:"#000",strokeOpacity:1,points:""};return $n(Ah(t),(function(t){var e=qh(t,2),n=e[0],r=e[1];"object"!==typeof r&&(o[n]=r)})),r?o.classNmae="lf-basic-shape ".concat(r):o.className="lf-basic-shape",o.points=n.map((function(t){return t.join(",")})).join(" "),zt("polygon",Zh({},o))}var Jh=$h,Qh=function(){return Qh=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Qh.apply(this,arguments)},ty=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(r=i.next()).done)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(o)throw o.error}}return a};function ey(t){var e=t.className,n={points:"",fill:"none"};return $n(Ah(t),(function(t){var e=ty(t,2),r=e[0],o=e[1];("style"===r||"object"!==typeof o)&&(n[r]=o)})),e&&(n.className="".concat(e)),zt("polyline",Qh({},n))}var ny,ry=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),oy=function(){return oy=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},oy.apply(this,arguments)},iy=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n},ay=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(r=i.next()).done)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(o)throw o.error}}return a};(function(t){t[t["LEFT_TOP"]=0]="LEFT_TOP",t[t["RIGHT_TOP"]=1]="RIGHT_TOP",t[t["RIGHT_BOTTOM"]=2]="RIGHT_BOTTOM",t[t["LEFT_BOTTOM"]=3]="LEFT_BOTTOM"})(ny||(ny={}));var sy=function(t){function e(e){var n=t.call(this)||this;n.updateEdgePointByAnchors=function(){var t=n.nodeModel,e=t.id,r=t.anchors,o=n.graphModel.getNodeEdges(e);$n(o,(function(t){if(t.sourceNodeId===e){var n=ip(r,(function(e){return e.id===t.sourceAnchorId}));n&&t.updateStartPoint({x:n.x,y:n.y})}else if(t.targetNodeId===e){n=ip(r,(function(e){return e.id===t.targetAnchorId}));n&&t.updateEndPoint({x:n.x,y:n.y})}}))},n.triggerResizeEvent=function(t,e,r,o,i,a){n.graphModel.eventCenter.emit(zp.NODE_RESIZE,{preData:t,data:e,deltaX:r,deltaY:o,index:i,model:a})},n.recalcResizeInfo=function(t,e,n,r,o){void 0===n&&(n=1),void 0===r&&(r=!1),void 0===o&&(o=!1);var i=zs(e),a=i.deltaX,s=i.deltaY,u=i.width,l=i.height,c=i.PCTResizeInfo;if(c){var p=4,d=0,f=0;switch(t){case ny.LEFT_TOP:f=(-1*a-s)/p;break;case ny.RIGHT_TOP:f=(a-s)/p;break;case ny.RIGHT_BOTTOM:f=(a+s)/p;break;case ny.LEFT_BOTTOM:f=(-1*a+s)/p;break;default:break}0!==f&&(d=Math.round(f/c.ResizeBasis.basisHeight*1e5)/1e3),c.ResizePCT.widthPCT=Math.max(Math.min(c.ResizePCT.widthPCT+d,c.ScaleLimit.maxScaleLimit),c.ScaleLimit.minScaleLimit),c.ResizePCT.heightPCT=Math.max(Math.min(c.ResizePCT.heightPCT+d,c.ScaleLimit.maxScaleLimit),c.ScaleLimit.minScaleLimit);var h=Math.round(c.ResizePCT.widthPCT*c.ResizeBasis.basisWidth/100),y=Math.round(c.ResizePCT.heightPCT*c.ResizeBasis.basisHeight/100);switch(t){case ny.LEFT_TOP:a=u-h,s=l-y;break;case ny.RIGHT_TOP:a=h-u,s=l-y;break;case ny.RIGHT_BOTTOM:a=h-u,s=y-l;break;case ny.LEFT_BOTTOM:a=u-h,s=y-l;break;default:break}return i}switch(t){case ny.LEFT_TOP:i.width=r?u:u-a*n,i.height=o?l:l-s*n;break;case ny.RIGHT_TOP:i.width=r?u:u+a*n,i.height=o?l:l-s*n;break;case ny.RIGHT_BOTTOM:i.width=r?u:u+a*n,i.height=o?l:l+s*n;break;case ny.LEFT_BOTTOM:i.width=r?u:u-a*n,i.height=o?l:l+s*n;break;default:break}return i},n.resizeNode=function(t){var e=t.deltaX,r=t.deltaY,o=n.index,i=n.props,a=i.model,s=i.graphModel,u=i.x,l=i.y;my({x:u,y:l,deltaX:e,deltaY:r,index:o,nodeModel:a,graphModel:s,cancelCallback:function(){n.dragHandler.cancelDrag()}})},n.onDragging=function(t){var e=t.deltaX,r=t.deltaY,o=n.graphModel.transformModel,i=ay(o.fixDeltaXY(e,r),2),a=i[0],s=i[1];n.resizeNode({deltaX:a,deltaY:s})},n.onDragEnd=function(){var t=n.nodeModel.x,e=n.nodeModel.y;n.nodeModel.moveTo(t,e),n.updateEdgePointByAnchors()};var r=e.index,o=e.model,i=e.graphModel;return n.index=r,n.nodeModel=o,n.graphModel=i,n.dragHandler=new Zp({onDragging:n.onDragging,onDragEnd:n.onDragEnd,step:i.gridSize}),n}return ry(e,t),e.prototype.componentWillUnmount=function(){this.dragHandler.destroy()},e.prototype.render=function(){var t=this.props,e=t.x,n=t.y,r=t.direction,o=t.model,i=o.getResizeControlStyle(),a=i.width,s=i.height,u=iy(i,["width","height"]);return zt("g",{className:"lf-resize-control lf-resize-control-".concat(r),children:[zt(Ih,oy({className:"lf-resize-control-content",x:e,y:n,width:null!==a&&void 0!==a?a:7,height:null!==s&&void 0!==s?s:7},u)),zt(Ih,{className:"lf-resize-control-content",x:e,y:n,width:25,height:25,fill:"transparent",stroke:"transparent",onMouseDown:this.dragHandler.handleMouseDown})]})},e}(u["a"]),uy=function(t){function e(){return t.call(this)||this}return ry(e,t),e.prototype.getResizeControl=function(){var t=this.props,e=t.model,n=t.graphModel,r=Hf(e),o=r.minX,i=r.minY,a=r.maxX,s=r.maxY,u=[{index:ny.LEFT_TOP,direction:"nw",x:o,y:i},{index:ny.RIGHT_TOP,direction:"ne",x:a,y:i},{index:ny.RIGHT_BOTTOM,direction:"se",x:a,y:s},{index:ny.LEFT_BOTTOM,direction:"sw",x:o,y:s}];return yh(u,(function(t){return zt(sy,oy({},t,{model:e,graphModel:n}))}))},e.prototype.getResizeOutline=function(){var t=this.props.model,e=t.x,n=t.y,r=t.width,o=t.height,i=t.getResizeOutlineStyle();return zt(Ih,oy({},i,{x:e,y:n,width:r,height:o}))},e.prototype.render=function(){return zt("g",{className:"lf-resize-control-group",children:[this.getResizeOutline(),this.getResizeControl()]})},e}(u["a"]),ly=uy;function cy(t,e){var n=t.x,r=t.y,o=e.x,i=e.y,a={x:n+(o-n)/2,y:r+(i-r)/2};return a}function py(t,e,n){var r=dy(n),o=t.x-e.x,i=t.y-e.y,a=o*Math.cos(r)-i*Math.sin(r)+e.x,s=o*Math.sin(r)+i*Math.cos(r)+e.y;return{x:a,y:s}}function dy(t){return t*Math.PI/180}function fy(t){return t/Math.PI*180}function hy(t,e,n,r,o,i,a,s,u){void 0===s&&(s=!1),void 0===u&&(u=!1);var l=e.deltaX,c=e.deltaY,p=e.width,d=e.height,f=fy(n),h={x:r,y:o},y={x:i,y:a},v=py(h,y,f),g={x:v.x+l,y:v.y+c},m=_y(v,g,y,f,s,u,p,d),_=m.width,b=m.height,x=m.center;return e.width=_*t,e.height=b*t,e.deltaX=2*(x.x-y.x),e.deltaY=2*(x.y-y.y),e}var yy=function(t,e,n,r,o,i,a,s,u,l){void 0===n&&(n=1),void 0===r&&(r=!1),void 0===o&&(o=!1),void 0===i&&(i=0);var c=zs(e),p=c.deltaX,d=c.deltaY,f=c.width,h=c.height,y=c.PCTResizeInfo;if(y){var v=4,g=0,m=0;switch(t){case ny.LEFT_TOP:m=(-1*p-d)/v;break;case ny.RIGHT_TOP:m=(p-d)/v;break;case ny.RIGHT_BOTTOM:m=(p+d)/v;break;case ny.LEFT_BOTTOM:m=(-1*p+d)/v;break;default:break}0!==m&&(g=Math.round(m/y.ResizeBasis.basisHeight*1e5)/1e3),y.ResizePCT.widthPCT=Math.max(Math.min(y.ResizePCT.widthPCT+g,y.ScaleLimit.maxScaleLimit),y.ScaleLimit.minScaleLimit),y.ResizePCT.heightPCT=Math.max(Math.min(y.ResizePCT.heightPCT+g,y.ScaleLimit.maxScaleLimit),y.ScaleLimit.minScaleLimit);var _=Math.round(y.ResizePCT.widthPCT*y.ResizeBasis.basisWidth/100),b=Math.round(y.ResizePCT.heightPCT*y.ResizeBasis.basisHeight/100);switch(t){case ny.LEFT_TOP:p=f-_,d=h-b;break;case ny.RIGHT_TOP:p=_-f,d=h-b;break;case ny.RIGHT_BOTTOM:p=_-f,d=b-h;break;case ny.LEFT_BOTTOM:p=f-_,d=b-h;break;default:break}return c}if(i%(2*Math.PI)!==0&&void 0!==a&&void 0!==s)return hy(n,c,i,a,s,u,l,r,o);switch(t){case ny.LEFT_TOP:c.width=r?f:f-p*n,c.height=o?h:h-d*n;break;case ny.RIGHT_TOP:c.width=r?f:f+p*n,c.height=o?h:h-d*n;break;case ny.RIGHT_BOTTOM:c.width=r?f:f+p*n,c.height=o?h:h+d*n;break;case ny.LEFT_BOTTOM:c.width=r?f:f-p*n,c.height=o?h:h+d*n;break;default:break}return c},vy=function(t,e){var n=t.id,r=t.anchors,o=e.getNodeEdges(n);$n(o,(function(t){if(t.sourceNodeId===n){var e=ip(r,(function(e){return e.id===t.sourceAnchorId}));e&&t.updateStartPoint({x:e.x,y:e.y})}else if(t.targetNodeId===n){e=ip(r,(function(e){return e.id===t.targetAnchorId}));e&&t.updateEndPoint({x:e.x,y:e.y})}}))},gy=function(t,e,n,r,o,i,a){a.eventCenter.emit(zp.NODE_RESIZE,{preData:t,data:e,deltaX:n,deltaY:r,index:o,model:i})},my=function(t){var e=t.x,n=t.y,r=t.deltaX,o=t.deltaY,i=t.index,a=t.nodeModel,s=t.graphModel,u=t.cancelCallback,l=a.r,c=a.rx,p=a.ry,d=a.width,f=a.height,h=a.PCTResizeInfo,y=a.minWidth,v=a.minHeight,g=a.maxWidth,m=a.maxHeight,_=a.rotate,b=a.x,x=a.y,E=y===g,O=v===m,w={width:l||c||d,height:l||p||f,deltaX:r,deltaY:o,PCTResizeInfo:h},A=l||c&&p?.5:1,S=e,M=n,j=yy(i,w,A,E,O,_,S,M,b,x);if(j.width<y||j.width>g||j.height<v||j.height>m)null===u||void 0===u||u();else{(_%(2*Math.PI)==0||h||void 0===S||void 0===M)&&(j.deltaX=E?0:j.deltaX,j.deltaY=O?0:j.deltaY);var T=a.getData(),P=a.resize(j);T.x===P.x&&T.y===P.y||(vy(a,s),gy(T,P,r,o,i,a,s))}};function _y(t,e,n,r,o,i,a,s){void 0===o&&(o=!1),void 0===i&&(i=!1);var u={x:n.x-(t.x-n.x),y:n.y-(t.y-n.y)},l=cy(u,e),c=py(e,l,-r),p=py(u,l,-r);if(o){var d=Math.abs(c.x-p.x),f=d-a;l.x>c.x?l.x=l.x+f/2:l.x=l.x-f/2}if(i){var h=Math.abs(c.y-p.y),y=h-s;l.y>c.y?l.y=l.y+y/2:l.y=l.y-y/2}if(o||i){var v=py(p,l,r),g=v.x-u.x,m=v.y-u.y;l.x=l.x-g,l.y=l.y-m,p=py(u,l,-r),c={x:l.x-(p.x-l.x),y:l.y-(p.y-l.y)}}var _=Math.abs(c.x-p.x),b=Math.abs(c.y-p.y);return o&&(_=a),i&&(b=s),{width:_,height:b,center:l}}var by=100,xy={x:1,y:0,z:0};function Ey(t,e,n,r,o){var i=function(o){if(o<0||o>1)throw new RangeError('The value range of parameter "t" is [0,1]');return{x:t.x*Math.pow(1-o,3)+3*e.x*o*Math.pow(1-o,2)+3*n.x*Math.pow(o,2)*(1-o)+r.x*Math.pow(o,3),y:t.y*Math.pow(1-o,3)+3*e.y*o*Math.pow(1-o,2)+3*n.y*Math.pow(o,2)*(1-o)+r.y*Math.pow(o,3)}},a=0,s=2,u=r.x,l=r.y,c=r;while(a<o&&s<50){c=i(1-s/by);var p=c.x,d=c.y;a=Bf(u,l,p,d),s++}return c}function Oy(t,e){return t.x*e.y-t.y*e.x}function wy(t,e){var n=[t.x,t.y,t.z],r=[e.x,e.y,e.z];return r.reduce((function(t,e,r){return t+e*n[r]}))}function Ay(t,e){var n=Oy(t,e),r=Math.acos(wy(Sy(t),Sy(e)));return n>=0?r:-r}function Sy(t){var e=Math.hypot(t.x,t.y);return{x:t.x/e,y:t.y/e,z:0}}function My(t){return Ay(xy,t)}function jy(t){return t*(180/Math.PI)}var Ty={baseNode:{fill:"#fff",stroke:"#000",strokeWidth:2},baseEdge:{stroke:"#000",strokeWidth:2},rect:{},circle:{},diamond:{},ellipse:{},polygon:{},text:{color:"#000",stroke:"none",fontSize:12,background:{fill:"transparent"}},anchor:{stroke:"#000",fill:"#fff",r:4,hover:{r:10,fill:"#949494",fillOpacity:.5,stroke:"#949494"}},anchorLine:{stroke:"#000",strokeWidth:2,strokeDasharray:"3,2"},nodeText:{color:"#000",overflowMode:"default",fontSize:12,lineHeight:1.2},edgeText:{textWidth:100,overflowMode:"default",fontSize:12,background:{fill:"#fff"}},line:{},polyline:{},bezier:{fill:"none",adjustLine:{stroke:"#949494"},adjustAnchor:{r:4,fill:"#949494",fillOpacity:1,stroke:"#949494"}},arrow:{offset:10,verticalLength:5},snapline:{stroke:"#949494",strokeWidth:1},edgeAdjust:{r:4,fill:"#fff",stroke:"#949494",strokeWidth:2},outline:{fill:"transparent",stroke:"#949494",strokeDasharray:"3,3",hover:{stroke:"#949494"}},edgeAnimation:{stroke:"red",strokeDasharray:"10,10",strokeDashoffset:"100%",animationName:"lf_animate_dash",animationDuration:"20s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"normal"},rotateControl:{stroke:"#000",fill:"#fff",strokeWidth:1.5},resizeControl:{width:7,height:7,fill:"#fff",stroke:"#000"},resizeOutline:{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},Py=function(t){var e=zs(Ty);return t&&(e=Pp(e,t)),e},Dy=Py,Ny=1e3,Cy=999,Ry=function(){return++Ny},Ly=function(){return--Cy},Iy=function(){return Iy=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Iy.apply(this,arguments)},ky=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},By=function(){function t(t,e){var n;this.BaseType=Bp.EDGE,this.id="",this.type="",this.sourceNodeId="",this.targetNodeId="",this.textMode=Gp.TEXT,this.text={value:"",x:0,y:0,draggable:!1,editable:!0},this.points="",this.pointsList=[],this.virtual=!1,this.isSelected=!1,this.isHovered=!1,this.isHitable=!0,this.isHittable=!0,this.draggable=!0,this.visible=!0,this.isAnimation=!1,this.isShowAdjustPoint=!1,this.zIndex=0,this.state=kp.DEFAULT,this.modelType=Xp.EDGE,this.customTextPosition=!1,this.style={},this.arrowConfig={markerEnd:"url(#marker-end-".concat(this.id,")"),markerStart:"url(#marker-start-".concat(this.id,")")},this.graphModel=e,this.properties=null!==(n=t.properties)&&void 0!==n?n:{},this.initEdgeData(t),this.setAttributes()}return t.prototype.initEdgeData=function(t){if(t.properties||(t.properties={}),!t.id){var e=this.graphModel.idGenerator,n=e&&e(t.type),r=this.createId();t.id=r||n||uh()}this.arrowConfig.markerEnd="url(#marker-end-".concat(t.id,")"),this.arrowConfig.markerStart="url(#marker-start-".concat(t.id,")");var o=this.graphModel.editConfigModel.adjustEdgeStartAndEnd;this.isShowAdjustPoint=o,Fu(this,cf(t));var i=this.graphModel.overlapMode;i===Hp.INCREASE&&(this.zIndex=t.zIndex||Ry()),this.setAnchors(),this.initPoints(),this.formatText(t)},t.prototype.setAttributes=function(){},t.prototype.createId=function(){return null},t.prototype.getEdgeStyle=function(){return Iy(Iy({},this.graphModel.theme.baseEdge),this.style)},t.prototype.getAdjustPointStyle=function(){return Iy({},this.graphModel.theme.edgeAdjust)},t.prototype.getTextStyle=function(){var t=this.graphModel.theme.edgeText;return zs(t)},t.prototype.getEdgeAnimationStyle=function(){var t=this.graphModel.theme.edgeAnimation;return zs(t)},t.prototype.getArrowStyle=function(){var t=this.getEdgeStyle(),e=this.getEdgeAnimationStyle(),n=this.graphModel.theme.arrow,r=this.isAnimation?e.stroke:t.stroke;return Iy(Iy(Iy({},t),{fill:r,stroke:r}),n)},t.prototype.getOutlineStyle=function(){var t=this.graphModel,e=t.theme.outline;return zs(e)},t.prototype.getTextPosition=function(){return{x:0,y:0}},Object.defineProperty(t.prototype,"sourceNode",{get:function(){var t,e;return null===(e=null===(t=this.graphModel)||void 0===t?void 0:t.nodesMap[this.sourceNodeId])||void 0===e?void 0:e.model},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"targetNode",{get:function(){var t,e;return null===(e=null===(t=this.graphModel)||void 0===t?void 0:t.nodesMap[this.targetNodeId])||void 0===e?void 0:e.model},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textPosition",{get:function(){return this.getTextPosition()},enumerable:!1,configurable:!0}),t.prototype.getBeginAnchor=function(t,e,n){var r,o,i=Rf(t);if(n){if(r=ip(i,(function(t){return t.id===n})),r)return r;console.warn("未在节点上找到指定的起点锚点".concat(n,"，已使用默认锚点作为起点"))}return i.forEach((function(t){var n=pf(t,e);(void 0===o||n<o)&&(o=n,r=t)})),r},t.prototype.getEndAnchor=function(t,e){var n,r,o=this,i=Rf(t);if(e){if(n=ip(i,(function(t){return t.id===e})),n)return n;console.warn("未在节点上找到指定的终点锚点".concat(e,"，已使用默认锚点作为终点"))}return i.forEach((function(t){if(o.startPoint){var e=pf(t,o.startPoint);(void 0===r||e<r)&&(r=e,n=t)}})),n},t.prototype.getProperties=function(){return Object(up["G"])(this.properties)},t.prototype.getData=function(){var t=this.properties;Object(up["v"])(t)&&(t=Object(up["G"])(t));var e={id:this.id,type:this.type,properties:t,sourceNodeId:this.sourceNodeId,targetNodeId:this.targetNodeId,sourceAnchorId:this.sourceAnchorId,targetAnchorId:this.targetAnchorId,startPoint:Fu({},this.startPoint),endPoint:Fu({},this.endPoint)};this.graphModel.overlapMode===Hp.INCREASE&&(e.zIndex=this.zIndex);var n=this.text,r=n.x,o=n.y,i=n.value;return i&&(e.text={x:r,y:o,value:i}),e},t.prototype.getHistoryData=function(){return this.getData()},t.prototype.setProperty=function(t,e){Object(up["F"])(this.properties,t,Lp(e)),this.setAttributes()},t.prototype.deleteProperty=function(t){delete this.properties[t],this.setAttributes()},t.prototype.setProperties=function(t){this.properties=Iy(Iy({},Object(up["G"])(this.properties)),Lp(t)),this.setAttributes()},t.prototype.changeEdgeId=function(t){var e=this.arrowConfig,n=e.markerEnd,r=e.markerStart;r&&r==="url(#marker-start-".concat(this.id,")")&&(this.arrowConfig.markerStart="url(#marker-start-".concat(t,")")),n&&n==="url(#marker-end-".concat(this.id,")")&&(this.arrowConfig.markerEnd="url(#marker-end-".concat(t,")")),this.id=t},t.prototype.setStyle=function(t,e){var n;this.style=Iy(Iy({},this.style),(n={},n[t]=Lp(e),n))},t.prototype.setStyles=function(t){this.style=Iy(Iy({},this.style),Lp(t))},t.prototype.updateStyles=function(t){this.style=Iy({},Lp(t))},t.prototype.setTextMode=function(t){this.textMode=t},t.prototype.formatText=function(t){var e,n,r,o=this.graphModel.editConfigModel,i=o.edgeTextDraggable,a=o.edgeTextEdit,s=this.textPosition,u=s.x,l=s.y,c=t.text,p={value:"",x:u,y:l,draggable:i,editable:a};c&&("string"===typeof c?p=Iy(Iy({},p),{value:c}):(p=Iy(Iy({},p),{x:null!==(e=c.x)&&void 0!==e?e:u,y:null!==(n=c.y)&&void 0!==n?n:l,value:null!==(r=c.value)&&void 0!==r?r:""}),sp(c.draggable)||(p.draggable=c.draggable),sp(c.editable)||(p.editable=c.editable))),this.text=p},t.prototype.resetTextPosition=function(){var t=this.textPosition,e=t.x,n=t.y;this.text.x=e,this.text.y=n},t.prototype.moveText=function(t,e){var n=this.text,r=n.x,o=n.y,i=n.value,a=n.draggable,s=n.editable;this.text={value:i,editable:s,draggable:a,x:r+t,y:o+e}},t.prototype.setText=function(t){t&&Fu(this.text,t)},t.prototype.updateText=function(t){this.text=Iy(Iy({},Object(up["G"])(this.text)),{value:t})},t.prototype.setAnchors=function(){if(!this.sourceAnchorId||!this.startPoint){var t=this.getBeginAnchor(this.sourceNode,this.targetNode,this.sourceAnchorId);if(!t)throw new Error("无法获取beginAnchor，请检查anchors相关逻辑，anchors不能为空");this.startPoint||(this.startPoint={x:t.x,y:t.y}),this.sourceAnchorId||(this.sourceAnchorId=t.id)}if(!this.targetAnchorId||!this.endPoint){t=this.getEndAnchor(this.targetNode,this.targetAnchorId);if(!t)throw new Error("无法获取endAnchor，请检查anchors相关逻辑，anchors不能为空");this.endPoint||(this.endPoint={x:t.x,y:t.y}),this.targetAnchorId||(this.targetAnchorId=t.id)}},t.prototype.setSelected=function(t){void 0===t&&(t=!0),this.isSelected=t},t.prototype.setHovered=function(t){void 0===t&&(t=!0),this.isHovered=t},t.prototype.setHitable=function(t){void 0===t&&(t=!0),this.isHitable=t},t.prototype.setHittable=function(t){void 0===t&&(t=!0),this.isHittable=t},t.prototype.openEdgeAnimation=function(){this.isAnimation=!0},t.prototype.closeEdgeAnimation=function(){this.isAnimation=!1},t.prototype.setElementState=function(t,e){this.state=t,this.additionStateData=e},t.prototype.updateStartPoint=function(t){this.startPoint=t},t.prototype.moveStartPoint=function(t,e){this.startPoint&&(this.startPoint.x+=t,this.startPoint.y+=e)},t.prototype.updateEndPoint=function(t){this.endPoint=t},t.prototype.moveEndPoint=function(t,e){this.endPoint&&(this.endPoint.x+=t,this.endPoint.y+=e)},t.prototype.setZIndex=function(t){void 0===t&&(t=0),this.zIndex=t},t.prototype.initPoints=function(){},t.prototype.updateAttributes=function(t){Fu(this,t)},t.prototype.getAdjustStart=function(){return this.startPoint},t.prototype.getAdjustEnd=function(){return this.endPoint},t.prototype.updateAfterAdjustStartAndEnd=function(t){var e=t.startPoint,n=t.endPoint;this.updateStartPoint({x:e.x,y:e.y}),this.updateEndPoint({x:n.x,y:n.y})},t.BaseType=Bp.EDGE,ky([up["A"]],t.prototype,"type",void 0),ky([up["A"]],t.prototype,"sourceNodeId",void 0),ky([up["A"]],t.prototype,"targetNodeId",void 0),ky([up["A"]],t.prototype,"startPoint",void 0),ky([up["A"]],t.prototype,"endPoint",void 0),ky([up["A"]],t.prototype,"textMode",void 0),ky([up["A"]],t.prototype,"text",void 0),ky([up["A"]],t.prototype,"properties",void 0),ky([up["A"]],t.prototype,"points",void 0),ky([up["A"]],t.prototype,"pointsList",void 0),ky([up["A"]],t.prototype,"isSelected",void 0),ky([up["A"]],t.prototype,"isHovered",void 0),ky([up["A"]],t.prototype,"isHitable",void 0),ky([up["A"]],t.prototype,"isHittable",void 0),ky([up["A"]],t.prototype,"draggable",void 0),ky([up["A"]],t.prototype,"visible",void 0),ky([up["A"]],t.prototype,"isAnimation",void 0),ky([up["A"]],t.prototype,"isShowAdjustPoint",void 0),ky([up["A"]],t.prototype,"zIndex",void 0),ky([up["A"]],t.prototype,"state",void 0),ky([up["A"]],t.prototype,"style",void 0),ky([up["A"]],t.prototype,"arrowConfig",void 0),ky([up["l"]],t.prototype,"sourceNode",null),ky([up["l"]],t.prototype,"targetNode",null),ky([up["l"]],t.prototype,"textPosition",null),ky([up["j"]],t.prototype,"setProperty",null),ky([up["j"]],t.prototype,"deleteProperty",null),ky([up["j"]],t.prototype,"setProperties",null),ky([up["j"]],t.prototype,"changeEdgeId",null),ky([up["j"]],t.prototype,"setStyle",null),ky([up["j"]],t.prototype,"setStyles",null),ky([up["j"]],t.prototype,"updateStyles",null),ky([up["j"]],t.prototype,"setTextMode",null),ky([up["j"]],t.prototype,"formatText",null),ky([up["j"]],t.prototype,"resetTextPosition",null),ky([up["j"]],t.prototype,"moveText",null),ky([up["j"]],t.prototype,"setText",null),ky([up["j"]],t.prototype,"updateText",null),ky([up["j"]],t.prototype,"setAnchors",null),ky([up["j"]],t.prototype,"setSelected",null),ky([up["j"]],t.prototype,"setHovered",null),ky([up["j"]],t.prototype,"setHitable",null),ky([up["j"]],t.prototype,"setHittable",null),ky([up["j"]],t.prototype,"openEdgeAnimation",null),ky([up["j"]],t.prototype,"closeEdgeAnimation",null),ky([up["j"]],t.prototype,"setElementState",null),ky([up["j"]],t.prototype,"updateStartPoint",null),ky([up["j"]],t.prototype,"moveStartPoint",null),ky([up["j"]],t.prototype,"updateEndPoint",null),ky([up["j"]],t.prototype,"moveEndPoint",null),ky([up["j"]],t.prototype,"setZIndex",null),ky([up["j"]],t.prototype,"initPoints",null),ky([up["j"]],t.prototype,"updateAttributes",null),ky([up["j"]],t.prototype,"getAdjustStart",null),ky([up["j"]],t.prototype,"getAdjustEnd",null),ky([up["j"]],t.prototype,"updateAfterAdjustStartAndEnd",null),t}(),Xy=By,zy=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Hy=function(){return Hy=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Hy.apply(this,arguments)},Uy=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},Gy=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(r=i.next()).done)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(o)throw o.error}}return a},Yy=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.modelType=Xp.BEZIER_EDGE,r.path="",r.initEdgeData(e),r.setAttributes(),r}return zy(e,t),e.prototype.initEdgeData=function(e){this.offset=100,t.prototype.initEdgeData.call(this,e)},e.prototype.getEdgeStyle=function(){var e=this.graphModel.theme.bezier,n=t.prototype.getEdgeStyle.call(this),r=this.properties.style,o=void 0===r?{}:r;return Hy(Hy(Hy({},n),zs(e)),zs(o))},e.prototype.getTextPosition=function(){if(this.pointsList&&this.pointsList.length>0){var t=0,e=0;return this.pointsList.forEach((function(n){var r=n.x,o=n.y;t+=r,e+=o})),{x:t/this.pointsList.length,y:e/this.pointsList.length}}return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}},e.prototype.getData=function(){var e=t.prototype.getData.call(this),n=this.pointsList.map((function(t){var e=t.x,n=t.y;return{x:e,y:n}}));return Hy(Hy({},e),{pointsList:n})},e.prototype.getControls=function(){var t=this.startPoint,e=this.endPoint,n=of({start:t,end:e,sourceNode:this.sourceNode,targetNode:this.targetNode,offset:this.offset});return n},e.prototype.getPath=function(t){var e=Gy(t,4),n=e[0],r=e[1],o=e[2],i=e[3];return"M ".concat(n.x," ").concat(n.y,"\n    C ").concat(r.x," ").concat(r.y,",\n    ").concat(o.x," ").concat(o.y,",\n    ").concat(i.x," ").concat(i.y)},e.prototype.initPoints=function(){this.pointsList.length>0?this.path=this.getPath(this.pointsList):this.updatePoints()},e.prototype.updatePoints=function(){var t=this.getControls(),e=t.sNext,n=t.ePre;this.updatePath(e,n)},e.prototype.updatePath=function(t,e){t=zs(t),e=zs(e);var n={x:this.startPoint.x,y:this.startPoint.y},r={x:this.endPoint.x,y:this.endPoint.y};if(!t||!e){var o=this.getControls();t=o.sNext,e=o.ePre}this.pointsList=[n,t,e,r],this.path=this.getPath(this.pointsList)},e.prototype.updateStartPoint=function(t){this.startPoint=Object.assign({},t),this.updatePoints()},e.prototype.updateEndPoint=function(t){this.endPoint=Object.assign({},t),this.updatePoints()},e.prototype.moveStartPoint=function(t,e){this.startPoint.x+=t,this.startPoint.y+=e;var n=Gy(this.pointsList,3),r=n[1],o=n[2];r.x+=t,r.y+=e,this.updatePath(r,o)},e.prototype.moveEndPoint=function(t,e){this.endPoint.x+=t,this.endPoint.y+=e;var n=Gy(this.pointsList,3),r=n[1],o=n[2];o.x+=t,o.y+=e,this.updatePath(r,o)},e.prototype.updateAdjustAnchor=function(t,e){var n;"sNext"===e?this.pointsList[1]=t:"ePre"===e&&(this.pointsList[2]=t),this.path=this.getPath(this.pointsList),(null===(n=this.text)||void 0===n?void 0:n.value)&&this.setText(Fu({},this.text,this.textPosition))},e.prototype.getAdjustStart=function(){return this.pointsList[0]||this.startPoint},e.prototype.getAdjustEnd=function(){var t=this.pointsList;return t[t.length-1]||this.endPoint},e.prototype.updateAfterAdjustStartAndEnd=function(t){var e=t.startPoint,n=t.endPoint,r=t.sourceNode,o=t.targetNode,i=of({start:e,end:n,sourceNode:r,targetNode:o,offset:this.offset}),a=i.sNext,s=i.ePre;this.pointsList=[e,a,s,n],this.initPoints()},Uy([up["A"]],e.prototype,"path",void 0),Uy([up["j"]],e.prototype,"initPoints",null),Uy([up["j"]],e.prototype,"updatePoints",null),Uy([up["j"]],e.prototype,"updateStartPoint",null),Uy([up["j"]],e.prototype,"updateEndPoint",null),Uy([up["j"]],e.prototype,"moveStartPoint",null),Uy([up["j"]],e.prototype,"moveEndPoint",null),Uy([up["j"]],e.prototype,"updateAdjustAnchor",null),Uy([up["j"]],e.prototype,"getAdjustStart",null),Uy([up["j"]],e.prototype,"getAdjustEnd",null),Uy([up["j"]],e.prototype,"updateAfterAdjustStartAndEnd",null),e}(Xy),Vy=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Fy=function(){return Fy=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Fy.apply(this,arguments)},Wy=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(r=i.next()).done)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(o)throw o.error}}return a},Ky=function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))},Zy=function(t){function e(){var e=t.apply(this,Ky([],Wy(arguments),!1))||this;return e.modelType=Xp.LINE_EDGE,e}return Vy(e,t),e.prototype.getEdgeStyle=function(){var e=this.graphModel.theme.line,n=t.prototype.getEdgeStyle.call(this),r=this.properties.style,o=void 0===r?{}:r;return Fy(Fy(Fy({},n),zs(e)),zs(o))},e.prototype.initEdgeData=function(e){t.prototype.initEdgeData.call(this,e),this.points=this.getPath([this.startPoint,this.endPoint])},e.prototype.getPath=function(t){var e=Wy(t,2),n=e[0],r=e[1];return"".concat(n.x,",").concat(n.y," ").concat(r.x,",").concat(r.y)},e.prototype.getTextPosition=function(){return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}},e}(Xy),qy=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),$y=function(){return $y=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},$y.apply(this,arguments)},Jy=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},Qy=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(r=i.next()).done)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(o)throw o.error}}return a},tv=function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))},ev=function(t){function e(){var e=t.apply(this,tv([],Qy(arguments),!1))||this;return e.modelType=Xp.POLYLINE_EDGE,e.draggingPointList=[],e}return qy(e,t),e.prototype.initEdgeData=function(e){this.offset=30,e.pointsList&&(this.pointsList=e.pointsList),t.prototype.initEdgeData.call(this,e)},e.prototype.getEdgeStyle=function(){var e=this.graphModel.theme.polyline,n=t.prototype.getEdgeStyle.call(this),r=this.properties.style,o=void 0===r?{}:r;return $y($y($y({},n),zs(e)),zs(o))},e.prototype.getTextPosition=function(){var t,e=null===(t=this.text)||void 0===t?void 0:t.value;if(this.dbClickPosition&&!e){var n=this.dbClickPosition,r=n.x,o=n.y;return{x:r,y:o}}var i=Qd(this.points),a=Qy(Kd(i),2),s=a[0],u=a[1];return{x:(s.x+u.x)/2,y:(s.y+u.y)/2}},e.prototype.getAfterAnchor=function(t,e,n){var r,o;return n.forEach((function(n){var i;t===Up.HORIZONTAL?i=Math.abs(e.y-n.y):t===Up.VERTICAL&&(i=Math.abs(e.x-n.x)),(!o||o>i)&&(o=i,r=n)})),r},e.prototype.getCrossPoint=function(t,e,n){var r;return t===Up.HORIZONTAL?r={x:n.x,y:e.y}:t===Up.VERTICAL&&(r={x:e.x,y:n.y}),r},e.prototype.removeCrossPoints=function(t,e,n){var r=n.map((function(t){return t}));if(1===t){var o=r[t],i=r[e],a=r[t-1],s=Zd(a,o,this.sourceNode);if(s){var u=qd(o,i,this.sourceNode);if(u){var l=$d(o,i,this.sourceNode);l&&(r[t]=l,r.splice(t-1,1),t--,e--)}}else{var c=this.sourceNode.anchors;c.forEach((function(e){if(e.x===a.x&&e.x===o.x||e.y===a.y&&e.y===o.y){var n=Bf(e.x,e.y,o.x,o.y),i=Bf(a.x,a.y,o.x,o.y);n<i&&(r[t-1]=e)}}))}}if(e===n.length-2){var p=r[t],d=r[e],f=r[e+1],h=Zd(d,f,this.targetNode);if(h){u=qd(p,d,this.targetNode);if(u){l=$d(p,d,this.targetNode);l&&(r[e]=l,r.splice(e+1,1))}}else{c=this.targetNode.anchors;c.forEach((function(t){if(t.x===f.x&&t.x===d.x||t.y===f.y&&t.y===d.y){var n=Bf(t.x,t.y,d.x,d.y),o=Bf(f.x,f.y,d.x,d.y);n<o&&(r[e+1]=t)}}))}}return r},e.prototype.getDraggingPoints=function(t,e,n,r,o){var i=o.map((function(t){return t})),a=this.getAfterAnchor(t,n,r),s=this.getCrossPoint(t,n,a);return"start"===e?(i.unshift(s),i.unshift(a)):(i.push(s),i.push(a)),i},e.prototype.updateCrossPoints=function(t){var e=t.map((function(t){return t})),n=t[0],r=t[1],o=t[e.length-2],i=t[e.length-1],a=this,s=a.sourceNode,u=a.targetNode,l=s.modelType,c=u.modelType,p=Jd(n,r),d=e[0];switch(l){case Xp.RECT_NODE:if(0!==s.radius){var f=Vf(n,s);f||(d=Gf(n,p,s))}break;case Xp.CIRCLE_NODE:d=Yf(n,p,s);break;case Xp.ELLIPSE_NODE:d=Ff(n,p,s);break;case Xp.DIAMOND_NODE:d=Wf(n,p,s);break;case Xp.POLYGON_NODE:d=Wf(n,p,s);break;default:break}d&&(e[0]=d);var h=Jd(o,i),y=e[e.length-1];switch(c){case Xp.RECT_NODE:if(0!==u.radius){f=Vf(i,u);f||(y=Gf(i,h,u))}break;case Xp.CIRCLE_NODE:y=Yf(i,h,u);break;case Xp.ELLIPSE_NODE:y=Ff(i,h,u);break;case Xp.DIAMOND_NODE:y=Wf(i,h,u);break;case Xp.POLYGON_NODE:y=Wf(i,h,u);break;default:break}return y&&(e[e.length-1]=y),e},e.prototype.updatePath=function(t){this.pointsList=t,this.points=this.getPath(this.pointsList)},e.prototype.getData=function(){var e=t.prototype.getData.call(this),n=this.pointsList.map((function(t){var e=t.x,n=t.y;return{x:e,y:n}}));return Object.assign({},e,{pointsList:n})},e.prototype.getPath=function(t){return t.map((function(t){return"".concat(t.x,",").concat(t.y)})).join(" ")},e.prototype.initPoints=function(){this.pointsList.length>0?this.points=this.getPath(this.pointsList):this.updatePoints()},e.prototype.updatePoints=function(){var t=Wd({x:this.startPoint.x,y:this.startPoint.y},{x:this.endPoint.x,y:this.endPoint.y},this.sourceNode,this.targetNode,this.offset||0);this.pointsList=t,this.points=t.map((function(t){return"".concat(t.x,",").concat(t.y)})).join(" ")},e.prototype.updateStartPoint=function(t){this.startPoint=Object.assign({},t),this.updatePoints()},e.prototype.moveStartPoint=function(t,e){this.startPoint.x+=t,this.startPoint.y+=e,this.updatePoints()},e.prototype.updateEndPoint=function(t){this.endPoint=Object.assign({},t),this.updatePoints()},e.prototype.moveEndPoint=function(t,e){this.endPoint.x+=t,this.endPoint.y+=e,this.updatePoints()},e.prototype.updatePointsList=function(t,e){this.pointsList.forEach((function(n){n.x+=t,n.y+=e}));var n=this.pointsList[0];this.startPoint=Object.assign({},n);var r=this.pointsList[this.pointsList.length-1];this.endPoint=Object.assign({},r),this.initPoints()},e.prototype.dragAppendStart=function(){this.draggingPointList=this.pointsList.map((function(t){return t}))},e.prototype.dragAppendSimple=function(t,e){var n;this.isDragging=!0;var r=t.start,o=t.end,i=t.startIndex,a=t.endIndex,s=t.direction,u=this.pointsList,l=u;return s===Up.HORIZONTAL?(u[i]={x:r.x,y:r.y+e.y},u[a]={x:o.x,y:o.y+e.y},l=this.pointsList.map((function(t){return t}))):s===Up.VERTICAL&&(u[i]={x:r.x+e.x,y:r.y},u[a]={x:o.x+e.x,y:o.y},l=this.pointsList.map((function(t){return t}))),this.updatePointsAfterDrag(l),this.draggingPointList=l,(null===(n=this.text)||void 0===n?void 0:n.value)&&this.setText(Fu({},this.text,this.textPosition)),{start:Fu({},u[i]),end:Fu({},u[a]),startIndex:i,endIndex:a,direction:s}},e.prototype.dragAppend=function(t,e){var n;this.isDragging=!0;var r=t.start,o=t.end,i=t.startIndex,a=t.endIndex,s=t.direction,u=this.pointsList;if(s===Up.HORIZONTAL){u[i]={x:r.x,y:r.y+e.y},u[a]={x:o.x,y:o.y+e.y};var l=this.pointsList.map((function(t){return t}));if(0!==i&&a!==this.pointsList.length-1&&(l=this.removeCrossPoints(i,a,l)),0===i){var c={x:r.x,y:r.y+e.y},p=Xf(c,this.sourceNode);if(!p){var d=this.sourceNode.anchors;l=this.getDraggingPoints(s,"start",c,d,l)}}if(a===this.pointsList.length-1){var f={x:o.x,y:o.y+e.y};p=Xf(f,this.targetNode);if(!p){d=this.targetNode.anchors;l=this.getDraggingPoints(s,"end",f,d,l)}}this.updatePointsAfterDrag(l),this.draggingPointList=l}else if(s===Up.VERTICAL){u[i]={x:r.x+e.x,y:r.y},u[a]={x:o.x+e.x,y:o.y};l=this.pointsList.map((function(t){return t}));if(0!==i&&a!==this.pointsList.length-1&&(l=this.removeCrossPoints(i,a,l)),0===i){c={x:r.x+e.x,y:r.y},p=Xf(c,this.sourceNode);if(!p){d=this.sourceNode.anchors;l=this.getDraggingPoints(s,"start",c,d,l)}}if(a===this.pointsList.length-1){f={x:o.x+e.x,y:o.y},p=Xf(f,this.targetNode);if(!p){d=this.targetNode.anchors;l=this.getDraggingPoints(s,"end",f,d,l)}}this.updatePointsAfterDrag(l),this.draggingPointList=l}return(null===(n=this.text)||void 0===n?void 0:n.value)&&this.setText(Fu({},this.text,this.textPosition)),{start:Fu({},u[i]),end:Fu({},u[a]),startIndex:i,endIndex:a,direction:s}},e.prototype.dragAppendEnd=function(){if(this.draggingPointList){var t=Fd(Qd(this.points));this.pointsList=t.map((function(t){return t})),this.draggingPointList=[];var e=t[0];this.startPoint=Fu({},e);var n=t[t.length-1];this.endPoint=Fu({},n)}this.isDragging=!1},e.prototype.updatePointsAfterDrag=function(t){var e=this.updateCrossPoints(t);this.points=e.map((function(t){return"".concat(t.x,",").concat(t.y)})).join(" ")},e.prototype.getAdjustStart=function(){return this.pointsList[0]||this.startPoint},e.prototype.getAdjustEnd=function(){var t=this.pointsList;return t[t.length-1]||this.endPoint},e.prototype.updateAfterAdjustStartAndEnd=function(t){var e=t.startPoint,n=t.endPoint,r=t.sourceNode,o=t.targetNode;this.pointsList=Wd({x:e.x,y:e.y},{x:n.x,y:n.y},r,o,this.offset||0),this.initPoints()},Jy([up["A"]],e.prototype,"dbClickPosition",void 0),Jy([up["j"]],e.prototype,"initPoints",null),Jy([up["j"]],e.prototype,"updatePoints",null),Jy([up["j"]],e.prototype,"updateStartPoint",null),Jy([up["j"]],e.prototype,"moveStartPoint",null),Jy([up["j"]],e.prototype,"updateEndPoint",null),Jy([up["j"]],e.prototype,"moveEndPoint",null),Jy([up["j"]],e.prototype,"updatePointsList",null),Jy([up["j"]],e.prototype,"dragAppendStart",null),Jy([up["j"]],e.prototype,"dragAppendSimple",null),Jy([up["j"]],e.prototype,"dragAppend",null),Jy([up["j"]],e.prototype,"dragAppendEnd",null),Jy([up["j"]],e.prototype,"updatePointsAfterDrag",null),Jy([up["j"]],e.prototype,"getAdjustStart",null),Jy([up["j"]],e.prototype,"getAdjustEnd",null),Jy([up["j"]],e.prototype,"updateAfterAdjustStartAndEnd",null),e}(By);function nv(t,e,n){return null==t?t:$p(t,e,n)}var rv=nv;function ov(t,e){var n={};return e=Jc(e,3),Hn(t,(function(t,r,o){Ho(n,e(t,r,o),t)})),n}var iv=ov,av=Object.prototype,sv=av.hasOwnProperty;function uv(t,e){return null!=t&&sv.call(t,e)}var lv=uv;function cv(t,e){return null!=t&&Bc(t,e,lv)}var pv=cv,dv=function(){return dv=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},dv.apply(this,arguments)},fv=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},hv=function(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},yv=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(r=i.next()).done)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(o)throw o.error}}return a},vv=function(){function t(t,e){var n;this.BaseType=Bp.NODE,this.id="",this.type="",this.x=0,this.y=0,this.textMode=Gp.TEXT,this.text={value:"",x:0,y:0,draggable:!1,editable:!0},this._width=100,this._height=80,this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3,this.anchorsOffset=[],this.virtual=!1,this.isSelected=!1,this.isHovered=!1,this.isShowAnchor=!1,this.isDragging=!1,this.isHitable=!0,this.isHittable=!0,this.draggable=!0,this.visible=!0,this.rotatable=!0,this.resizable=!0,this.zIndex=1,this.state=kp.DEFAULT,this.autoToFront=!0,this.style={},this._rotate=0,this.modelType=Xp.NODE,this.additionStateData={},this.targetRules=[],this.sourceRules=[],this.moveRules=[],this.resizeRules=[],this.hasSetTargetRules=!1,this.hasSetSourceRules=!1,this.graphModel=e,this.properties=null!==(n=t.properties)&&void 0!==n?n:{},this.initNodeData(t),this.setAttributes()}return Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t;var e=this,n=e.x,r=void 0===n?0:n,o=e.y,i=void 0===o?0:o;this.transform=new Nf(-r,-i).rotate(t).translate(r,i).toString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"incoming",{get:function(){return{nodes:this.graphModel.getNodeIncomingNode(this.id),edges:this.graphModel.getNodeIncomingEdge(this.id)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"outgoing",{get:function(){return{nodes:this.graphModel.getNodeOutgoingNode(this.id),edges:this.graphModel.getNodeOutgoingEdge(this.id)}},enumerable:!1,configurable:!0}),t.prototype.initNodeData=function(t){if(t.properties||(t.properties={}),!t.id){var e=this.graphModel.idGenerator,n=e&&e(t.type),r=this.createId();t.id=r||n||uh()}this.formatText(t),Fu(this,Kf(t));var o=this.graphModel.overlapMode;o===Hp.INCREASE&&(this.zIndex=t.zIndex||Ry())},t.prototype.setAttributes=function(){},t.prototype.createId=function(){return null},t.prototype.setTextMode=function(t){this.textMode=t},t.prototype.formatText=function(t){var e,n,r,o=this.graphModel.editConfigModel,i=o.nodeTextDraggable,a=o.nodeTextEdit,s=t.x,u=t.y,l=t.text,c={value:"",x:s,y:u,draggable:i,editable:a};l&&("string"===typeof l?c.value=l:(c=dv(dv({},c),{x:null!==(e=l.x)&&void 0!==e?e:s,y:null!==(n=l.y)&&void 0!==n?n:u,value:null!==(r=l.value)&&void 0!==r?r:""}),sp(l.draggable)||(c.draggable=l.draggable),sp(l.editable)||(c.editable=l.editable))),t.text=c},t.prototype.resize=function(t){var e=t.width,n=t.height,r=t.deltaX,o=t.deltaY,i=this.isAllowResizeNode(r,o,e,n);return i?(this.move(r/2,o/2),this.width=e,this.height=n,this.setProperties({width:e,height:n}),this.getData()):this.getData()},t.prototype.proportionalResize=function(){},t.prototype.getData=function(){var t=this.text,e=t.x,n=t.y,r=t.value,o=this.properties;Object(up["v"])(o)&&(o=Object(up["G"])(o)),Qn(o.width)&&(o.width=this.width),Qn(o.height)&&(o.height=this.height);var i={id:this.id,type:this.type,x:this.x,y:this.y,properties:o};return this.rotate&&(i.rotate=this.rotate),this.graphModel.overlapMode===Hp.INCREASE&&(i.zIndex=this.zIndex),r&&(i.text={x:e,y:n,value:r}),i},t.prototype.getHistoryData=function(){return this.getData()},t.prototype.getProperties=function(){return Object(up["G"])(this.properties)},t.prototype.getOuterGAttributes=function(){return{className:""}},t.prototype.getNodeStyle=function(){return dv(dv({},this.graphModel.theme.baseNode),this.style)},t.prototype.getTextStyle=function(){var t=this.graphModel.theme.nodeText,e=this.properties.textStyle,n=void 0===e?{}:e;return dv(dv({},zs(t)),zs(n))},t.prototype.getRotateControlStyle=function(){var t=this.graphModel.theme.rotateControl;return zs(t)},t.prototype.getResizeControlStyle=function(){var t=this.graphModel.theme.resizeControl;return zs(t)},t.prototype.getResizeOutlineStyle=function(){var t=this.graphModel.theme.resizeOutline;return zs(t)},t.prototype.getAnchorStyle=function(t){var e=this.graphModel.theme.anchor;return zs(e)},t.prototype.getAnchorLineStyle=function(t){var e=this.graphModel.theme.anchorLine;return zs(e)},t.prototype.getOutlineStyle=function(){var t=this.graphModel.theme.outline;return zs(t)},t.prototype.isAllowConnectedAsSource=function(t,e,n,r){var o=this.hasSetSourceRules?this.sourceRules:this.getConnectedSourceRules();this.hasSetSourceRules=!0;for(var i=!0,a="",s=0;s<o.length;s++){var u=o[s];if(!u.validate.call(this,this,t,e,n,r)){i=!1,a=u.message;break}}return{isAllPass:i,msg:a}},t.prototype.getConnectedSourceRules=function(){return this.sourceRules},t.prototype.isAllowConnectedAsTarget=function(t,e,n,r){var o=this.hasSetTargetRules?this.targetRules:this.getConnectedTargetRules();this.hasSetTargetRules=!0;for(var i=!0,a="",s=0;s<o.length;s++){var u=o[s];if(!u.validate.call(this,t,this,e,n,r)){i=!1,a=u.message;break}}return{isAllPass:i,msg:a}},t.prototype.isAllowMoveNode=function(t,e){var n,r,o=!0,i=!0,a=this.moveRules.concat(this.graphModel.nodeMoveRules);try{for(var s=hv(a),u=s.next();!u.done;u=s.next()){var l=u.value,c=l(this,t,e);if(!c)return!1;if("object"===typeof c){var p=c;if(!p.x&&!p.y)return!1;o=o&&p.x,i=i&&p.y}}}catch(d){n={error:d}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return{x:o,y:i}},t.prototype.getConnectedTargetRules=function(){return this.targetRules},t.prototype.getAnchorsByOffset=function(){var t=this,e=t.anchorsOffset,n=t.id,r=t.x,o=t.y;return e&&e.length>0?e.map((function(t,e){return t.length?(t=t,{id:"".concat(n,"_").concat(e),x:r+t[0],y:o+t[1]}):(t=t,dv(dv({},t),{x:r+t.x,y:o+t.y,id:t.id||"".concat(n,"_").concat(e)}))})):this.getDefaultAnchor()},t.prototype.getDefaultAnchor=function(){return[]},t.prototype.getTargetAnchor=function(t){return kf(t,this)},t.prototype.getBounds=function(){return{minX:this.x-this.width/2,minY:this.y-this.height/2,maxX:this.x+this.width/2,maxY:this.y+this.height/2}},Object.defineProperty(t.prototype,"anchors",{get:function(){var t=this.getAnchorsByOffset(),e=this,n=e.x,r=e.y,o=e.rotate;return t.forEach((function(t){var e=t.x,i=t.y,a=yv(new Tf([e,i,1]).translate(-n,-r).rotate(o).translate(n,r)[0],2),s=a[0],u=a[1];t.x=s,t.y=u})),t},enumerable:!1,configurable:!0}),t.prototype.getAnchorInfo=function(t){if(!Qn(t))for(var e=0;e<this.anchors.length;e++){var n=this.anchors[e];if(n.id===t)return n}},t.prototype.addNodeMoveRules=function(t){this.moveRules.includes(t)||this.moveRules.push(t)},t.prototype.isAllowMoveByXORY=function(t,e,n){var r,o;if(n)r=!0,o=!0;else{var i=this.isAllowMoveNode(t,e);"boolean"===typeof i?(r=i,o=i):(r=i.x,o=i.y)}return{isAllowMoveX:r,isAllowMoveY:o}},t.prototype.move=function(t,e,n){void 0===n&&(n=!1);var r=this.isAllowMoveByXORY(t,e,n),o=r.isAllowMoveX,i=r.isAllowMoveY;return o&&(this.x=this.x+t,this.text&&this.moveText(t,0)),i&&(this.y=this.y+e,this.text&&this.moveText(0,e)),(o||i)&&(this.rotate=this._rotate),o||i},t.prototype.getMoveDistance=function(t,e,n){void 0===n&&(n=!1);var r=this.isAllowMoveByXORY(t,e,n),o=r.isAllowMoveX,i=r.isAllowMoveY,a=0,s=0;return o&&t&&(this.x=this.x+t,this.text&&this.moveText(t,0),a=t),i&&e&&(this.y=this.y+e,this.text&&this.moveText(0,e),s=e),[a,s]},t.prototype.moveTo=function(t,e,n){void 0===n&&(n=!1);var r=t-this.x,o=e-this.y;return!(!n&&!this.isAllowMoveNode(r,o))&&(this.text&&this.moveText(r,o),this.x=t,this.y=e,!0)},t.prototype.moveText=function(t,e){var n=this.text,r=n.x,o=n.y,i=n.value,a=n.draggable,s=n.editable;this.text={value:i,editable:s,draggable:a,x:r+t,y:o+e}},t.prototype.updateText=function(t){this.text=dv(dv({},Object(up["G"])(this.text)),{value:t})},t.prototype.addNodeResizeRules=function(t){this.resizeRules.includes(t)||this.resizeRules.push(t)},t.prototype.isAllowResizeNode=function(t,e,n,r){var o,i,a=this.resizeRules.concat(this.graphModel.nodeResizeRules);try{for(var s=hv(a),u=s.next();!u.done;u=s.next()){var l=u.value,c=l(this,t,e,n,r);if(!c)return!1}}catch(p){o={error:p}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(o)throw o.error}}return!0},t.prototype.setSelected=function(t){void 0===t&&(t=!0),this.isSelected=t},t.prototype.setHovered=function(t){void 0===t&&(t=!0),this.isHovered=t,this.setIsShowAnchor(t)},t.prototype.setIsShowAnchor=function(t){void 0===t&&(t=!0),this.isShowAnchor=t},t.prototype.setRotatable=function(t){void 0===t&&(t=!0),this.rotatable=t},t.prototype.setResizable=function(t){void 0===t&&(t=!0),this.resizable=t},t.prototype.setHitable=function(t){void 0===t&&(t=!0),this.isHitable=t},t.prototype.setHittable=function(t){void 0===t&&(t=!0),this.isHittable=t},t.prototype.setElementState=function(t,e){this.state=t,this.additionStateData=e},t.prototype.updateProperties=function(t,e){var n=Object(up["G"])(this.properties);this.properties=t,this.setAttributes(),this.graphModel.eventCenter.emit(zp.NODE_PROPERTIES_CHANGE,{id:this.id,keys:e,preProperties:n,properties:t})},t.prototype.setProperty=function(t,e){var n=Object(up["G"])(this.properties),r=zs(n);rv(r,t,Lp(e)),this.updateProperties(r,[t])},t.prototype.setProperties=function(t){var e=Object(up["G"])(this.properties),n=dv(dv({},e),Lp(t)),r=[];iv(t,(function(t,n){(pv(e,n)&&e[n]!==t||!pv(e,n))&&r.push(n)})),this.updateProperties(n,r)},t.prototype.deleteProperty=function(t){delete this.properties[t],this.setAttributes()},t.prototype.setStyle=function(t,e){var n;this.style=dv(dv({},this.style),(n={},n[t]=Lp(e),n))},t.prototype.setStyles=function(t){this.style=dv(dv({},this.style),Lp(t))},t.prototype.updateStyles=function(t){this.style=dv({},Lp(t))},t.prototype.setZIndex=function(t){void 0===t&&(t=1),this.zIndex=t},t.prototype.updateAttributes=function(t){Fu(this,t)},t.BaseType=Bp.NODE,fv([up["A"]],t.prototype,"type",void 0),fv([up["A"]],t.prototype,"x",void 0),fv([up["A"]],t.prototype,"y",void 0),fv([up["A"]],t.prototype,"textMode",void 0),fv([up["A"]],t.prototype,"text",void 0),fv([up["A"]],t.prototype,"properties",void 0),fv([up["A"]],t.prototype,"_width",void 0),fv([up["A"]],t.prototype,"_height",void 0),fv([up["A"]],t.prototype,"anchorsOffset",void 0),fv([up["A"]],t.prototype,"isSelected",void 0),fv([up["A"]],t.prototype,"isHovered",void 0),fv([up["A"]],t.prototype,"isShowAnchor",void 0),fv([up["A"]],t.prototype,"isDragging",void 0),fv([up["A"]],t.prototype,"isHitable",void 0),fv([up["A"]],t.prototype,"isHittable",void 0),fv([up["A"]],t.prototype,"draggable",void 0),fv([up["A"]],t.prototype,"visible",void 0),fv([up["A"]],t.prototype,"rotatable",void 0),fv([up["A"]],t.prototype,"resizable",void 0),fv([up["A"]],t.prototype,"zIndex",void 0),fv([up["A"]],t.prototype,"state",void 0),fv([up["A"]],t.prototype,"autoToFront",void 0),fv([up["A"]],t.prototype,"style",void 0),fv([up["A"]],t.prototype,"transform",void 0),fv([up["A"]],t.prototype,"_rotate",void 0),fv([up["l"]],t.prototype,"incoming",null),fv([up["l"]],t.prototype,"outgoing",null),fv([up["j"]],t.prototype,"setTextMode",null),fv([up["j"]],t.prototype,"addNodeMoveRules",null),fv([up["j"]],t.prototype,"move",null),fv([up["j"]],t.prototype,"getMoveDistance",null),fv([up["j"]],t.prototype,"moveTo",null),fv([up["j"]],t.prototype,"moveText",null),fv([up["j"]],t.prototype,"updateText",null),fv([up["j"]],t.prototype,"addNodeResizeRules",null),fv([up["j"]],t.prototype,"setSelected",null),fv([up["j"]],t.prototype,"setHovered",null),fv([up["j"]],t.prototype,"setIsShowAnchor",null),fv([up["j"]],t.prototype,"setRotatable",null),fv([up["j"]],t.prototype,"setResizable",null),fv([up["j"]],t.prototype,"setHitable",null),fv([up["j"]],t.prototype,"setHittable",null),fv([up["j"]],t.prototype,"setElementState",null),fv([up["j"]],t.prototype,"setProperty",null),fv([up["j"]],t.prototype,"setProperties",null),fv([up["j"]],t.prototype,"deleteProperty",null),fv([up["j"]],t.prototype,"setStyle",null),fv([up["j"]],t.prototype,"setStyles",null),fv([up["j"]],t.prototype,"updateStyles",null),fv([up["j"]],t.prototype,"setZIndex",null),fv([up["j"]],t.prototype,"updateAttributes",null),t}(),gv=vv,mv=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_v=function(){return _v=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},_v.apply(this,arguments)},bv=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},xv=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.modelType=Xp.CIRCLE_NODE,r.r=50,r.initNodeData(e),r.setAttributes(),r}return mv(e,t),Object.defineProperty(e.prototype,"width",{get:function(){return 2*this.r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return 2*this.r},enumerable:!1,configurable:!0}),e.prototype.setAttributes=function(){t.prototype.setAttributes.call(this);var e=this.properties.r;e&&(this.r=e)},e.prototype.getNodeStyle=function(){var e=t.prototype.getNodeStyle.call(this),n=this.graphModel.theme.circle,r=this.properties.style,o=void 0===r?{}:r;return _v(_v(_v({},e),zs(n)),zs(o))},e.prototype.getDefaultAnchor=function(){var t=this,e=t.x,n=t.y,r=t.r;return[{x:e,y:n-r,id:"".concat(this.id,"_0")},{x:e+r,y:n,id:"".concat(this.id,"_1")},{x:e,y:n+r,id:"".concat(this.id,"_2")},{x:e-r,y:n,id:"".concat(this.id,"_3")}]},e.prototype.resize=function(t){var e=t.width,n=t.deltaX,r=t.deltaY;return this.move(n/2,r/2),this.r=e,this.setProperties({r:e}),this.getData()},bv([up["A"]],e.prototype,"r",void 0),bv([up["l"]],e.prototype,"width",null),bv([up["l"]],e.prototype,"height",null),e}(gv),Ev=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ov=function(){return Ov=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Ov.apply(this,arguments)},wv=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},Av=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(r=i.next()).done)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(o)throw o.error}}return a},Sv=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.modelType=Xp.DIAMOND_NODE,r.rx=30,r.ry=50,r.initNodeData(e),r.setAttributes(),r}return Ev(e,t),e.prototype.setAttributes=function(){t.prototype.setAttributes.call(this);var e=this.properties,n=e.rx,r=e.ry;n&&(this.rx=n),r&&(this.ry=r)},e.prototype.getNodeStyle=function(){var e=t.prototype.getNodeStyle.call(this),n=this.graphModel.theme.diamond,r=this.properties.style,o=void 0===r?{}:r;return Ov(Ov(Ov({},e),zs(n)),zs(o))},Object.defineProperty(e.prototype,"points",{get:function(){var t=this,e=t.x,n=t.y,r=t.rx,o=t.ry;return[[e,n-o],[e+r,n],[e,n+o],[e-r,n]]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pointsPosition",{get:function(){return yh(this.points,(function(t){var e=Av(t,2),n=e[0],r=e[1];return{x:n,y:r}}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){var t=Number.MAX_SAFE_INTEGER,e=Number.MIN_SAFE_INTEGER;return $n(this.points,(function(n){var r=Av(n,1),o=r[0];o<t&&(t=o),o>e&&(e=o)})),e-t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){var t=Number.MAX_SAFE_INTEGER,e=Number.MIN_SAFE_INTEGER;return $n(this.points,(function(n){var r=Av(n,2),o=r[1];o<t&&(t=o),o>e&&(e=o)})),e-t},enumerable:!1,configurable:!0}),e.prototype.getDefaultAnchor=function(){var t=this;return yh(this.points,(function(e,n){var r=Av(e,2),o=r[0],i=r[1];return{x:o,y:i,id:"".concat(t.id,"_").concat(n)}}))},e.prototype.resize=function(t){var e=t.width,n=t.height,r=t.deltaX,o=t.deltaY;return this.move(r/2,o/2),this.rx=e,this.ry=n,this.setProperties({rx:e,ry:n}),this.getData()},wv([up["A"]],e.prototype,"rx",void 0),wv([up["A"]],e.prototype,"ry",void 0),wv([up["l"]],e.prototype,"points",null),wv([up["l"]],e.prototype,"pointsPosition",null),wv([up["l"]],e.prototype,"width",null),wv([up["l"]],e.prototype,"height",null),e}(gv),Mv=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),jv=function(){return jv=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},jv.apply(this,arguments)},Tv=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},Pv=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.modelType=Xp.ELLIPSE_NODE,r.rx=30,r.ry=45,r.initNodeData(e),r.setAttributes(),r}return Mv(e,t),e.prototype.setAttributes=function(){t.prototype.setAttributes.call(this);var e=this.properties,n=e.rx,r=e.ry;n&&(this.rx=n),r&&(this.ry=r)},e.prototype.getNodeStyle=function(){var e=t.prototype.getNodeStyle.call(this),n=this.graphModel.theme.ellipse,r=this.properties.style,o=void 0===r?{}:r;return jv(jv(jv({},e),zs(n)),zs(o))},Object.defineProperty(e.prototype,"width",{get:function(){return 2*this.rx},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return 2*this.ry},enumerable:!1,configurable:!0}),e.prototype.getDefaultAnchor=function(){var t=this,e=t.x,n=t.y,r=t.rx,o=t.ry;return[{x:e,y:n-o,id:"".concat(this.id,"_0")},{x:e+r,y:n,id:"".concat(this.id,"_1")},{x:e,y:n+o,id:"".concat(this.id,"_2")},{x:e-r,y:n,id:"".concat(this.id,"_3")}]},e.prototype.resize=function(t){var e=t.width,n=t.height,r=t.deltaX,o=t.deltaY;return this.move(r/2,o/2),this.rx=e,this.ry=n,this.setProperties({rx:e,ry:n}),this.getData()},Tv([up["A"]],e.prototype,"rx",void 0),Tv([up["A"]],e.prototype,"ry",void 0),Tv([up["l"]],e.prototype,"width",null),Tv([up["l"]],e.prototype,"height",null),e}(gv),Dv=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Nv=function(){return Nv=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Nv.apply(this,arguments)},Cv=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},Rv=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(r=i.next()).done)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(o)throw o.error}}return a},Lv=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.modelType=Xp.POLYGON_NODE,r.points=[[50,0],[100,50],[50,100],[0,50]],r.initNodeData(e),r.setAttributes(),r}return Dv(e,t),e.prototype.setAttributes=function(){t.prototype.setAttributes.call(this);var e=this.properties,n=e.points,r=e.width,o=e.height,i=n||this.points;this.points=gf(i,r,o)},e.prototype.getNodeStyle=function(){var e=t.prototype.getNodeStyle.call(this),n=this.graphModel.theme.polygon,r=this.properties.style,o=void 0===r?{}:r;return Nv(Nv(Nv({},e),zs(n)),zs(o))},Object.defineProperty(e.prototype,"pointsPosition",{get:function(){var t=this,e=t.x,n=t.y,r=t.width,o=t.height;return this.points.map((function(t){return{x:t[0]+e-r/2,y:t[1]+n-o/2}}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){var t=Number.MAX_SAFE_INTEGER,e=Number.MIN_SAFE_INTEGER;return this.points.forEach((function(n){var r=Rv(n,1),o=r[0];o<t&&(t=o),o>e&&(e=o)})),e-t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){var t=Number.MAX_SAFE_INTEGER,e=Number.MIN_SAFE_INTEGER;return this.points.forEach((function(n){var r=Rv(n,2),o=r[1];o<t&&(t=o),o>e&&(e=o)})),e-t},enumerable:!1,configurable:!0}),e.prototype.getDefaultAnchor=function(){var t=this,e=this,n=e.x,r=e.y,o=e.width,i=e.height,a=e.points;return a.map((function(e,a){var s=Rv(e,2),u=s[0],l=s[1];return{x:n+u-o/2,y:r+l-i/2,id:"".concat(t.id,"_").concat(a)}}))},e.prototype.resize=function(t){var e=this,n=t.width,r=t.height,o=t.deltaX,i=t.deltaY;this.move(o/2,i/2);var a=yh(this.points,(function(t){var o=Rv(t,2),i=o[0],a=o[1];return[i*n/e.width,a*r/e.height]}));return this.points=a,this.properties.points=a,this.getData()},Cv([up["A"]],e.prototype,"points",void 0),Cv([up["l"]],e.prototype,"pointsPosition",null),Cv([up["l"]],e.prototype,"width",null),Cv([up["l"]],e.prototype,"height",null),e}(gv),Iv=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),kv=function(){return kv=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},kv.apply(this,arguments)},Bv=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},Xv=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.modelType=Xp.RECT_NODE,r.radius=0,r.initNodeData(e),r.setAttributes(),r}return Iv(e,t),e.prototype.setAttributes=function(){t.prototype.setAttributes.call(this);var e=this.properties,n=e.width,r=e.height,o=e.radius;Qn(n)||(this.width=n),Qn(r)||(this.height=r),Qn(o)||(this.radius=o)},e.prototype.getDefaultAnchor=function(){var t=this,e=t.x,n=t.y,r=t.width,o=t.height;return[{x:e,y:n-o/2,id:"".concat(this.id,"_0")},{x:e+r/2,y:n,id:"".concat(this.id,"_1")},{x:e,y:n+o/2,id:"".concat(this.id,"_2")},{x:e-r/2,y:n,id:"".concat(this.id,"_3")}]},e.prototype.getNodeStyle=function(){var e=t.prototype.getNodeStyle.call(this),n=this.graphModel.theme.rect,r=this.properties.style,o=void 0===r?{}:r;return kv(kv(kv({},e),zs(n)),zs(o))},Bv([up["A"]],e.prototype,"radius",void 0),e}(gv),zv=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Hv=function(){return Hv=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Hv.apply(this,arguments)},Uv=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},Gv=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(r=i.next()).done)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(o)throw o.error}}return a},Yv=function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))},Vv=function(t){function e(){var e=t.apply(this,Yv([],Gv(arguments),!1))||this;return e.modelType=Xp.TEXT_NODE,e}return zv(e,t),e.prototype.getTextStyle=function(){var e=t.prototype.getTextStyle.call(this),n=this.graphModel.theme.text,r=this.properties.textStyle;return Hv(Hv(Hv({},e),zs(n)),zs(r))},Object.defineProperty(e.prototype,"width",{get:function(){var t=String(this.text.value).split(/[\r\n]/g),e=this.getTextStyle().fontSize,n=$f({rows:t,fontSize:e,rowsLength:t.length}).width;return n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){var t=String(this.text.value).split(/[\r\n]/g),e=this.getTextStyle().fontSize,n=$f({rows:t,fontSize:e,rowsLength:t.length}).height;return n},enumerable:!1,configurable:!0}),Uv([up["l"]],e.prototype,"width",null),Uv([up["l"]],e.prototype,"height",null),e}(gv),Fv=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Wv=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.modelType=Xp.HTML_NODE,r.setAttributes(),r}return Fv(e,t),e.prototype.setAttributes=function(){t.prototype.setAttributes.call(this);var e=this.properties,n=e.width,r=e.height;n&&(this.width=n),r&&(this.height=r)},e.prototype.getDefaultAnchor=function(){var t=this,e=t.x,n=t.y,r=t.width,o=t.height;return[{x:e,y:n-o/2,id:"".concat(this.id,"_0")},{x:e+r/2,y:n,id:"".concat(this.id,"_1")},{x:e,y:n+o/2,id:"".concat(this.id,"_2")},{x:e-r/2,y:n,id:"".concat(this.id,"_3")}]},e}(gv),Kv="[object Boolean]";function Zv(t){return!0===t||!1===t||he(t)&&de(t)==Kv}var qv=Zv,$v=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},Jv={stopZoomGraph:!1,stopScrollGraph:!1,stopMoveGraph:!1,adjustEdge:!1,adjustEdgeStartAndEnd:!1,adjustNodePosition:!1,hideAnchors:!0,allowRotate:!1,allowResize:!1,nodeSelectedOutline:!0,textEdit:!1,nodeTextEdit:!1,edgeTextEdit:!1,textDraggable:!1,nodeTextDraggable:!1,edgeTextDraggable:!1},Qv=["isSilentMode","stopZoomGraph","stopScrollGraph","stopMoveGraph","snapGrid","adjustEdge","adjustEdgeMiddle","adjustEdgeStartAndEnd","adjustEdgeStart","adjustEdgeEnd","adjustNodePosition","hideAnchors","allowRotate","allowResize","autoExpand","hoverOutline","nodeSelectedOutline","edgeSelectedOutline","textEdit","nodeTextEdit","edgeTextEdit","textDraggable","nodeTextDraggable","edgeTextDraggable","multipleSelectKey","textMode","nodeTextMode","edgeTextMode","nodeTextMultiple","edgeTextMultiple","nodeTextVertical","edgeTextVertical"],tg=function(){function t(t){this.isSilentMode=!1,this.stopZoomGraph=!1,this.stopMoveGraph=!1,this.stopScrollGraph=!1,this.snapGrid=!1,this.textMode=Gp.TEXT,this.textEdit=!0,this.textDraggable=!1,this.nodeTextEdit=!0,this.nodeTextDraggable=!1,this.nodeTextMultiple=!1,this.nodeTextVertical=!1,this.nodeTextMode=Gp.TEXT,this.edgeTextMode=Gp.TEXT,this.edgeTextEdit=!0,this.edgeTextDraggable=!1,this.edgeTextMultiple=!1,this.edgeTextVertical=!1,this.hideAnchors=!1,this.allowRotate=!1,this.allowResize=!1,this.hoverOutline=!0,this.nodeSelectedOutline=!0,this.adjustNodePosition=!0,this.autoExpand=!1,this.adjustEdge=!0,this.adjustEdgeMiddle=!1,this.adjustEdgeStartAndEnd=!1,this.adjustEdgeStart=!1,this.adjustEdgeEnd=!1,this.edgeSelectedOutline=!0,this.multipleSelectKey="",Fu(this,this.computeConfig(t))}return t.prototype.updateEditConfig=function(t){var e=this.computeConfig(t);Fu(this,e)},t.prototype.computeConfig=function(t){var e=t.isSilentMode,n=t.textDraggable,r=t.textMode,o=t.textEdit,i=t.adjustEdgeStartAndEnd,a={};if(!1===e&&Fu(a,this.stagedConfig),!0===e&&e!==this.isSilentMode){var s=dd(Jv,Qv);this.stagedConfig=dd(this,Qv),Fu(a,s)}sp(o)||Fu(a,{nodeTextEdit:o,edgeTextEdit:o}),sp(n)||Fu(a,{nodeTextDraggable:n,edgeTextDraggable:n}),r&&Fu(a,{nodeTextMode:r,edgeTextMode:r}),qv(i)&&Fu(a,{adjustEdgeStart:i,adjustEdgeEnd:i});var u=dd(t,Qv);return Fu(a,u)},t.prototype.updateTextMode=function(t){this.textMode=t,this.edgeTextMode=t,this.nodeTextMode=t},t.prototype.getConfig=function(){return dd(this,Qv)},$v([up["A"]],t.prototype,"isSilentMode",void 0),$v([up["A"]],t.prototype,"stopZoomGraph",void 0),$v([up["A"]],t.prototype,"stopMoveGraph",void 0),$v([up["A"]],t.prototype,"stopScrollGraph",void 0),$v([up["A"]],t.prototype,"snapGrid",void 0),$v([up["A"]],t.prototype,"textMode",void 0),$v([up["A"]],t.prototype,"textEdit",void 0),$v([up["A"]],t.prototype,"textDraggable",void 0),$v([up["A"]],t.prototype,"nodeTextEdit",void 0),$v([up["A"]],t.prototype,"nodeTextDraggable",void 0),$v([up["A"]],t.prototype,"nodeTextMultiple",void 0),$v([up["A"]],t.prototype,"nodeTextVertical",void 0),$v([up["A"]],t.prototype,"nodeTextMode",void 0),$v([up["A"]],t.prototype,"edgeTextMode",void 0),$v([up["A"]],t.prototype,"edgeTextEdit",void 0),$v([up["A"]],t.prototype,"edgeTextDraggable",void 0),$v([up["A"]],t.prototype,"edgeTextMultiple",void 0),$v([up["A"]],t.prototype,"edgeTextVertical",void 0),$v([up["A"]],t.prototype,"hideAnchors",void 0),$v([up["A"]],t.prototype,"allowRotate",void 0),$v([up["A"]],t.prototype,"allowResize",void 0),$v([up["A"]],t.prototype,"hoverOutline",void 0),$v([up["A"]],t.prototype,"nodeSelectedOutline",void 0),$v([up["A"]],t.prototype,"adjustNodePosition",void 0),$v([up["A"]],t.prototype,"autoExpand",void 0),$v([up["A"]],t.prototype,"adjustEdge",void 0),$v([up["A"]],t.prototype,"adjustEdgeMiddle",void 0),$v([up["A"]],t.prototype,"adjustEdgeStartAndEnd",void 0),$v([up["A"]],t.prototype,"adjustEdgeStart",void 0),$v([up["A"]],t.prototype,"adjustEdgeEnd",void 0),$v([up["A"]],t.prototype,"edgeSelectedOutline",void 0),$v([up["j"]],t.prototype,"updateEditConfig",null),$v([up["j"]],t.prototype,"updateTextMode",null),t}(),eg=function(){return Zt["a"].Date.now()},ng=eg,rg="Expected a function",og=Math.max,ig=Math.min;function ag(t,e,n){var r,o,i,a,s,u,l=0,c=!1,p=!1,d=!0;if("function"!=typeof t)throw new TypeError(rg);function f(e){var n=r,i=o;return r=o=void 0,l=e,a=t.apply(i,n),a}function h(t){return l=t,s=setTimeout(g,e),c?f(t):a}function y(t){var n=t-u,r=t-l,o=e-n;return p?ig(o,i-r):o}function v(t){var n=t-u,r=t-l;return void 0===u||n>=e||n<0||p&&r>=i}function g(){var t=ng();if(v(t))return m(t);s=setTimeout(g,y(t))}function m(t){return s=void 0,d&&r?f(t):(r=o=void 0,a)}function _(){void 0!==s&&clearTimeout(s),l=0,r=u=o=s=void 0}function b(){return void 0===s?a:m(ng())}function x(){var t=ng(),n=v(t);if(r=arguments,o=this,u=t,n){if(void 0===s)return h(u);if(p)return clearTimeout(s),s=setTimeout(g,e),f(u)}return void 0===s&&(s=setTimeout(g,e)),a}return e=cu(e)||0,Tn(n)&&(c=!!n.leading,p="maxWait"in n,i=p?og(cu(n.maxWait)||0,e):i,d="trailing"in n?!!n.trailing:d),x.cancel=_,x.flush=b,x}var sg=ag,ug="*",lg=function(){function t(){this._events={}}return t.prototype.on=function(t,e,n){var r=this;null===t||void 0===t||t.split(",").forEach((function(t){t=t.trim(),r._events[t]||(r._events[t]=[]),r._events[t].push({callback:e,once:!!n})}))},t.prototype.once=function(t,e){var n=this;null===t||void 0===t||t.split(",").forEach((function(t){t=t.trim(),n.on(t,e,!0)}))},t.prototype.emit=function(t,e){var n=this;null===t||void 0===t||t.split(",").forEach((function(t){var r=n._events[t]||[],o=n._events[ug]||[],i=function(r){for(var o=r.length,i=0;i<o;i++)if(r[i]){var a=r[i],s=a.callback,u=a.once;u&&(r.splice(i,1),0===r.length&&delete n._events[t],o--,i--),s.apply(n,[e])}};i(r),i(o)}))},t.prototype.off=function(t,e){var n=this;t||(this._events={}),t.split(",").forEach((function(t){if(e){for(var r=n._events[t]||[],o=r.length,i=0;i<o;i++)r[i].callback===e&&(r.splice(i,1),o--,i--);0===r.length&&delete n._events[t]}else delete n._events[t]}))},t.prototype.getEvents=function(){return this._events},t.prototype.destroy=function(){this._events={}},t}(),cg=lg,pg=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),dg=function(){return dg=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},dg.apply(this,arguments)},fg=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},hg=function(t){function e(e){var n=t.call(this)||this;n.stepScrollX=0,n.stepScrollY=0,n.onDragging=function(t){var e=t.deltaX,r=t.deltaY;n.setState({isDragging:!0});var o=n.props.graphModel,i=o.transformModel,a=o.editConfigModel;!0!==a.stopMoveGraph&&i.translate(e,r)},n.onDragEnd=function(){n.setState({isDragging:!1})},n.zoomHandler=function(t){var e=n.props,r=e.graphModel,o=r.editConfigModel,i=r.transformModel,a=r.gridSize,s=e.graphModel,u=t.deltaX,l=t.deltaY,c=o.stopScrollGraph,p=o.stopZoomGraph;if(c||t.ctrlKey||t.metaKey){if(!p){t.preventDefault();var d=s.getPointByClient({x:t.clientX,y:t.clientY}),f=d.canvasOverlayPosition,h=f.x,y=f.y;i.zoom(t.deltaY<0,[h,y])}}else{if(t.preventDefault(),n.stepScrollX+=u,n.stepScrollY+=l,Math.abs(n.stepScrollX)>=a){var v=n.stepScrollX%a,g=n.stepScrollX-v;i.translate(-g*i.SCALE_X,0),n.stepScrollX=v}if(Math.abs(n.stepScrollY)>=a){var m=n.stepScrollY%a,_=n.stepScrollY-m;i.translate(0,-_*i.SCALE_Y),n.stepScrollY=m}}},n.clickHandler=function(t){var e=t.target;if("canvas-overlay"===e.getAttribute("name")){var r=n.props.graphModel,o=r.selectElements;o.size>0&&r.clearSelectElements(),r.eventCenter.emit(zp.BLANK_CLICK,{e:t})}},n.handleContextMenu=function(t){var e=t.target;if("canvas-overlay"===e.getAttribute("name")){t.preventDefault();var r=n.props.graphModel,o=r.getPointByClient({x:t.clientX,y:t.clientY});r.eventCenter.emit(zp.BLANK_CONTEXTMENU,{e:t,position:o})}},n.mouseDownHandler=function(t){var e=n.props.graphModel,r=e.eventCenter,o=e.editConfigModel,i=e.transformModel.SCALE_X,a=e.gridSize,s=o.adjustEdge,u=o.adjustNodePosition,l=o.stopMoveGraph,c=t.target,p=!s&&!u;("canvas-overlay"===c.getAttribute("name")||p)&&(!0!==l?(n.stepDrag.setStep(a*i),n.stepDrag.handleMouseDown(t)):r.emit(zp.BLANK_MOUSEDOWN,{e:t}),n.clickHandler(t))};var r=e.graphModel,o=r.gridSize,i=r.eventCenter;return n.stepDrag=new Zp({onDragging:n.onDragging,onDragEnd:n.onDragEnd,step:o,eventType:"BLANK",isStopPropagation:!1,eventCenter:i,model:void 0}),n.state={isDragging:!1},n}return pg(e,t),e.prototype.render=function(){var t=this.props.graphModel.transformModel,e=t.getTransformStyle().transform,n=this.props,r=n.children,o=n.dnd,i=this.state.isDragging;return zt("svg",dg({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",name:"canvas-overlay",onWheel:this.zoomHandler,onMouseDown:this.mouseDownHandler,onContextMenu:this.handleContextMenu,className:i?"lf-canvas-overlay lf-dragging":"lf-canvas-overlay lf-drag-able"},o.eventMap(),{children:zt("g",{transform:e,children:r})}))},e=fg([Tb],e),e}(u["a"]),yg=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),vg=function(){return vg=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},vg.apply(this,arguments)},gg=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},mg=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(r=i.next()).done)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(o)throw o.error}}return a},_g=function(t){function e(){var e=t.call(this)||this;return e.onDragging=function(t){var n=t.event,r=e.props,o=r.graphModel,i=r.bezierModel,a=r.type,s=o.getPointByClient({x:n.clientX,y:n.clientY}).canvasOverlayPosition,u=s.x,l=s.y;i.updateAdjustAnchor({x:u,y:l},a),o.eventCenter.emit(zp.EDGE_ADJUST,{data:i.getData()})},e.onDragEnd=function(){var t=e.props.bezierModel;t.isDragging=!1},e.dragHandler=new Zp({onDragging:e.onDragging,onDragEnd:e.onDragEnd}),e}return yg(e,t),e.prototype.render=function(){var t=this,e=this.props.position,n=e.x,r=e.y,o=this.props.bezierModel,i=o.getEdgeStyle().adjustAnchor;return zt(Gh,vg({className:"lf-bezier-adjust-anchor",x:n,y:r},i,{onMouseDown:function(e){t.dragHandler.handleMouseDown(e)}}))},e}(u["a"]),bg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return yg(e,t),e.prototype.getBezierAdjust=function(t,e){var n=t.path,r=t.id,o=af(n),i=mg(o,4),a=i[0],s=i[1],u=i[2],l=i[3],c=t.getEdgeStyle().adjustLine,p=[];return p.push(zt(Nh,vg({x1:a.x,y1:a.y,x2:s.x,y2:s.y},c))),p.push(zt(_g,{position:s,bezierModel:t,graphModel:e,type:"sNext"},"".concat(r,"_ePre"))),p.push(zt(Nh,vg({x1:l.x,y1:l.y,x2:u.x,y2:u.y},c))),p.push(zt(_g,{position:u,bezierModel:t,graphModel:e,type:"ePre"},"".concat(r,"_sNext"))),p},e.prototype.selectedBezierEdge=function(){for(var t=this.props.graphModel,e=t.edges,n=[],r=0;r<e.length;r++){var o=e[r];o.isSelected&&o.modelType===Xp.BEZIER_EDGE&&o.draggable&&n.push(this.getBezierAdjust(o,t))}return n},e.prototype.render=function(){return zt("g",{className:"lf-bezier-adjust",children:this.selectedBezierEdge()})},e=gg([Tb],e),e}(u["a"]),xg=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Eg=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},Og=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return xg(e,t),e.prototype.render=function(){var t=this.props.background;return zt("div",{className:"lf-background",children:zt("div",{style:Tn(t)?t:{},className:"lf-background-area"})})},e=Eg([Tb],e),e}(u["a"]),wg=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ag=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},Sg=function(t){function e(e){var n=t.call(this,e)||this;return n.id=uh(),n.gridOptions=n.props.graphModel.grid,n}return wg(e,t),e.prototype.renderDot=function(){var t=this.gridOptions,e=t.config,n=t.size,r=void 0===n?1:n,o=t.visible,i=null!==e&&void 0!==e?e:{},a=i.color,s=i.thickness,u=void 0===s?2:s,l=Math.min(Math.max(2,u),r/4),c=o?1:0;return zt("g",{fill:a,opacity:c,children:[zt("circle",{cx:0,cy:0,r:l/2}),zt("circle",{cx:0,cy:r,r:l/2}),zt("circle",{cx:r,cy:0,r:l/2}),zt("circle",{cx:r,cy:r,r:l/2})]})},e.prototype.renderMesh=function(){var t=this.gridOptions,e=t.config,n=t.size,r=void 0===n?1:n,o=t.visible,i=null!==e&&void 0!==e?e:{},a=i.color,s=i.thickness,u=void 0===s?1:s,l=Math.min(Math.max(1,u),r/2),c="M 0 0 H ".concat(r," V ").concat(r," H 0 Z"),p=o?1:0;return zt("path",{d:c,stroke:a,strokeWidth:l/2,opacity:p,fill:"transparent"})},e.prototype.render=function(){var t=this.props.graphModel.transformModel,e=this.gridOptions,n=e.type,r=e.size,o=void 0===r?1:r,i=t.SCALE_X,a=t.SKEW_Y,s=t.SKEW_X,u=t.SCALE_Y,l=t.TRANSLATE_X,c=t.TRANSLATE_Y,p=[i,a,s,u,l,c].join(","),d="matrix(".concat(p,")");return zt("div",{className:"lf-grid",children:zt("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%",children:[zt("defs",{children:zt("pattern",{id:this.id,patternUnits:"userSpaceOnUse",patternTransform:d,x:"0",y:"0",width:o,height:o,children:["dot"===n&&this.renderDot(),"mesh"===n&&this.renderMesh()]})}),zt("rect",{width:"100%",height:"100%",fill:"url(#".concat(this.id,")")})]})})},e=Ag([Tb],e),e}(u["a"]);(function(t){function e(e){var n=zs(t.defaultProps);return Fu(n,"number"===typeof e?{size:e}:"boolean"===typeof e?{visible:e}:e)}t.defaultProps={size:Wp,visible:!0,type:"dot",config:{color:"#ababab",thickness:1}},t.getGridOptions=e})(Sg||(Sg={}));var Mg=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),jg=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},Tg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Mg(e,t),e.prototype.render=function(){var t=this.props.graphModel.transformModel,e=t.getTransformStyle().transform,n=this.props.children;return zt("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%",className:"modification-overlay",children:zt("g",{transform:e,children:n})})},e=jg([Tb],e),e}(u["a"]),Pg=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Dg=function(){return Dg=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Dg.apply(this,arguments)},Ng=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},Cg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Pg(e,t),e.prototype.getNodesOutline=function(){var t=this.props.graphModel,e=t.nodes,n=t.editConfigModel,r=n.hoverOutline,o=n.nodeSelectedOutline,i=[];return e.forEach((function(t){if(t.isHovered||t.isSelected){var e=t.isHovered,n=t.isSelected,a=t.x,s=t.y,u=t.width,l=t.height;if(o&&n||r&&e){var c=t.getOutlineStyle(),p={};if(Object.keys(c).forEach((function(t){"hover"!==t&&(p[t]=c[t])})),e){var d=c.hover;p=Dg(Dg({},p),d)}i.push(zt(Ih,Dg({transform:t.transform,className:"lf-outline-node",x:a,y:s,width:u+10,height:l+10},p)))}}})),i},e.prototype.getEdgeOutline=function(){for(var t=this.props.graphModel,e=t.edges,n=t.editConfigModel,r=n.edgeSelectedOutline,o=n.hoverOutline,i=[],a=0;a<e.length;a++){var s=e[a];(r&&s.isSelected||o&&s.isHovered)&&(s.modelType===Xp.LINE_EDGE?i.push(this.getLineOutline(s)):s.modelType===Xp.POLYLINE_EDGE?i.push(this.getPolylineOutline(s)):s.modelType===Xp.BEZIER_EDGE&&i.push(this.getBezierOutline(s)))}return i},e.prototype.getLineOutline=function(t){var e=t.startPoint,n=t.endPoint,r=(e.x+n.x)/2,o=(e.y+n.y)/2,i=Math.abs(e.x-n.x)+10,a=Math.abs(e.y-n.y)+10,s=t.getOutlineStyle();return zt(Ih,Dg({className:"lf-outline-edge",x:r,y:o,width:i,height:a},s))},e.prototype.getPolylineOutline=function(t){var e=t.points,n=Qd(e),r=Pd(n,8),o=r.x,i=r.y,a=r.width,s=r.height,u=t.getOutlineStyle();return zt(Ih,Dg({className:"lf-outline",x:o,y:i,width:a,height:s},u))},e.prototype.getBezierOutline=function(t){var e=t.path,n=af(e),r=Pd(n,8),o=r.x,i=r.y,a=r.width,s=r.height,u=t.getOutlineStyle();return zt(Ih,Dg({className:"lf-outline",x:o,y:i,width:a,height:s},u))},e.prototype.render=function(){return zt("g",{className:"lf-outline",children:[this.getNodesOutline(),this.getEdgeOutline()]})},e=Ng([Tb],e),e}(u["a"]),Rg=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Lg=function(){return Lg=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Lg.apply(this,arguments)},Ig=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},kg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Rg(e,t),e.prototype.render=function(){var t=this.props.snaplineModel,e=null!==t&&void 0!==t?t:{},n=e.position,r=e.isShowHorizontal,o=e.isShowVertical,i=null===t||void 0===t?void 0:t.getStyle(),a=null!==n&&void 0!==n?n:{},s=a.x,u=void 0===s?0:s,l=a.y,c=void 0===l?0:l,p=Lg(Lg({x1:-1e5,y1:c,x2:1e5,y2:c},i),{stroke:r?null===i||void 0===i?void 0:i.stroke:"none"}),d=Lg(Lg({x1:u,y1:-1e5,x2:u,y2:1e5},i),{stroke:o?null===i||void 0===i?void 0:i.stroke:"none"});return zt("g",{className:"lf-snapline",children:[zt(Ch,Lg({},p)),zt(Ch,Lg({},d))]})},e=Ig([Tb],e),e}(u["a"]),Bg=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Xg=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},zg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Bg(e,t),e.prototype.componentDidMount=function(){this.triggerToolRender()},e.prototype.componentDidUpdate=function(){this.triggerToolRender()},e.prototype.getTools=function(){var t=this.props,e=t.tool,n=t.graphModel,r=n.textEditElement,o=e.getTools(),i=o.map((function(t){return Object(u["e"])(t,{textEditElement:r,graphModel:n,lf:e.instance})}));return e.components=i,i},e.prototype.triggerToolRender=function(){var t=this.props,e=t.tool,n=t.graphModel,r=document.querySelector("#ToolOverlay_".concat(n.flowId)),o=e.getInstance();o.components.forEach((function(t){return t(o,r)})),o.components=[]},e.prototype.render=function(){var t=this.props.graphModel;return zt("div",{className:"lf-tool-overlay",id:"ToolOverlay_".concat(t.flowId),children:this.getTools()})},e=Xg([Tb],e),e}(u["a"]),Hg=function(){return Hg=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Hg.apply(this,arguments)},Ug=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},Gg=function(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Yg=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(r=i.next()).done)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(o)throw o.error}}return a},Vg=function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))},Fg=function(){function t(t){var e,n,r=this;this.modelMap=new Map,this.nodeModelMap=new Map,this.edgeModelMap=new Map,this.elementsModelMap=new Map,this.nodeMoveRules=[],this.nodeResizeRules=[],this.nodes=[],this.edges=[],this.overlapMode=Hp.DEFAULT,this.gridSize=1,this.partial=!1,this.waitCleanEffects=[];var o=t.container,i=t.partial,a=t.background,s=void 0===a?{}:a,u=t.grid,l=t.idGenerator,c=t.edgeGenerator,p=t.animation,d=t.customTrajectory;this.rootEl=o,this.partial=!!i,this.background=s,"object"===typeof u&&t.snapGrid&&(this.gridSize=u.size||1),this.theme=Py(t.style),this.grid=Sg.getGridOptions(null!==u&&void 0!==u&&u),this.edgeType=t.edgeType||"polyline",this.animation=Cp(p),this.overlapMode=t.overlapMode||Hp.DEFAULT,this.width=null!==(e=t.width)&&void 0!==e?e:this.rootEl.getBoundingClientRect().width,this.isContainerWidth=Qn(t.width),this.height=null!==(n=t.height)&&void 0!==n?n:this.rootEl.getBoundingClientRect().height,this.isContainerHeight=Qn(t.height);var f=new ResizeObserver(sg((function(t){var e,n;try{for(var o=Gg(t),i=o.next();!i.done;i=o.next()){var a=i.value;a.target===r.rootEl&&(r.resize(),r.eventCenter.emit("graph:resize",{target:r.rootEl,contentRect:a.contentRect}))}}catch(s){e={error:s}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}}),16));f.observe(this.rootEl),this.waitCleanEffects.push((function(){f.disconnect()})),this.eventCenter=new cg,this.editConfigModel=new tg(t),this.transformModel=new Qg(this.eventCenter,t),this.flowId=uh(),this.idGenerator=l,this.edgeGenerator=df(this,c),this.customTrajectory=d}return Object.defineProperty(t.prototype,"nodesMap",{get:function(){return this.nodes.reduce((function(t,e,n){return t[e.id]={index:n,model:e},t}),{})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"edgesMap",{get:function(){return this.edges.reduce((function(t,e,n){return t[e.id]={index:n,model:e},t}),{})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"modelsMap",{get:function(){return Vg(Vg([],Yg(this.nodes),!1),Yg(this.edges),!1).reduce((function(t,e){return t[e.id]=e,t}),{})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sortElements",{get:function(){for(var t=Vg(Vg([],Yg(this.nodes),!1),Yg(this.edges),!1).sort((function(t,e){return t.zIndex-e.zIndex})),e=[],n=[-Vp,-Vp],r=[this.width+Vp,this.height+Vp],o=0;o<t.length;o++){var i=t[o];i.visible&&(!this.partial||i.isSelected||this.isElementInArea(i,n,r,!1,!1))&&e.push(i)}return e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textEditElement",{get:function(){var t=this.nodes.find((function(t){return t.state===kp.TEXT_EDIT})),e=this.edges.find((function(t){return t.state===kp.TEXT_EDIT}));return t||e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectElements",{get:function(){var t=new Map;return this.nodes.forEach((function(e){e.isSelected&&t.set(e.id,e)})),this.edges.forEach((function(e){e.isSelected&&t.set(e.id,e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectNodes",{get:function(){var t=[];return this.nodes.forEach((function(e){e.isSelected&&t.push(e)})),t},enumerable:!1,configurable:!0}),t.prototype.getAreaElement=function(t,e,n,r,o){var i=this;void 0===n&&(n=!0),void 0===r&&(r=!0),void 0===o&&(o=!1);var a=[];return $n(Vg(Vg([],Yg(this.nodes),!1),Yg(this.edges),!1),(function(s){var u=i.isElementInArea(s,t,e,n,r);o&&!s.visible||!u||a.push(s)})),a},t.prototype.getModel=function(t){return this.modelMap.get(t)},t.prototype.getNodeModelById=function(t){var e;return this.fakeNode&&t===this.fakeNode.id?this.fakeNode:null===(e=this.nodesMap[t])||void 0===e?void 0:e.model},t.prototype.getPointByClient=function(t){var e=t.x,n=t.y,r=this.rootEl.getBoundingClientRect(),o={x:e-r.left,y:n-r.top},i=Yg(this.transformModel.HtmlPointToCanvasPoint([o.x,o.y]),2),a=i[0],s=i[1],u={x:a,y:s};return{domOverlayPosition:o,canvasOverlayPosition:u}},t.prototype.isElementInArea=function(t,e,n,r,o){var i;if(void 0===r&&(r=!0),void 0===o&&(o=!0),t.BaseType===Bp.NODE){t=t;for(var a=Hf(t),s=a.minX,u=a.minY,l=a.maxX,c=a.maxY,p=[{x:s,y:u},{x:l,y:u},{x:l,y:c},{x:s,y:c}],d=o,f=0;f<p.length;f++){var h=p[f],y=h.x,v=h.y;if(i=Yg(this.transformModel.CanvasPointToHtmlPoint([y,v]),2),y=i[0],v=i[1],_f([y,v],e,n)!==o){d=!o;break}}return d}if(t.BaseType===Bp.EDGE){t=t;var g=t.startPoint,m=t.endPoint,_=this.transformModel.CanvasPointToHtmlPoint([g.x,g.y]),b=this.transformModel.CanvasPointToHtmlPoint([m.x,m.y]),x=_f(_,e,n),E=_f(b,e,n);return r?x&&E:x||E}return!1},t.prototype.graphDataToModel=function(t){var e=this;if(t)if(this.elementsModelMap.clear(),this.nodeModelMap.clear(),this.edgeModelMap.clear(),t.nodes?this.nodes=yh(t.nodes,(function(t){var n=e.getModelAfterSnapToGrid(t);return e.elementsModelMap.set(n.id,n),e.nodeModelMap.set(n.id,n),n})):this.nodes=[],t.edges){var n=this.edgeType;this.edges=yh(t.edges,(function(t){var r,o=e.getModel(null!==(r=t.type)&&void 0!==r?r:n);if(!o)throw new Error("找不到".concat(t.type,"对应的边。"));var i=new o(t,e);return e.edgeModelMap.set(i.id,i),e.elementsModelMap.set(i.id,i),i}))}else this.edges=[];else this.clearData()},t.prototype.modelToGraphData=function(){var t=[];this.edges.forEach((function(e){var n=e.getData();n&&!e.virtual&&t.push(n)}));var e=[];return this.nodes.forEach((function(t){var n=t.getData();n&&!t.virtual&&e.push(n)})),{nodes:e,edges:t}},t.prototype.modelToHistoryData=function(){for(var t=!1,e=[],n=0;n<this.nodes.length;n++){var r=this.nodes[n];if(r.isDragging){t=!0;break}e.push(r.getHistoryData())}if(t)return!1;for(var o=!1,i=[],a=0;a<this.edges.length;a++){var s=this.edges[a];if(s.isDragging){o=!0;break}i.push(s.getHistoryData())}return!o&&{nodes:e,edges:i}},t.prototype.getEdgeModelById=function(t){var e;return null===(e=this.edgesMap[t])||void 0===e?void 0:e.model},t.prototype.getElement=function(t){return this.modelsMap[t]},t.prototype.getNodeEdges=function(t){for(var e=[],n=0;n<this.edges.length;n++){var r=this.edges[n],o=r.sourceNodeId===t,i=r.targetNodeId===t;(o||i)&&e.push(r)}return e},t.prototype.getSelectElements=function(t){void 0===t&&(t=!0);var e=this.selectElements,n={nodes:[],edges:[]};return e.forEach((function(r){if(r.BaseType===Bp.NODE&&n.nodes.push(r.getData()),r.BaseType===Bp.EDGE){var o=r.getData(),i=e.get(o.sourceNodeId)&&e.get(o.targetNodeId);(t||i)&&n.edges.push(o)}})),n},t.prototype.updateAttributes=function(t,e){var n=this.getElement(t);null===n||void 0===n||n.updateAttributes(e)},t.prototype.changeNodeId=function(t,e){return e||(e=uh()),this.nodesMap[e]?(console.warn("当前流程图已存在节点".concat(e,", 修改失败")),""):this.nodesMap[t]?(this.edges.forEach((function(n){n.sourceNodeId===t&&(n.sourceNodeId=e),n.targetNodeId===t&&(n.targetNodeId=e)})),this.nodesMap[t].model.id=e,this.nodesMap[e]=this.nodesMap[t],e):(console.warn("当前流程图找不到节点".concat(t,", 修改失败")),"")},t.prototype.changeEdgeId=function(t,e){return e||(e=uh()),this.edgesMap[e]?(console.warn("当前流程图已存在边: ".concat(e,", 修改失败")),""):this.edgesMap[t]?(this.edges.forEach((function(n){n.id===t&&n.changeEdgeId(e)})),e):(console.warn("当前流程图找不到边: ".concat(e,", 修改失败")),"")},t.prototype.getTextModel=function(t){var e=this.editConfigModel,n=e.textMode,r=e.nodeTextMode,o=e.edgeTextMode;return t.BaseType===Bp.NODE?t.textMode||r||n||Gp.TEXT:t.BaseType===Bp.EDGE?t.textMode||o||n||Gp.TEXT:void 0},t.prototype.setTextMode=function(t,e){this.editConfigModel.updateEditConfig({textMode:t})},t.prototype.setFakeNode=function(t){this.fakeNode=t},t.prototype.removeFakeNode=function(){this.fakeNode=null},t.prototype.setModel=function(t,e){return this.modelMap.set(t,e)},t.prototype.toFront=function(t){var e,n,r,o=(null===(e=this.nodesMap[t])||void 0===e?void 0:e.model)||(null===(n=this.edgesMap[t])||void 0===n?void 0:n.model);o&&(this.overlapMode===Hp.DEFAULT&&(null===(r=this.topElement)||void 0===r||r.setZIndex(),o.setZIndex(Fp),this.topElement=o),this.overlapMode===Hp.INCREASE&&this.setElementZIndex(t,"top"))},t.prototype.setElementZIndex=function(t,e){var n,r,o=(null===(n=this.nodesMap[t])||void 0===n?void 0:n.model)||(null===(r=this.edgesMap[t])||void 0===r?void 0:r.model);if(o){var i=void 0;"number"===typeof e?i=e:("top"===e&&(i=Ry()),"bottom"===e&&(i=Ly())),o.setZIndex(i)}},t.prototype.deleteNode=function(t){var e=this.nodesMap[t].model,n=e.getData();this.deleteEdgeBySource(t),this.deleteEdgeByTarget(t),this.nodes.splice(this.nodesMap[t].index,1),this.eventCenter.emit(zp.NODE_DELETE,{data:n,model:e})},t.prototype.addNode=function(t,e,n){void 0===e&&(e=zp.NODE_ADD);var r=Lp(t),o=r.id;o&&this.nodesMap[o]&&delete r.id;var i=this.getModelAfterSnapToGrid(r);this.nodes.push(i);var a=i.getData(),s={data:a};return n&&(s.e=n),this.eventCenter.emit(e,s),i},t.prototype.getModelAfterSnapToGrid=function(t){var e=this.getModel(t.type),n=this.editConfigModel.snapGrid;if(!e)throw new Error("找不到".concat(t.type,"对应的节点，请确认是否已注册此类型节点。"));var r=t.x,o=t.y;r&&o&&(t.x=vf(r,this.gridSize,n),t.y=vf(o,this.gridSize,n),"object"===typeof t.text&&null!==t.text&&(t.text.x+=t.x-r,t.text.y+=t.y-o));var i=new e(t,this);return this.nodeModelMap.set(i.id,i),this.elementsModelMap.set(i.id,i),i},t.prototype.cloneNode=function(t){var e=this.getNodeModelById(t),n=null===e||void 0===e?void 0:e.getData();if(n){n.x+=30,n.y+=30,n.id="","object"===typeof n.text&&null!==n.text&&(n.text.x+=30,n.text.y+=30);var r=this.addNode(n);return r.setSelected(!0),null===e||void 0===e||e.setSelected(!1),r.getData()}},t.prototype.moveNode=function(t,e,n,r){var o;void 0===r&&(r=!1);var i=this.nodesMap[t];if(i){var a=i.model;o=Yg(a.getMoveDistance(e,n,r),2),e=o[0],n=o[1],this.moveEdge(t,e,n)}else console.warn("不存在id为".concat(t,"的节点"))},t.prototype.moveNode2Coordinate=function(t,e,n,r){void 0===r&&(r=!1);var o=this.nodesMap[t];if(o){var i=o.model,a=i.x,s=i.y,u=e-a,l=n-s;this.moveNode(t,u,l,r)}else console.warn("不存在id为".concat(t,"的节点"))},t.prototype.editText=function(t){this.setElementStateById(t,kp.TEXT_EDIT)},t.prototype.addEdge=function(t){var e=Lp(t),n=e.type;n||(n=this.edgeType),e.id&&this.edgesMap[e.id]&&delete e.id;var r=this.getModel(n);if(!r)throw new Error("找不到".concat(n,"对应的边，请确认是否已注册此类型边。"));var o=new r(Hg(Hg({},e),{type:n}),this);this.edgeModelMap.set(o.id,o),this.elementsModelMap.set(o.id,o);var i=o.getData();return this.edges.push(o),this.eventCenter.emit(zp.EDGE_ADD,{data:i}),o},t.prototype.moveEdge=function(t,e,n){for(var r=0;r<this.edges.length;r++){var o=this.edges[r],i=o.textPosition,a=i.x,s=i.y,u=this.edges[r].sourceNodeId===t,l=this.edges[r].targetNodeId===t;u&&o.moveStartPoint(e,n),l&&o.moveEndPoint(e,n),(u||l)&&this.handleEdgeTextMove(o,a,s)}},t.prototype.handleEdgeTextMove=function(t,e,n){var r;if(t.customTextPosition)t.resetTextPosition();else{if(t.modelType===Xp.POLYLINE_EDGE&&(null===(r=t.text)||void 0===r?void 0:r.value)){var o=t.text,i=lf(o,t.points);t.moveText(i.x-o.x,i.y-o.y)}var a=t.textPosition,s=a.x,u=a.y;t.moveText(s-e,u-n)}},t.prototype.deleteEdgeBySourceAndTarget=function(t,e){for(var n=0;n<this.edges.length;n++)if(this.edges[n].sourceNodeId===t&&this.edges[n].targetNodeId===e){var r=this.edges[n].getData();this.edges.splice(n,1),n--,this.eventCenter.emit(zp.EDGE_DELETE,{data:r})}},t.prototype.deleteEdgeById=function(t){var e=this.edgesMap[t];if(e){var n=this.edgesMap[t].index,r=this.edgesMap[t].model.getData();this.edges.splice(n,1),this.eventCenter.emit(zp.EDGE_DELETE,{data:r})}},t.prototype.deleteEdgeBySource=function(t){for(var e=0;e<this.edges.length;e++)if(this.edges[e].sourceNodeId===t){var n=this.edges[e].getData();this.edges.splice(e,1),e--,this.eventCenter.emit(zp.EDGE_DELETE,{data:n})}},t.prototype.deleteEdgeByTarget=function(t){for(var e=0;e<this.edges.length;e++)if(this.edges[e].targetNodeId===t){var n=this.edges[e].getData();this.edges.splice(e,1),e--,this.eventCenter.emit(zp.EDGE_DELETE,{data:n})}},t.prototype.setElementStateById=function(t,e,n){this.nodes.forEach((function(r){r.id===t?r.setElementState(e,n):r.setElementState(kp.DEFAULT)})),this.edges.forEach((function(r){r.id===t?r.setElementState(e,n):r.setElementState(kp.DEFAULT)}))},t.prototype.updateText=function(t,e){var n=ip(Vg(Vg([],Yg(this.nodes),!1),Yg(this.edges),!1),(function(e){return e.id===t}));null===n||void 0===n||n.updateText(e)},t.prototype.selectNodeById=function(t,e){var n;void 0===e&&(e=!1),e||this.clearSelectElements();var r=null===(n=this.nodesMap[t])||void 0===n?void 0:n.model;null===r||void 0===r||r.setSelected(!0)},t.prototype.selectEdgeById=function(t,e){var n;void 0===e&&(e=!1),e||this.clearSelectElements();var r=null===(n=this.edgesMap[t])||void 0===n?void 0:n.model;null===r||void 0===r||r.setSelected(!0)},t.prototype.selectElementById=function(t,e){void 0===e&&(e=!1),e||this.clearSelectElements();var n=this.getElement(t);null===n||void 0===n||n.setSelected(!0)},t.prototype.clearSelectElements=function(){var t;this.selectElements.forEach((function(t){null===t||void 0===t||t.setSelected(!1)})),this.selectElements.clear(),this.overlapMode===Hp.DEFAULT&&(null===(t=this.topElement)||void 0===t||t.setZIndex())},t.prototype.moveNodes=function(t,e,n,r){var o,i,a,s=this;void 0===r&&(r=!1);for(var u=t.reduce((function(t,o){var i,a=null===(i=s.nodesMap[o])||void 0===i?void 0:i.model;return a&&(t[o]=a.getMoveDistance(e,n,r)),t}),{}),l=0;l<this.edges.length;l++){var c=this.edges[l],p=c.textPosition,d=p.x,f=p.y,h=u[c.sourceNodeId],y=u[c.targetNodeId],v=void 0,g=void 0;h&&y&&c.modelType===Xp.POLYLINE_EDGE?(o=Yg(h,2),v=o[0],g=o[1],c.updatePointsList(v,g)):(h&&(i=Yg(h,2),v=i[0],g=i[1],c.moveStartPoint(v,g)),y&&(a=Yg(y,2),v=a[0],g=a[1],c.moveEndPoint(v,g))),(h||y)&&this.handleEdgeTextMove(c,d,f)}},t.prototype.addNodeMoveRules=function(t){this.nodeMoveRules.includes(t)||this.nodeMoveRules.push(t)},t.prototype.addNodeResizeRules=function(t){this.nodeResizeRules.includes(t)||this.nodeResizeRules.push(t)},t.prototype.setDefaultEdgeType=function(t){this.edgeType=t},t.prototype.changeNodeType=function(t,e){var n=this.getNodeModelById(t);if(n){var r=n.getData();r.type=e;var o=this.getModel(e);if(!o)throw new Error("找不到".concat(e,"对应的节点，请确认是否已注册此类型节点。"));var i=new o(r,this);this.nodes.splice(this.nodesMap[t].index,1,i);var a=this.getNodeEdges(t);a.forEach((function(e){if(e.sourceNodeId===t){var n=Zf(i,e.startPoint,i.width,i.height);e.updateStartPoint(n)}if(e.targetNodeId===t){n=Zf(i,e.endPoint,i.width,i.height);e.updateEndPoint(n)}}))}else console.warn("找不到id为".concat(t,"的节点"))},t.prototype.changeEdgeType=function(t,e){var n=this.getEdgeModelById(t);if(n){if(n.type!==e){var r=n.getData();r.type=e;var o=this.getModel(e);if(!o)throw new Error("找不到".concat(e,"对应的节点，请确认是否已注册此类型节点。"));delete r.pointsList;var i=new o(r,this);this.edges.splice(this.edgesMap[t].index,1,i)}}else console.warn("找不到id为".concat(t,"的边"))},t.prototype.getNodeIncomingEdge=function(t){var e=[];return this.edges.forEach((function(n){n.targetNodeId===t&&e.push(n)})),e},t.prototype.getNodeOutgoingEdge=function(t){var e=[];return this.edges.forEach((function(n){n.sourceNodeId===t&&e.push(n)})),e},t.prototype.getAnchorIncomingEdge=function(t){var e=[];return this.edges.forEach((function(n){n.targetAnchorId===t&&e.push(n)})),e},t.prototype.getAnchorOutgoingEdge=function(t){var e=[];return this.edges.forEach((function(n){n.sourceAnchorId===t&&e.push(n)})),e},t.prototype.getNodeIncomingNode=function(t){var e=this,n=[];return this.edges.forEach((function(r){var o;r.targetNodeId===t&&n.push(null===(o=e.nodesMap[r.sourceNodeId])||void 0===o?void 0:o.model)})),n},t.prototype.getNodeOutgoingNode=function(t){var e=this,n=[];return this.edges.forEach((function(r){r.sourceNodeId===t&&n.push(e.nodesMap[r.targetNodeId].model)})),n},t.prototype.setTheme=function(t){this.theme=Dy(Hg(Hg({},this.theme),t))},t.prototype.updateGridOptions=function(t){Pp(this.grid,t)},t.prototype.updateGridSize=function(t){this.gridSize=t},t.prototype.updateBackgroundOptions=function(t){qv(t)||qv(this.background)?this.background=t:this.background=Hg(Hg({},this.background),t)},t.prototype.resize=function(t,e){this.width=null!==t&&void 0!==t?t:this.rootEl.getBoundingClientRect().width,this.isContainerWidth=Qn(t),this.height=null!==e&&void 0!==e?e:this.rootEl.getBoundingClientRect().height,this.isContainerHeight=Qn(e),this.width&&this.height||console.warn("渲染画布的时候无法获取画布宽高，请确认在container已挂载到DOM。@see https://github.com/didi/LogicFlow/issues/675")},t.prototype.clearData=function(){this.nodes=[],this.edges=[],this.edgeModelMap.clear(),this.nodeModelMap.clear(),this.elementsModelMap.clear()},t.prototype.getVirtualRectSize=function(){var t=this.nodes,e=[],n=[];t.forEach((function(t){var r=t.x,o=t.y,i=t.width,a=t.height,s=t.getNodeStyle().strokeWidth,u=void 0===s?0:s,l=r+i/2+u,c=r-i/2-u,p=o+a/2+u,d=o-a/2-u;e=e.concat([l,c].filter((function(t){return!Number.isNaN(t)}))),n=n.concat([p,d].filter((function(t){return!Number.isNaN(t)})))}));var r=Math.min.apply(Math,Vg([],Yg(e),!1)),o=Math.max.apply(Math,Vg([],Yg(e),!1)),i=Math.min.apply(Math,Vg([],Yg(n),!1)),a=Math.max.apply(Math,Vg([],Yg(n),!1)),s=o-r||0,u=a-i||0,l=r+s/2,c=i+u/2;return{width:s,height:u,x:l,y:c}},t.prototype.translateCenter=function(){var t=this,e=t.nodes,n=t.width,r=t.height,o=t.rootEl,i=t.transformModel;if(e.length){var a=n||o.clientWidth,s=r||o.clientHeight,u=this.getVirtualRectSize(),l=u.x,c=u.y;i.focusOn(l,c,a,s)}},t.prototype.fitView=function(t,e){void 0===t&&(t=20),void 0===e&&(e=20);var n=this,r=n.nodes,o=n.width,i=n.height,a=n.rootEl,s=n.transformModel;if(r.length){var u=o||a.clientWidth,l=i||a.clientHeight,c=this.getVirtualRectSize(),p=c.width,d=c.height,f=c.x,h=c.y,y=(p+e)/u,v=(d+t)/l,g=1/Math.max(y,v),m=[u/2,l/2];s.zoom(g,m),s.focusOn(f,h,u,l)}},t.prototype.openEdgeAnimation=function(t){var e=this.getEdgeModelById(t);null===e||void 0===e||e.openEdgeAnimation()},t.prototype.closeEdgeAnimation=function(t){var e=this.getEdgeModelById(t);null===e||void 0===e||e.closeEdgeAnimation()},t.prototype.getPartial=function(){return this.partial},t.prototype.setPartial=function(t){this.partial=t},t.prototype.destroy=function(){try{this.waitCleanEffects.forEach((function(t){t()}))}catch(t){console.warn("error on destroy GraphModel",t)}this.waitCleanEffects.length=0,this.eventCenter.destroy()},Ug([up["A"]],t.prototype,"width",void 0),Ug([up["A"]],t.prototype,"height",void 0),Ug([up["A"]],t.prototype,"grid",void 0),Ug([up["A"]],t.prototype,"edgeType",void 0),Ug([up["A"]],t.prototype,"nodes",void 0),Ug([up["A"]],t.prototype,"edges",void 0),Ug([up["A"]],t.prototype,"fakeNode",void 0),Ug([up["A"]],t.prototype,"overlapMode",void 0),Ug([up["A"]],t.prototype,"background",void 0),Ug([up["A"]],t.prototype,"gridSize",void 0),Ug([up["A"]],t.prototype,"transformModel",void 0),Ug([up["A"]],t.prototype,"editConfigModel",void 0),Ug([up["A"]],t.prototype,"partial",void 0),Ug([up["l"]],t.prototype,"nodesMap",null),Ug([up["l"]],t.prototype,"edgesMap",null),Ug([up["l"]],t.prototype,"modelsMap",null),Ug([up["l"]],t.prototype,"sortElements",null),Ug([up["l"]],t.prototype,"textEditElement",null),Ug([up["l"]],t.prototype,"selectElements",null),Ug([up["l"]],t.prototype,"selectNodes",null),Ug([up["j"]],t.prototype,"setTextMode",null),Ug([up["j"]],t.prototype,"setFakeNode",null),Ug([up["j"]],t.prototype,"removeFakeNode",null),Ug([up["j"]],t.prototype,"setModel",null),Ug([up["j"]],t.prototype,"toFront",null),Ug([up["j"]],t.prototype,"setElementZIndex",null),Ug([up["j"]],t.prototype,"deleteNode",null),Ug([up["j"]],t.prototype,"addNode",null),Ug([up["j"]],t.prototype,"cloneNode",null),Ug([up["j"]],t.prototype,"moveNode",null),Ug([up["j"]],t.prototype,"moveNode2Coordinate",null),Ug([up["j"]],t.prototype,"editText",null),Ug([up["j"]],t.prototype,"addEdge",null),Ug([up["j"]],t.prototype,"moveEdge",null),Ug([up["j"]],t.prototype,"deleteEdgeBySourceAndTarget",null),Ug([up["j"]],t.prototype,"deleteEdgeById",null),Ug([up["j"]],t.prototype,"deleteEdgeBySource",null),Ug([up["j"]],t.prototype,"deleteEdgeByTarget",null),Ug([up["j"]],t.prototype,"setElementStateById",null),Ug([up["j"]],t.prototype,"updateText",null),Ug([up["j"]],t.prototype,"selectNodeById",null),Ug([up["j"]],t.prototype,"selectEdgeById",null),Ug([up["j"]],t.prototype,"selectElementById",null),Ug([up["j"]],t.prototype,"clearSelectElements",null),Ug([up["j"]],t.prototype,"moveNodes",null),Ug([up["j"]],t.prototype,"setDefaultEdgeType",null),Ug([up["j"]],t.prototype,"changeNodeType",null),Ug([up["j"]],t.prototype,"changeEdgeType",null),Ug([up["j"]],t.prototype,"getNodeIncomingEdge",null),Ug([up["j"]],t.prototype,"getNodeOutgoingEdge",null),Ug([up["j"]],t.prototype,"getAnchorIncomingEdge",null),Ug([up["j"]],t.prototype,"getAnchorOutgoingEdge",null),Ug([up["j"]],t.prototype,"getNodeIncomingNode",null),Ug([up["j"]],t.prototype,"getNodeOutgoingNode",null),Ug([up["j"]],t.prototype,"setTheme",null),Ug([up["j"]],t.prototype,"resize",null),Ug([up["j"]],t.prototype,"clearData",null),Ug([up["j"]],t.prototype,"translateCenter",null),Ug([up["j"]],t.prototype,"fitView",null),Ug([up["j"]],t.prototype,"openEdgeAnimation",null),Ug([up["j"]],t.prototype,"closeEdgeAnimation",null),Ug([up["j"]],t.prototype,"setPartial",null),t}(),Wg=function(){return Wg=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Wg.apply(this,arguments)},Kg=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},Zg=function(){function t(t){this.isShowHorizontal=!1,this.isShowVertical=!1,this.position={x:0,y:0},this.graphModel=t}return t.prototype.getStyle=function(){return Wg({},this.graphModel.theme.snapline)},t.prototype.getCenterSnapLine=function(t,e){for(var n=t.x,r=t.y,o=!1,i=!1,a=0;a<e.length;a++){var s=e[a];if(s.id!==t.id&&(n===s.x&&(o=!0),r===s.y&&(i=!0),o&&i))break}return{isShowVertical:o,isShowHorizontal:i,position:{x:n,y:r}}},t.prototype.getHorizontalSnapline=function(t,e){var n,r=!1,o=0,i=t.id;if(i){var a=this.graphModel.fakeNode;if(a&&a.id===i)n=Hf(a);else{var s=this.graphModel.getNodeModelById(i);s&&(n=Hf(s))}}for(var u=0;u<e.length;u++){var l=e[u];if(l.id!==t.id){var c=Hf(l);if(c.minY===(null===n||void 0===n?void 0:n.minY)||c.maxY===(null===n||void 0===n?void 0:n.minY)){r=!0,o=n.minY;break}if(c.minY===(null===n||void 0===n?void 0:n.maxY)||c.maxY===(null===n||void 0===n?void 0:n.maxY)){r=!0,o=n.maxY;break}}}return{isShowHorizontal:r,isShowVertical:this.isShowVertical,position:Wg(Wg({},this.position),{y:o})}},t.prototype.getVerticalSnapline=function(t,e){var n,r=!1,o=0,i=t.id;if(i){var a=this.graphModel.fakeNode;if(a&&a.id===i)n=Hf(a);else{var s=this.graphModel.getNodeModelById(i);s&&(n=Hf(s))}}for(var u=0;u<e.length;u++){var l=e[u];if(l.id!==t.id){var c=Hf(l);if(c.minX===(null===n||void 0===n?void 0:n.minX)||c.maxX===(null===n||void 0===n?void 0:n.minX)){r=!0,o=n.minX;break}if(c.minX===(null===n||void 0===n?void 0:n.maxX)||c.maxX===(null===n||void 0===n?void 0:n.maxX)){r=!0,o=n.maxX;break}}}return{isShowHorizontal:this.isShowHorizontal,isShowVertical:r,position:Wg(Wg({},this.position),{x:o})}},t.prototype.getSnapLinePosition=function(t,e){var n=this.getCenterSnapLine(t,e),r=n.isShowHorizontal,o=n.isShowVertical;if(!r){var i=this.getHorizontalSnapline(t,e);i.isShowHorizontal&&(n.isShowHorizontal=i.isShowHorizontal,n.position.y=i.position.y)}if(!o){var a=this.getVerticalSnapline(t,e);a.isShowVertical&&(n.isShowVertical=a.isShowVertical,n.position.x=a.position.x)}return n},t.prototype.setSnaplineInfo=function(t){var e=t.isShowHorizontal,n=t.isShowVertical,r=t.position;this.position=r,this.isShowHorizontal=e,this.isShowVertical=n},t.prototype.clearSnapline=function(){this.position={x:0,y:0},this.isShowHorizontal=!1,this.isShowVertical=!1},t.prototype.setNodeSnapLine=function(t){var e=this.graphModel.nodes,n=this.getSnapLinePosition(t,e);this.setSnaplineInfo(n)},Kg([up["A"]],t.prototype,"isShowHorizontal",void 0),Kg([up["A"]],t.prototype,"isShowVertical",void 0),Kg([up["A"]],t.prototype,"position",void 0),Kg([up["j"]],t.prototype,"clearSnapline",null),Kg([up["j"]],t.prototype,"setNodeSnapLine",null),t}(),qg=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},$g=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(r=i.next()).done)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(o)throw o.error}}return a},Jg={false:[-1/0,-1/0,1/0,1/0],true:[-1/0,-1/0,1/0,1/0],vertical:[-1/0,0,1/0,0],horizontal:[0,-1/0,0,1/0]},Qg=function(){function t(t,e){this.MINI_SCALE_SIZE=.2,this.MAX_SCALE_SIZE=16,this.SCALE_X=1,this.SKEW_Y=0,this.SKEW_X=0,this.SCALE_Y=1,this.TRANSLATE_X=0,this.TRANSLATE_Y=0,this.ZOOM_SIZE=.04,this.translateLimitMinX=-1/0,this.translateLimitMinY=-1/0,this.translateLimitMaxX=1/0,this.translateLimitMaxY=1/0,this.eventCenter=t;var n=e.stopMoveGraph,r=void 0!==n&&n;this.updateTranslateLimits(r)}return t.prototype.setZoomMiniSize=function(t){this.MINI_SCALE_SIZE=t},t.prototype.setZoomMaxSize=function(t){this.MAX_SCALE_SIZE=t},t.prototype.HtmlPointToCanvasPoint=function(t){var e=$g(t,2),n=e[0],r=e[1];return[(n-this.TRANSLATE_X)/this.SCALE_X,(r-this.TRANSLATE_Y)/this.SCALE_Y]},t.prototype.CanvasPointToHtmlPoint=function(t){var e=$g(t,2),n=e[0],r=e[1];return[n*this.SCALE_X+this.TRANSLATE_X,r*this.SCALE_Y+this.TRANSLATE_Y]},t.prototype.moveCanvasPointByHtml=function(t,e,n){var r=$g(t,2),o=r[0],i=r[1];return[o+e/this.SCALE_X,i+n/this.SCALE_Y]},t.prototype.fixDeltaXY=function(t,e){return[t/this.SCALE_X,e/this.SCALE_Y]},t.prototype.getTransformStyle=function(){var t=[this.SCALE_X,this.SKEW_Y,this.SKEW_X,this.SCALE_Y,this.TRANSLATE_X,this.TRANSLATE_Y].join(",");return{transform:"matrix(".concat(t,")")}},t.prototype.zoom=function(t,e){void 0===t&&(t=!1);var n=this.SCALE_X,r=this.SCALE_Y;return"number"===typeof t?(n=t,r=t):t?(n+=this.ZOOM_SIZE,r+=this.ZOOM_SIZE):(n-=this.ZOOM_SIZE,r-=this.ZOOM_SIZE),n<this.MINI_SCALE_SIZE||n>this.MAX_SCALE_SIZE||(e&&(this.TRANSLATE_X-=(n-this.SCALE_X)*e[0],this.TRANSLATE_Y-=(r-this.SCALE_Y)*e[1]),this.SCALE_X=n,this.SCALE_Y=r,this.emitGraphTransform("zoom")),"".concat(100*this.SCALE_X,"%")},t.prototype.emitGraphTransform=function(t){this.eventCenter.emit(zp.GRAPH_TRANSFORM,{type:t,transform:{SCALE_X:this.SCALE_X,SKEW_Y:this.SKEW_Y,SKEW_X:this.SKEW_X,SCALE_Y:this.SCALE_Y,TRANSLATE_X:this.TRANSLATE_X,TRANSLATE_Y:this.TRANSLATE_Y}})},t.prototype.resetZoom=function(){this.SCALE_X=1,this.SCALE_Y=1,this.emitGraphTransform("resetZoom")},t.prototype.translate=function(t,e){this.TRANSLATE_X+t<=this.translateLimitMaxX&&this.TRANSLATE_X+t>=this.translateLimitMinX&&(this.TRANSLATE_X+=t),this.TRANSLATE_Y+e<=this.translateLimitMaxY&&this.TRANSLATE_Y+e>=this.translateLimitMinY&&(this.TRANSLATE_Y+=e),this.emitGraphTransform("translate")},t.prototype.focusOn=function(t,e,n,r){var o=$g(this.CanvasPointToHtmlPoint([t,e]),2),i=o[0],a=o[1],s=$g([n/2-i,r/2-a],2),u=s[0],l=s[1];this.TRANSLATE_X+=u,this.TRANSLATE_Y+=l,this.emitGraphTransform("focusOn")},t.prototype.updateTranslateLimits=function(t){var e;e=$g(Array.isArray(t)&&4===t.length?t:Jg[t.toString()],4),this.translateLimitMinX=e[0],this.translateLimitMinY=e[1],this.translateLimitMaxX=e[2],this.translateLimitMaxY=e[3]},qg([up["A"]],t.prototype,"SCALE_X",void 0),qg([up["A"]],t.prototype,"SKEW_Y",void 0),qg([up["A"]],t.prototype,"SKEW_X",void 0),qg([up["A"]],t.prototype,"SCALE_Y",void 0),qg([up["A"]],t.prototype,"TRANSLATE_X",void 0),qg([up["A"]],t.prototype,"TRANSLATE_Y",void 0),qg([up["A"]],t.prototype,"ZOOM_SIZE",void 0),qg([up["j"]],t.prototype,"zoom",null),qg([up["j"]],t.prototype,"resetZoom",null),qg([up["j"]],t.prototype,"translate",null),qg([up["j"]],t.prototype,"focusOn",null),t}(),tm="Expected a function";function em(t,e,n){var r=!0,o=!0;if("function"!=typeof t)throw new TypeError(tm);return Tn(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),sg(t,e,{leading:r,maxWait:e,trailing:o})}var nm=em,rm=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),om=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},im=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(r=i.next()).done)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(o)throw o.error}}return a},am=function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))},sm=function(t){function e(){var e=t.apply(this,am([],im(arguments),!1))||this;return e.handleResize=function(){var t=e.props,n=t.graphModel,r=t.options,o=n.width,i=n.height,a=n.isContainerWidth,s=n.isContainerHeight,u=o,l=i,c=!1;a&&(u=void 0,c=!0),s&&(l=void 0,c=!0),c&&n.resize(u,l),r.width=o,r.height=i},e.throttleResize=nm(e.handleResize,200),e}return rm(e,t),e.prototype.componentDidMount=function(){window.addEventListener("resize",this.throttleResize)},e.prototype.componentDidUpdate=function(){var t=this.props.graphModel.modelToGraphData();this.props.graphModel.eventCenter.emit(zp.GRAPH_UPDATED,{data:t})},e.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.throttleResize)},e.prototype.getComponent=function(t,e,n){void 0===n&&(n="canvas-overlay");var r=this.props.getView,o=r(t.type);return o?zt(o,{model:t,graphModel:e,overlay:n},t.id):null},e.prototype.render=function(){var t=this,e=this.props,n=e.graphModel,r=e.tool,o=e.options,i=e.dnd,a=e.snaplineModel,s={};o.width&&(s.width="".concat(n.width,"px")),o.height&&(s.height="".concat(n.height,"px"));var u=n.fakeNode,l=n.editConfigModel,c=n.background,p=l.adjustEdge;return zt("div",{className:"lf-graph","flow-id":n.flowId,style:s,children:[zt(hg,{graphModel:n,dnd:i,children:[zt("g",{className:"lf-base",children:yh(n.sortElements,(function(e){return t.getComponent(e,n)}))}),u?this.getComponent(u,n):""]}),zt(Tg,{graphModel:n,children:[zt(Cg,{graphModel:n}),p?zt(bg,{graphModel:n}):"",!1!==o.snapline?zt(kg,{snaplineModel:a}):""]}),zt(zg,{graphModel:n,tool:r}),c&&zt(Og,{background:c}),zt(Sg,{graphModel:n})]})},e=om([Tb],e),e}(u["a"]),um=sm,lm=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),cm=function(){return cm=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},cm.apply(this,arguments)},pm=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(r=i.next()).done)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(o)throw o.error}}return a},dm=function(t){function e(){var e=t.call(this)||this;return e.onDragStart=function(t){var n=t.event,r=e.props,o=r.anchorData,i=r.nodeModel,a=r.graphModel;a.selectNodeById(i.id),i.autoToFront&&a.toFront(i.id),a.eventCenter.emit(zp.ANCHOR_DRAGSTART,{data:o,e:n,nodeModel:i}),e.setState({startX:o.x,startY:o.y,endX:o.x,endY:o.y})},e.onDragging=function(t){var n=t.event,r=e.props,o=r.graphModel,i=r.nodeModel,a=r.anchorData,s=o.transformModel,u=o.eventCenter,l=o.width,c=o.height,p=o.editConfigModel,d=p.autoExpand,f=p.stopMoveGraph;if(n){var h=n.clientX,y=n.clientY,v=o.getPointByClient({x:h,y:y}),g=v.domOverlayPosition,m=g.x,_=g.y,b=v.canvasOverlayPosition,x=b.x,E=b.y;e.t&&ph(e.t);var O=[],w=10;m<10?O=[w,0]:m+10>l?O=[-w,0]:_<10?O=[0,w]:_+10>c&&(O=[0,-w]),e.setState({endX:x,endY:E,dragging:!0}),e.moveAnchorEnd(x,E),O.length>0&&!f&&d&&(e.t=ch((function(){var t=pm(O,2),n=t[0],r=t[1];s.translate(n,r);var o=e.state,i=o.endX,a=o.endY;e.setState({endX:i-n,endY:a-r}),e.moveAnchorEnd(i-n,a-r)}))),u.emit(zp.ANCHOR_DRAG,{data:a,e:n,nodeModel:i})}},e.onDragEnd=function(t){var n=t.event;e.t&&ph(e.t);var r=e.checkEnd(n);e.setState({startX:0,startY:0,endX:0,endY:0,dragging:!1}),e.sourceRuleResults.clear(),e.targetRuleResults.clear();var o=e.props,i=o.graphModel,a=o.nodeModel,s=o.anchorData;i.eventCenter.emit(zp.ANCHOR_DRAGEND,{data:s,e:n,nodeModel:a,edgeModel:null!==r&&void 0!==r?r:void 0})},e.checkEnd=function(t){var n,r=e.props,o=r.graphModel,i=r.nodeModel,a=r.anchorData,s=a.x,u=a.y,l=a.id,c=e.state,p=c.endX,d=c.endY,f=c.dragging,h=Lf({x:p,y:d},o);if(e.preTargetNode&&e.preTargetNode.state!==kp.DEFAULT&&e.preTargetNode.setElementState(kp.DEFAULT),f&&h&&h.node){var y=h.node,v=h.anchor.id,g="".concat(i.id,"_").concat(y.id,"_").concat(v,"_").concat(l),m=e.sourceRuleResults.get(g)||{},_=m.isAllPass,b=m.msg,x=e.targetRuleResults.get(g)||{},E=x.isAllPass,O=x.msg;if(_&&E){y.setElementState(kp.DEFAULT);var w=o.getNodeModelById(h.node.id),A=null===(n=o.edgeGenerator)||void 0===n?void 0:n.call(o,i.getData(),null===w||void 0===w?void 0:w.getData()),S=o.addEdge(cm(cm({},A),{sourceNodeId:i.id,sourceAnchorId:l,startPoint:{x:s,y:u},targetNodeId:h.node.id,targetAnchorId:h.anchor.id,endPoint:{x:h.anchor.x,y:h.anchor.y}})),M=e.props.anchorData;return o.eventCenter.emit(zp.ANCHOR_DROP,{data:M,e:t,nodeModel:i,edgeModel:S}),S}var j=y.getData();return o.eventCenter.emit(zp.CONNECTION_NOT_ALLOWED,{data:j,msg:O||b||"不允许添加连线"}),null}},e.sourceRuleResults=new Map,e.targetRuleResults=new Map,e.state={startX:0,startY:0,endX:0,endY:0,dragging:!1},e.dragHandler=new Zp({onDragStart:e.onDragStart,onDragging:e.onDragging,onDragEnd:e.onDragEnd}),e}return lm(e,t),e.prototype.getAnchorShape=function(){var t=this.props,e=t.anchorData,n=t.style,r=t.node,o=r.getAnchorShape(e);if(o)return o;var i=e.x,a=e.y,s=cm(cm({},n),null===n||void 0===n?void 0:n.hover);return zt("g",{children:[zt(Gh,cm({className:"lf-node-anchor-hover"},s,{x:i,y:a})),zt(Gh,cm({className:"lf-node-anchor"},n,{x:i,y:a}))]})},Object.defineProperty(e.prototype,"customTrajectory",{get:function(){var t=this.props.graphModel.customTrajectory;return t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"relateEdges",{get:function(){var t=this.props,e=t.graphModel,n=e.getAnchorIncomingEdge,r=e.getAnchorOutgoingEdge,o=t.anchorData.id;return{incomingEdgeList:n(o),outgoingEdgeList:r(o)}},enumerable:!1,configurable:!0}),e.prototype.moveAnchorEnd=function(t,e){var n,r,o=this.props,i=o.graphModel,a=o.nodeModel,s=o.anchorData,u=Lf({x:t,y:e},i);if(u){var l=u.node,c=u.anchor.id;if(this.preTargetNode&&this.preTargetNode!==u.node&&this.preTargetNode.setElementState(kp.DEFAULT),s.id===c)return;this.preTargetNode=l;var p="".concat(a.id,"_").concat(l.id,"_").concat(c,"_").concat(s.id);if(!this.targetRuleResults.has(p)){var d=u.anchor,f=a.isAllowConnectedAsSource(l,s,d),h=l.isAllowConnectedAsTarget(a,s,d);this.sourceRuleResults.set(p,Jf(f)),this.targetRuleResults.set(p,Jf(h))}var y=(null!==(n=this.sourceRuleResults.get(p))&&void 0!==n?n:{}).isAllPass,v=(null!==(r=this.targetRuleResults.get(p))&&void 0!==r?r:{}).isAllPass;y&&v?l.setElementState(kp.ALLOW_CONNECT):l.setElementState(kp.NOT_ALLOW_CONNECT)}else this.preTargetNode&&this.preTargetNode.state!==kp.DEFAULT&&this.preTargetNode.setElementState(kp.DEFAULT)},e.prototype.isShowLine=function(){var t=this.state,e=t.startX,n=t.startY,r=t.endX,o=t.endY,i=Bf(e,n,r,o);return i>10},e.prototype.render=function(){var t=this,e=this.state,n=e.startX,r=e.startY,o=e.endX,i=e.endY,a=this.props,s=a.anchorData.edgeAddable,u=a.edgeStyle;return zt("g",{className:"lf-anchor",children:[zt("g",{onMouseDown:function(e){!1!==s&&t.dragHandler.handleMouseDown(e)},children:this.getAnchorShape()}),this.isShowLine()&&(this.customTrajectory?this.customTrajectory(cm({sourcePoint:{x:n,y:r},targetPoint:{x:o,y:i}},u)):zt(Nh,cm({x1:n,y1:r,x2:o,y2:i},u,{"pointer-events":"none"})))]})},e}(u["a"]),fm=dm;function hm(t,e,n,r){var o=-1,i=null==t?0:t.length;r&&i&&(n=t[++o]);while(++o<i)n=e(n,t[o],o,t);return n}var ym=hm;function vm(t,e,n,r,o){return o(t,(function(t,o,i){n=r?(r=!1,t):e(n,t,o,i)})),n}var gm=vm;function mm(t,e,n){var r=we(t)?ym:gm,o=arguments.length<3;return r(t,Jc(e,4),n,o,Vn)}var _m,bm=mm,xm=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Em=function(){return Em=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Em.apply(this,arguments)},Om=function(t){function e(e){var n=t.call(this,e)||this;return n.style={},n.onDragging=function(t){var e,r=t.event,o=n.props,i=o.graphModel,a=o.nodeModel,s=o.eventCenter,u=i.selectNodes,l=a.x,c=a.y,p=r.clientX,d=r.clientY,f=i.getPointByClient({x:p,y:d}).canvasOverlayPosition,h=f.x,y=f.y,v=new wf(h-l,y-c),g=(null===(e=n.normal)||void 0===e?void 0:e.angle(v))-n.defaultAngle,m=new Nf(-l,-c).rotate(g).translate(l,c).toString();a.transform=m,a.rotate=g;var _=yh(u,(function(t){return t.id}));-1===_.indexOf(a.id)&&(_=[a.id]);var b=bm(_,(function(t,e){var n=i.getNodeModelById(e);return t[e]=null===n||void 0===n?void 0:n.getMoveDistance(0,0,!1),t}),{});_.forEach((function(t){var e=i.getNodeEdges(t);e.forEach((function(t){if(b[t.sourceNodeId]){var e=i.getNodeModelById(t.sourceNodeId),n=e.anchors.find((function(e){return e.id===t.sourceAnchorId}));t.updateStartPoint(n)}if(b[t.targetNodeId]){e=i.getNodeModelById(t.targetNodeId),n=e.anchors.find((function(e){return e.id===t.targetAnchorId}));t.updateEndPoint(n)}}))})),s.emit(zp.NODE_ROTATE,{e:r,model:a,data:a.getData()})},n.style=e.style,n.stepperDrag=new Zp({onDragging:n.onDragging}),n}return xm(e,t),e.prototype.render=function(){var t=this,e=this.props.nodeModel,n=e.x,r=e.y,o=e.width,i=e.height,a=n+o/2+20,s=r-i/2-20;return this.normal=new wf(1,0),this.defaultAngle=this.normal.angle(new wf(a-n,s-r)),e.defaultAngle=this.defaultAngle,zt("g",{className:"lf-rotate-control",children:zt("g",{onMouseDown:function(e){t.stepperDrag.handleMouseDown(e)},children:zt(Yh,Em({},this.style,{cx:a,cy:s}))})})},e}(u["a"]),wm=Om,Am=n("4d26"),Sm=n.n(Am),Mm=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),jm=function(){return jm=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},jm.apply(this,arguments)},Tm=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(r=i.next()).done)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(o)throw o.error}}return a},Pm=function(t){function e(e){var n=t.call(this)||this;n.mouseDownHandler=function(t){var e=n.props,r=e.draggable,o=e.model,i=e.graphModel,a=i.editConfigModel.nodeTextDraggable;(null!==r&&void 0!==r?r:a)&&(t.stopPropagation(),n.stepperDrag.model=o,n.stepperDrag.handleMouseDown(t))},n.onDragging=function(t){var e=t.deltaX,r=t.deltaY,o=n.props,i=o.model,a=o.graphModel.transformModel;if(e||r){var s=Tm(a.fixDeltaXY(e,r),2),u=s[0],l=s[1];i.moveText(u,l)}},n.dbClickHandler=function(){var t=n.props,e=t.editable,r=t.graphModel.eventCenter,o=t.model;e&&o.setElementState(kp.TEXT_EDIT),r.emit(zp.TEXT_DBCLICK,{data:o.text,model:o})};var r=e.draggable;return n.stepperDrag=new Zp({onDragging:n.onDragging,step:1,eventType:"TEXT",isStopPropagation:r}),n}return Mm(e,t),e.prototype.getShape=function(){var t=this.props,e=t.model,n=t.graphModel,r=n.editConfigModel,o=e.text,i=o.value,a=o.x,s=o.y,u=o.editable,l=o.draggable,c={x:a,y:s,className:"",value:i},p=e.getTextStyle(),d=r.nodeTextDraggable||l;return zt(jh,jm({},c,p,{className:Sm()({"lf-element-text":u,"lf-text-draggable":!u&&d,"lf-text-disabled":!u&&!d}),model:e}))},e.prototype.render=function(){var t=this.props.model.text;if(t)return zt("g",{onMouseDown:this.mouseDownHandler,onDblClick:this.dbClickHandler,children:this.getShape()})},e}(u["a"]),Dm=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Nm=function(){return Nm=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Nm.apply(this,arguments)},Cm=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(r=i.next()).done)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(o)throw o.error}}return a},Rm=function(t){function e(e){var n=t.call(this,e)||this;return n.setHoverOn=function(){n.setState({isHovered:!0})},n.setHoverOff=function(){n.setState({isHovered:!1})},n.state={isHovered:!1},n}return Dm(e,t),e.prototype.getBackground=function(){var t=this.state.isHovered,e=this.props.model,n=e.text,r=e.getTextStyle(),o=r.background||{};if(t&&r.hover&&r.hover.background&&(o=Nm(Nm({},o),r.hover.background)),(null===n||void 0===n?void 0:n.value)&&"transparent"!==(null===o||void 0===o?void 0:o.fill)){var i=r.fontSize,a=r.textWidth,s=r.lineHeight,u=r.overflowMode,l=o.wrapPadding,c=null===n||void 0===n?void 0:n.value.split(/[\r\n]/g),p=c.length,d=n.x,f=n.y,h={};if("autoWrap"===u&&a){var y=qf({rows:c,style:{fontSize:"".concat(i,"px"),width:"".concat(a,"px"),lineHeight:s,padding:l},rowsLength:p,className:"lf-get-text-height"});h=Nm(Nm({},o),{x:d,y:f,width:a,height:y})}else{var v=ff({rows:c,rowsLength:p,fontSize:i}),g=v.width,m=v.height;if("ellipsis"===u&&(g=a,m=i+2),"string"===typeof o.wrapPadding){var _=o.wrapPadding.split(",").filter((function(t){return t.trim()})).map((function(t){return parseFloat(t.trim())}));if(_.length>0&&_.length<=4){if(1===_.length){var b=Cm(_,1),x=b[0];_=[x,x,x,x]}else if(2===_.length){var E=Cm(_,2),O=E[0],w=E[1];_=[O,w,O,w]}else if(3===_.length){var A=Cm(_,3),S=A[0],M=(w=A[1],A[2]);_=[S,w,M,w]}var j=Cm(_,4),T=j[0],P=j[1],D=j[2],N=j[3];g+=P+N,m+=T+D,d+=(P-N)/2,f+=(D-T)/2}}h=Nm(Nm({},o),{x:d-1,y:f-1,width:g,height:m})}return zt(Ih,Nm({},h))}return null},e.prototype.getShape=function(){var t=this.props.model,e=t.text,n=e.x,r=e.y,o=e.value;if(!o)return null;var i=t.getTextStyle(),a=Nm({x:n,y:r,value:o,model:t,className:"lf-element-text"},i);return zt("g",{className:"lf-line-text",onMouseEnter:this.setHoverOn,onMouseLeave:this.setHoverOff,children:[this.getBackground(),zt(jh,Nm({},a))]})},e}(Pm),Lm=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Im=function(){return Im=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Im.apply(this,arguments)},km=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n},Bm=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(r=i.next()).done)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(o)throw o.error}}return a},Xm=function(t){function e(e){var n=t.call(this)||this;n.onDragStart=function(t){var e=t.event,r=n.props,o=r.model,i=r.graphModel;if(e){var a=i.getPointByClient({x:e.clientX,y:e.clientY}).canvasOverlayPosition,s=a.x,u=a.y;n.moveOffset={dx:o.x-s,dy:o.y-u}}},n.onDragging=function(t){var e,r,o,i,a=t.event,s=n.props,u=s.model,l=s.graphModel,c=l.editConfigModel,p=c.stopMoveGraph,d=c.autoExpand,f=c.snapGrid,h=l.transformModel,y=l.selectNodes,v=l.width,g=l.height,m=l.gridSize;u.isDragging=!0;var _=a,b=_.clientX,x=_.clientY,E=l.getPointByClient({x:b,y:x}).canvasOverlayPosition,O=E.x,w=E.y,A=Bm(h.CanvasPointToHtmlPoint([O,w]),2),S=A[0],M=A[1];if(O+=null!==(r=null===(e=n.moveOffset)||void 0===e?void 0:e.dx)&&void 0!==r?r:0,w+=null!==(i=null===(o=n.moveOffset)||void 0===o?void 0:o.dy)&&void 0!==i?i:0,O=vf(O,m,f),w=vf(w,m,f),v&&g){var j=S<0||M<0||S>v||M>g;if(!d||p||!j){var T=Bm(h.CanvasPointToHtmlPoint([O-u.width/2,w-u.height/2]),2),P=T[0],D=T[1],N=Bm(h.CanvasPointToHtmlPoint([O+u.width/2,w+u.height/2]),2),C=N[0],R=N[1],L=Math.max(m,20),I=[];P<0?I=[L,0]:C>l.width?I=[-L,0]:D<0?I=[0,L]:R>l.height&&(I=[0,-L]),n.t&&ph(n.t),u.transform=new Nf(-O,-w).rotate(u.rotate).translate(O,w).toString();var k=y.map((function(t){return t.id}));-1===k.indexOf(u.id)&&(k=[u.id]),I.length>0&&!p&&d?n.t=ch((function(){var t=Bm(I,2),e=t[0],n=t[1];h.translate(null!==e&&void 0!==e?e:0,null!==n&&void 0!==n?n:0);var r=-(null!==e&&void 0!==e?e:0)/h.SCALE_X,o=-(null!==n&&void 0!==n?n:0)/h.SCALE_X;l.moveNodes(k,r,o)})):l.moveNodes(k,O-u.x,w-u.y)}}else l.moveNode2Coordinate(u.id,O,w)},n.onDragEnd=function(){n.t&&ph(n.t);var t=n.props.model;t.isDragging=!1},n.onMouseOut=function(t){Rp()&&n.setHoverOff(t)},n.handleMouseUp=function(){var t=n.props.model;n.mouseUpDrag=t.isDragging},n.handleClick=function(t){var e=!1===n.mouseUpDrag;if(n.startTime){var r=n.props,o=r.model,i=r.graphModel;if(e){var a=o.getData(),s=i.getPointByClient({x:t.clientX,y:t.clientY}),u={data:a,e:t,position:s,isSelected:!1,isMultiple:!1},l=2===t.button,c=2===t.detail;if(!l){var p=i.editConfigModel,d=bf(t,p);u.isMultiple=d,o.isSelected&&!c&&d?(u.isSelected=!1,o.setSelected(!1)):(i.selectNodeById(o.id,d),u.isSelected=!0,p.isSilentMode||n.toFront()),c?(p.nodeTextEdit&&o.text.editable&&p.textMode===Gp.TEXT&&(o.setSelected(!1),i.setElementStateById(o.id,kp.TEXT_EDIT)),i.eventCenter.emit(zp.NODE_DBCLICK,u)):(i.eventCenter.emit(zp.ELEMENT_CLICK,u),i.eventCenter.emit(zp.NODE_CLICK,u))}}}},n.handleContextMenu=function(t){t.preventDefault();var e=n.props,r=e.model,o=e.graphModel,i=o.editConfigModel,a=r.getData(),s=o.getPointByClient({x:t.clientX,y:t.clientY});o.setElementStateById(r.id,kp.SHOW_MENU,s.domOverlayPosition),r.isSelected||o.selectNodeById(r.id),o.eventCenter.emit(zp.NODE_CONTEXTMENU,{data:a,e:t,position:s}),i.isSilentMode||n.toFront()},n.handleMouseDown=function(t){var e=n.props,r=e.model,o=e.graphModel;n.startTime=(new Date).getTime();var i=o.editConfigModel;i.adjustNodePosition&&r.draggable&&n.stepDrag&&n.stepDrag.handleMouseDown(t)},n.handleFocus=function(){var t=n.props,e=t.model,r=t.graphModel;r.eventCenter.emit(zp.NODE_FOCUS,{data:e.getData()})},n.handleBlur=function(){var t=n.props,e=t.model,r=t.graphModel;r.eventCenter.emit(zp.NODE_BLUR,{data:e.getData()})},n.setHoverOn=function(t){var e=n.props,r=e.model,o=e.graphModel;if(!r.isHovered){var i=r.getData();r.setHovered(!0),o.eventCenter.emit(zp.NODE_MOUSEENTER,{data:i,e:t})}},n.setHoverOff=function(t){var e=n.props,r=e.model,o=e.graphModel,i=r.getData();r.isHovered&&(r.setHovered(!1),o.eventCenter.emit(zp.NODE_MOUSELEAVE,{data:i,e:t}))};var r=e.graphModel,o=r.gridSize,i=r.eventCenter,a=e.model;return n.stepDrag=new Zp({onDragStart:n.onDragStart,onDragging:n.onDragging,onDragEnd:n.onDragEnd,step:o,eventType:"NODE",isStopPropagation:!1,eventCenter:i,model:a}),n.modelDisposer=Object(up["D"])((function(){return n.props}),(function(t){t&&t.model&&n.stepDrag.setModel(t.model)})),n}return Lm(e,t),e.prototype.componentWillUnmount=function(){this.modelDisposer&&this.modelDisposer(),this.render.$mobx&&this.render.$mobx.dispose()},e.prototype.componentDidMount=function(){},e.prototype.componentDidUpdate=function(){},e.prototype.getAnchorShape=function(t){return null},e.prototype.getAnchors=function(){var t=this,e=this.props,n=e.model,r=e.graphModel,o=n.isSelected,i=n.isHitable,a=n.isDragging,s=n.isShowAnchor;return i&&(o||s)&&!a?yh(n.anchors,(function(e,o){var i=n.getAnchorLineStyle(e),a=n.getAnchorStyle(e);return zt(fm,{anchorData:e,node:t,style:a,edgeStyle:i,anchorIndex:o,nodeModel:n,graphModel:r,setHoverOff:t.setHoverOff})})):[]},e.prototype.getRotateControl=function(){var t=this.props,e=t.model,n=t.graphModel,r=n.editConfigModel,o=r.isSilentMode,i=r.allowRotate,a=e.isSelected,s=e.isHitable,u=e.rotatable,l=e.isHovered,c=i&&u,p=e.getRotateControlStyle();if(!o&&s&&(a||l)&&c)return zt(wm,{graphModel:n,nodeModel:e,eventCenter:n.eventCenter,style:p})},e.prototype.getResizeControl=function(){var t=this.props,e=t.model,n=t.graphModel,r=n.editConfigModel,o=r.isSilentMode,i=r.allowResize,a=e.isSelected,s=e.isHitable,u=e.resizable,l=e.isHovered,c=i&&u,p=e.getResizeControlStyle();return!o&&s&&(a||l)&&c?zt(ly,{style:p,model:e,graphModel:n}):null},e.prototype.getText=function(){var t,e=this.props,n=e.model,r=e.graphModel,o=r.editConfigModel;if(o.nodeTextMode!==Gp.TEXT)return null;if(n.state===kp.TEXT_EDIT)return null;if(n.text){var i=!1;return o.nodeTextDraggable&&n.text.draggable&&(i=!0),zt(Pm,{editable:o.nodeTextEdit&&(null===(t=n.text.editable)||void 0===t||t),model:n,graphModel:r,draggable:i})}return null},e.prototype.getStateClassName=function(){var t=this.props.model,e=t.state,n=t.isDragging,r=t.isSelected,o="lf-node";switch(e){case kp.ALLOW_CONNECT:o+=" lf-node-allow";break;case kp.NOT_ALLOW_CONNECT:o+=" lf-node-not-allow";break;default:o+=" lf-node-default";break}return n&&(o+=" lf-dragging"),r&&(o+=" lf-node-selected"),o},e.prototype.toFront=function(){var t=this.props,e=t.model,n=t.graphModel;e.autoToFront&&n.toFront(e.id)},e.prototype.render=function(){var t,e=this.props,n=e.model,r=e.graphModel,o=r.editConfigModel,i=o.hideAnchors,a=o.adjustNodePosition,s=o.allowRotate,u=o.allowResize,l=r.gridSize,c=r.transformModel.SCALE_X,p=n.isHitable,d=n.draggable,f=n.transform,h=n.getOuterGAttributes(),y=h.className,v=void 0===y?"":y,g=km(h,["className"]),m=zt("g",{className:"lf-node-content",children:[zt("g",{transform:f,children:[this.getShape(),this.getText(),s&&this.getRotateControl(),u&&this.getResizeControl()]}),!i&&this.getAnchors()]});return p?(a&&d&&this.stepDrag.setStep(l*c),t=zt("g",Im({className:"".concat(this.getStateClassName()," ").concat(v),onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onClick:this.handleClick,onMouseEnter:this.setHoverOn,onMouseOver:this.setHoverOn,onMouseLeave:this.setHoverOff,onMouseOut:this.onMouseOut,onContextMenu:this.handleContextMenu,onFocus:this.handleFocus,onBlur:this.handleBlur},g,{children:m}))):t=zt("g",Im({className:"".concat(this.getStateClassName()," ").concat(v)},g,{children:m})),t},e.isObserved=!1,e}(u["a"]),zm=Xm,Hm=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Um=function(){return Um=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Um.apply(this,arguments)},Gm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Hm(e,t),e.prototype.getShape=function(){var t=this.props.model,e=t.getNodeStyle();return zt(Ih,Um({},e,{x:t.x,y:t.y,width:t.width,height:t.height,radius:t.radius}))},e}(zm),Ym=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Vm=function(){return Vm=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Vm.apply(this,arguments)},Fm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ym(e,t),e.prototype.getShape=function(){var t=this.props.model,e=t.x,n=t.y,r=t.r,o=t.getNodeStyle();return zt(Yh,Vm({},o,{x:e,y:n,r:r}))},e}(zm),Wm=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Km=function(){return Km=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Km.apply(this,arguments)},Zm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Wm(e,t),e.prototype.getShape=function(){var t=this.props.model,e=t,n=e.x,r=e.y,o=e.width,i=e.height,a=e.points,s=t.getNodeStyle(),u={transform:"matrix(1 0 0 1 ".concat(n-o/2," ").concat(r-i/2,")")};return zt("g",Km({},u,{children:zt($h,Km({},s,{points:a,x:n,y:r}))}))},e}(zm),qm=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),$m=function(){return $m=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},$m.apply(this,arguments)},Jm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return qm(e,t),e.prototype.getShape=function(){var t=this.props.model,e=t.getNodeStyle();return zt("g",{children:zt(Jh,$m({},e,{points:t.points,x:t.x,y:t.y}))})},e}(zm),Qm=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),t_=function(){return t_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},t_.apply(this,arguments)},e_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Qm(e,t),e.prototype.getShape=function(){var t=this.props.model,e=t.getNodeStyle();return zt(Kh,t_({},e,{x:t.x,y:t.y,rx:t.rx,ry:t.ry}))},e}(zm),n_=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),r_=function(){return r_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r_.apply(this,arguments)},o_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n_(e,t),e.prototype.getBackground=function(){var t=this.props.model,e=t.getTextStyle(),n=t.width,r=t.height,o=t.x,i=t.y,a=r_(r_({},e.background),{x:o,y:i,width:n,height:r});return zt(kh,r_({},a))},e.prototype.getResizeControl=function(){return null},e.prototype.getShape=function(){return zt("g",{children:this.getBackground()})},e}(zm),i_=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a_=function(){return a_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},a_.apply(this,arguments)},s_=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(r=i.next()).done)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(o)throw o.error}}return a},u_=function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))},l_=function(t){function e(){var e=t.apply(this,u_([],s_(arguments),!1))||this;return e.ref=Object(u["f"])(),e}return i_(e,t),Object.defineProperty(e.prototype,"rootEl",{get:function(){return this.ref.current},enumerable:!1,configurable:!0}),e.prototype.setHtml=function(t){t.appendChild(document.createElement("div"))},e.prototype.confirmUpdate=function(t){this.setHtml(t)},e.prototype.shouldUpdate=function(){return(!this.preProperties||this.preProperties!==this.currentProperties)&&(this.preProperties=this.currentProperties,!0)},e.prototype.componentDidMount=function(){this.shouldUpdate()&&this.rootEl&&this.setHtml(this.rootEl)},e.prototype.componentDidUpdate=function(){this.shouldUpdate()&&this.rootEl&&this.confirmUpdate(this.rootEl)},e.prototype.componentWillUnmount=function(){t.prototype.componentWillUnmount.call(this),this.rootEl.innerHTML=""},e.prototype.getShape=function(){var t=this.props.model,e=t.x,n=t.y,r=t.height,o=t.width,i=t.getNodeStyle();return this.currentProperties=JSON.stringify(t.properties),zt("foreignObject",a_({},i,{x:e-o/2,y:n-r/2,width:o,height:r,ref:this.ref}))},e}(zm),c_=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),p_=function(){return p_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},p_.apply(this,arguments)},d_=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n},f_=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(r=i.next()).done)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(o)throw o.error}}return a};(function(t){t["SOURCE"]="SOURCE",t["TARGET"]="TARGET"})(_m||(_m={}));var h_=function(t){function e(e){var n=t.call(this)||this;n.handleMouseDown=function(t){n.stepDrag&&n.stepDrag.handleMouseDown(t)},n.onDragStart=function(){var t=n.props,e=t.x,r=t.y,o=t.edgeModel,i=o.startPoint,a=o.endPoint,s=o.pointsList;n.oldEdge={startPoint:i,endPoint:a,pointsList:s},n.setState({endX:e,endY:r,dragging:!0})},n.onDragging=function(t){var e=t.deltaX,r=t.deltaY,o=n.state,i=o.endX,a=o.endY,s=n.props,u=s.graphModel,l=s.type,c=u.transformModel,p=u.editConfigModel,d=f_(c.moveCanvasPointByHtml([i,a],e,r),2),f=d[0],h=d[1];n.setState({endX:f,endY:h,dragging:!0});var y=n.props.edgeModel,v=Lf({x:i,y:a},u);if(v&&v.node&&n.isAllowAdjust(v).pass){var g=y.startPoint,m=y.endPoint,_=y.sourceNode,b=y.targetNode,x=l===_m.SOURCE?{startPoint:{x:v.anchor.x,y:v.anchor.y},endPoint:{x:m.x,y:m.y},sourceNode:v.node,targetNode:b}:{startPoint:{x:g.x,y:g.y},endPoint:{x:v.anchor.x,y:v.anchor.y},sourceNode:_,targetNode:v.node};y.updateAfterAdjustStartAndEnd(x)}else l===_m.SOURCE?y.updateStartPoint({x:f,y:h}):y.updateEndPoint({x:f,y:h});y.text.value&&p.adjustEdge&&y.setText(Object.assign({},y.text,y.textPosition))},n.onDragEnd=function(t){var e,r,o,i=t.event;try{n.setState({dragging:!1});var a=n.props,s=a.graphModel,u=a.edgeModel,l=a.type,c=n.state,p=c.endX,d=c.endY,f=c.dragging,h=Lf({x:p,y:d},s);if(!f)return;var y=!1,v=void 0;if(h&&h.node){var g=n.isAllowAdjust(h),m=g.pass,_=g.msg,b=g.newTargetNode;if(m){var x=u.getData(),E=x.text,O=x.sourceAnchorId,w=void 0===O?"":O,A=x.targetAnchorId,S=void 0===A?"":A,M=d_(x,["text","sourceAnchorId","targetAnchorId"]);if(v=p_(p_({sourceAnchorId:w,targetAnchorId:S},M),{text:(null===E||void 0===E?void 0:E.value)||""}),l===_m.SOURCE){var j=s.getNodeModelById(h.node.id),T=s.getNodeModelById(u.targetNodeId),P=null===(e=s.edgeGenerator)||void 0===e?void 0:e.call(s,null===j||void 0===j?void 0:j.getData(),null===T||void 0===T?void 0:T.getData(),v);v=p_(p_({},P),{sourceNodeId:h.node.id,sourceAnchorId:h.anchor.id,startPoint:{x:h.anchor.x,y:h.anchor.y},targetNodeId:u.targetNodeId,endPoint:p_({},u.endPoint)}),u.sourceNodeId===h.node.id&&u.sourceAnchorId===h.anchor.id&&(y=!0)}else if(l===_m.TARGET){j=s.getNodeModelById(u.sourceNodeId),T=s.getNodeModelById(h.node.id),P=null===(r=s.edgeGenerator)||void 0===r?void 0:r.call(s,null===j||void 0===j?void 0:j.getData(),null===T||void 0===T?void 0:T.getData(),v);v=p_(p_({},P),{sourceNodeId:u.sourceNodeId,startPoint:p_({},u.startPoint),targetNodeId:h.node.id,targetAnchorId:h.anchor.id,endPoint:{x:h.anchor.x,y:h.anchor.y}}),u.targetNodeId===h.node.id&&u.targetAnchorId===h.anchor.id&&(y=!0)}}else{y=!0;var D=b.getData();s.eventCenter.emit(zp.CONNECTION_NOT_ALLOWED,{data:D,msg:_})}}else y=!0;if(y)n.recoveryEdge();else{var N=u.getData();s.deleteEdgeById(u.id);var C=s.addEdge(p_({},v));s.eventCenter.emit(zp.EDGE_EXCHANGE_NODE,{data:{newEdge:C.getData(),oldEdge:N}})}null===(o=n.preTargetNode)||void 0===o||o.setElementState(kp.DEFAULT)}finally{s=n.props.graphModel;s.eventCenter.emit(zp.ADJUST_POINT_DRAGEND,{e:i,data:n.stepDragData})}},n.recoveryEdge=function(){var t=n.props.edgeModel,e=n.oldEdge,r=e.startPoint,o=e.endPoint,i=e.pointsList;t.updateStartPoint(r),t.updateEndPoint(o),t.modelType!==Xp.LINE_EDGE&&(t.pointsList=null!==i&&void 0!==i?i:[],t.initPoints())},n.getAdjustPointStyle=function(){var t=n.props.graphModel.theme,e=t.edgeAdjust;return e},n.state={dragging:!1,endX:0,endY:0},n.targetRuleResults=new Map,n.sourceRuleResults=new Map;var r=e.type,o=e.edgeModel,i=e.graphModel,a=i.eventCenter;return n.stepDragData={type:r,edgeData:o.getData()},n.stepDrag=new Zp({onDragStart:n.onDragStart,onDragging:n.onDragging,onDragEnd:n.onDragEnd,eventType:"ADJUST_POINT",isStopPropagation:!1,eventCenter:a,data:n.stepDragData}),n}return c_(e,t),e.prototype.isAllowAdjust=function(t){var e,n,r,o,i=this.props,a=i.edgeModel,s=a.id,u=a.sourceNode,l=a.targetNode,c=a.sourceAnchorId,p=a.targetAnchorId,d=i.type;if(d===_m.SOURCE?(e=t.node,n=l,r=t.anchor,o=l.getAnchorInfo(p)):(e=u,n=t.node,o=t.anchor,r=u.getAnchorInfo(c)),this.preTargetNode&&this.preTargetNode!==t.node&&this.preTargetNode.setElementState(kp.DEFAULT),this.preTargetNode=t.node,o.id===r.id)return{pass:!1,msg:"",newTargetNode:n};var f="".concat(e.id,"_").concat(n.id,"_").concat(r.id,"_").concat(o.id);if(!this.targetRuleResults.has(f)){var h=e.isAllowConnectedAsSource(n,r,o,s),y=n.isAllowConnectedAsTarget(e,r,o,s);this.sourceRuleResults.set(f,Jf(h)),this.targetRuleResults.set(f,Jf(y))}var v=this.sourceRuleResults.get(f),g=v.isAllPass,m=v.msg,_=this.targetRuleResults.get(f),b=_.isAllPass,x=_.msg,E=g&&b?kp.ALLOW_CONNECT:kp.NOT_ALLOW_CONNECT;return d===_m.SOURCE?e.setElementState(E):n.setElementState(E),{pass:g&&b,msg:x||m,newTargetNode:n}},e.prototype.render=function(){var t=this.props,e=t.x,n=t.y,r=t.getAdjustPointShape,o=t.edgeModel,i=this.state.dragging;return zt("g",{pointerEvents:i?"none":"",onMouseDown:this.handleMouseDown,children:i?"":r(e,n,o)})},e}(u["a"]),y_=h_,v_=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),g_=function(){return g_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},g_.apply(this,arguments)},m_=(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}v_(e,t),e.prototype.getArrowAttributes=function(){var t=this.props,e=t.arrowInfo,n=t.style,r=e.start,o=e.end,i={start:r,end:o,offset:n.offset,verticalLength:n.verticalLength,type:"end"},a=bd(i),s=a.leftX,u=a.leftY,l=a.rightX,c=a.rightY;return g_({d:"M".concat(s," ").concat(u," L").concat(o.x," ").concat(o.y," L").concat(l," ").concat(c," z")},n)},e.prototype.getShape=function(){var t=this.getArrowAttributes(),e=t.d,n=t.strokeWidth,r=t.stroke,o=t.fill;return zt(zh,{d:e,fill:o,strokeWidth:n,stroke:r})},e.prototype.render=function(){return zt("g",{className:"lf-arrow",children:this.getShape()})}}(u["a"]),function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),__=function(){return __=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},__.apply(this,arguments)},b_=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(r=i.next()).done)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(o)throw o.error}}return a},x_=function(t){function e(){var e=t.call(this)||this;return e.textRef=Object(u["f"])(),e.handleHover=function(t,n){var r=e.props,o=r.model,i=r.graphModel.eventCenter;o.setHovered(t);var a=t?zp.EDGE_MOUSEENTER:zp.EDGE_MOUSELEAVE,s=o.getData();i.emit(a,{data:s,e:n})},e.setHoverOn=function(t){var n=e.props.model.isHovered;n||(e.textRef&&e.textRef.current&&e.textRef.current.setHoverOn(),e.handleHover(!0,t))},e.setHoverOff=function(t){var n=e.props.model.isHovered;n&&(e.textRef&&e.textRef.current&&e.textRef.current.setHoverOff(),e.handleHover(!1,t))},e.handleContextMenu=function(t){t.preventDefault(),e.contextMenuTime=(new Date).getTime(),e.clickTimer&&clearTimeout(e.clickTimer);var n=e.props,r=n.model,o=n.graphModel,i=o.editConfigModel,a=o.getPointByClient({x:t.clientX,y:t.clientY});o.setElementStateById(r.id,kp.SHOW_MENU,a.domOverlayPosition),i.isSilentMode||e.toFront(),r.isSelected||o.selectEdgeById(r.id);var s=null===r||void 0===r?void 0:r.getData();o.eventCenter.emit(zp.EDGE_CONTEXTMENU,{data:s,e:t,position:a})},e.handleMouseDown=function(t){t.stopPropagation(),e.startTime=(new Date).getTime()},e.handleMouseUp=function(){var t=e.props.model;e.mouseUpDrag=t.isDragging},e.handleClick=function(t){if(e.startTime&&!e.mouseUpDrag){var n=2===t.button;if(!n){var r=2===t.detail,o=e.props,i=o.model,a=o.graphModel,s=null===i||void 0===i?void 0:i.getData(),u=a.getPointByClient({x:t.clientX,y:t.clientY});if(r){var l=a.editConfigModel,c=a.textEditElement,p=i.id,d=i.text,f=i.modelType;if(c&&c.id===p&&a.setElementStateById(p,kp.DEFAULT),l.edgeTextEdit&&d.editable&&(i.setSelected(!1),a.setElementStateById(p,kp.TEXT_EDIT)),f===Xp.POLYLINE_EDGE){var h=i,y=a.getPointByClient({x:t.x,y:t.y}).canvasOverlayPosition,v=y.x,g=y.y;h.dbClickPosition=lf({x:v,y:g},h.points)}a.eventCenter.emit(zp.EDGE_DBCLICK,{data:s,e:t,position:u})}else a.eventCenter.emit(zp.ELEMENT_CLICK,{data:s,e:t,position:u}),a.eventCenter.emit(zp.EDGE_CLICK,{data:s,e:t,position:u});var m=a.editConfigModel;a.selectEdgeById(i.id,bf(t,m)),m.isSilentMode||e.toFront()}}},e.handleFocus=function(){var t=e.props,n=t.model,r=t.graphModel;r.eventCenter.emit(zp.EDGE_FOCUS,{data:n.getData()})},e.handleBlur=function(){var t=e.props,n=t.model,r=t.graphModel;r.eventCenter.emit(zp.EDGE_BLUR,{data:n.getData()})},e}return m_(e,t),e.prototype.getShape=function(){return zt("g",{children:this.getEdge()})},e.prototype.getTextStyle=function(){},e.prototype.getText=function(){var t,e=this.props,n=e.model,r=e.graphModel,o=r.editConfigModel;if(o.edgeTextMode!==Gp.TEXT)return null;if(n.state===kp.TEXT_EDIT)return null;if(n.text){var i=!1;return o.edgeTextDraggable&&n.text.draggable&&(i=!0),zt(Rm,{ref:this.textRef,editable:o.edgeTextEdit&&(null===(t=n.text.editable)||void 0===t||t),model:n,graphModel:r,draggable:i})}return null},e.prototype.getArrowInfo=function(){var t=this.props.model,e=t.startPoint,n=t.endPoint,r=t.isSelected,o=this.state.hover;return{start:e,end:n,hover:o,isSelected:r}},e.prototype.getLastTwoPoints=function(){var t=this.props.model,e=t.startPoint,n=t.endPoint;return[e,n]},e.prototype.getArrowStyle=function(){return console.error("getArrowStyle is deprecated in 1.2.0, please use model.getArrowStyle"),null},e.prototype.getArrow=function(){var t=this.props.model,e=t.id,n=t.getArrowStyle(),r=n.refY,o=void 0===r?0:r,i=n.refX,a=void 0===i?2:i,s=b_(this.getLastTwoPoints(),2),u=s[0],l=s[1],c="auto";return null!==u&&null!==l&&(c=jy(My({x:l.x-u.x,y:l.y-u.y,z:0}))),zt("g",{children:zt("defs",{children:[zt("marker",{id:"marker-start-".concat(e),refX:-a,refY:o,overflow:"visible",orient:"auto",markerUnits:"userSpaceOnUse",children:this.getStartArrow()}),zt("marker",{id:"marker-end-".concat(e),refX:a,refY:o,overflow:"visible",orient:c,markerUnits:"userSpaceOnUse",children:this.getEndArrow()})]})})},e.prototype.getStartArrow=function(){return zt("path",{})},e.prototype.getEndArrow=function(){var t=this.props.model,e=t.getArrowStyle(),n=e.stroke,r=e.strokeWidth,o=e.offset,i=e.verticalLength;return zt("path",{stroke:n,fill:n,strokeWidth:r,transform:"rotate(180)",d:"M 0 0 L ".concat(o," -").concat(i," L ").concat(o," ").concat(i," Z")})},e.prototype.getAdjustPointShape=function(t,e,n){var r=n.getAdjustPointStyle();return zt(Gh,__({className:"lf-edge-adjust-point"},r,{x:t,y:e}))},e.prototype.getAdjustPoints=function(){var t=this.props,e=t.model,n=t.graphModel,r=n.editConfigModel,o=r.adjustEdgeStartAndEnd,i=r.adjustEdgeStart,a=r.adjustEdgeEnd,s=e.getAdjustStart(),u=e.getAdjustEnd();return zt("g",{children:[o&&i&&zt(y_,__({type:_m.SOURCE},s,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:e,graphModel:n})),o&&a&&zt(y_,__({type:_m.TARGET},u,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:e,graphModel:n}))]})},e.prototype.getAnimation=function(){console.error("getAnimation is deprecated in 1.2.0, please use model.getEdgeAnimationStyle")},e.prototype.getAppendWidth=function(){return zt("g",{})},e.prototype.getAppend=function(){return zt("g",{className:"lf-edge-append",children:this.getAppendWidth()})},e.prototype.getEdge=function(){return null},e.prototype.toFront=function(){var t=this.props,e=t.graphModel,n=t.model;e.toFront(n.id)},e.prototype.render=function(){var t=this.props.model,e=t.isSelected,n=t.isHitable,r=t.isShowAdjustPoint;return zt("g",{children:[zt("g",{className:["lf-edge",!n&&"pointer-none",e&&"lf-edge-selected"].filter(Boolean).join(" "),onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onClick:this.handleClick,onContextMenu:this.handleContextMenu,onMouseOver:this.setHoverOn,onMouseEnter:this.setHoverOn,onMouseLeave:this.setHoverOff,onFocus:this.handleFocus,onBlur:this.handleBlur,children:[this.getShape(),this.getAppend(),this.getText(),this.getArrow()]}),r&&e?this.getAdjustPoints():""]})},e.isObserved=!1,e}(u["a"]),E_=x_,O_=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),w_=function(){return w_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},w_.apply(this,arguments)},A_=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(r=i.next()).done)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(o)throw o.error}}return a},S_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return O_(e,t),e.prototype.getEdge=function(){var t=this.props.model,e=t.getEdgeStyle(),n=t,r=n.path,o=n.isAnimation,i=n.arrowConfig,a=t.getEdgeAnimationStyle(),s=a.strokeDasharray,u=a.stroke,l=a.strokeDashoffset,c=a.animationName,p=a.animationDuration,d=a.animationIterationCount,f=a.animationTimingFunction,h=a.animationDirection;return zt(zh,w_({d:r},e,i,o?{strokeDasharray:s,stroke:u,style:{strokeDashoffset:l,animationName:c,animationDuration:p,animationIterationCount:d,animationTimingFunction:f,animationDirection:h}}:{}))},e.prototype.getAppendWidth=function(){var t=this.props.model.path;return zt(zh,{d:t,strokeWidth:10,stroke:"transparent",fill:"none"})},e.prototype.getArrowInfo=function(){var t=this.props.model,e=this.state.hover,n=t.isSelected,r=t.getArrowStyle().offset,o=t.pointsList.map((function(t){return{x:t.x,y:t.y}})),i=A_(uf(o,r),2),a=i[0],s=i[1],u={start:a,end:s,hover:e,isSelected:n};return u},e.prototype.getLastTwoPoints=function(){var t=this.props.model,e=t.getArrowStyle().offset,n=t.pointsList.map((function(t){return{x:t.x,y:t.y}}));return uf(n,e)},e}(E_),M_=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),j_=function(){return j_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},j_.apply(this,arguments)},T_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return M_(e,t),e.prototype.getEdge=function(){var t=this.props.model,e=t.startPoint,n=t.endPoint,r=t.isAnimation,o=t.arrowConfig,i=t.getEdgeStyle(),a=t.getEdgeAnimationStyle(),s=a.strokeDasharray,u=a.stroke,l=a.strokeDashoffset,c=a.animationName,p=a.animationDuration,d=a.animationIterationCount,f=a.animationTimingFunction,h=a.animationDirection;return zt(Nh,j_({},i,{x1:e.x,y1:e.y,x2:n.x,y2:n.y},o,r?{strokeDasharray:s,stroke:u,style:{strokeDashoffset:l,animationName:c,animationDuration:p,animationIterationCount:d,animationTimingFunction:f,animationDirection:h}}:{}))},e.prototype.getAppendWidth=function(){var t=this.props.model,e=t.startPoint,n=t.endPoint,r={start:e,end:n},o=rf(r),i=o.d,a=o.strokeWidth,s=o.fill,u=o.strokeDasharray,l=o.stroke;return zt(zh,{d:i,fill:s,strokeWidth:a,stroke:l,strokeDasharray:u})},e}(E_),P_=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),D_=function(){return D_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},D_.apply(this,arguments)},N_=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(r=i.next()).done)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(o)throw o.error}}return a},C_=function(t){function e(){var e=t.call(this)||this;return e.onDragStart=function(){var t=e.props.model;t.dragAppendStart(),e.isShowAdjustPointTemp=t.isShowAdjustPoint,t.isShowAdjustPoint=!1},e.onDragging=function(t){var n=t.deltaX,r=t.deltaY,o=e.props,i=o.model,a=o.graphModel;e.isDragging=!0;var s=a.transformModel,u=a.editConfigModel,l=N_(s.fixDeltaXY(n,r),2),c=l[0],p=l[1],d=i,f=u.adjustEdgeMiddle;e.appendInfo=f?d.dragAppendSimple(e.appendInfo,{x:c,y:p}):d.dragAppend(e.appendInfo,{x:c,y:p})},e.onDragEnd=function(){var t,n=e.props,r=n.model,o=n.graphModel.eventCenter,i=r;i.dragAppendEnd(),e.isDragging=!1,i.isShowAdjustPoint=null!==(t=e.isShowAdjustPointTemp)&&void 0!==t&&t,e.appendInfo=void 0,o.emit(zp.EDGE_ADJUST,{data:i.getData()})},e.beforeDragStart=function(t,n){n.draggable&&e.drag.handleMouseDown(t),e.appendInfo=n},e.drag=new Zp({onDragStart:e.onDragStart,onDragging:e.onDragging,onDragEnd:e.onDragEnd,isStopPropagation:!1}),e}return P_(e,t),e.prototype.getEdge=function(){var t=this.props.model,e=t.points,n=t.isAnimation,r=t.arrowConfig,o=t.getEdgeStyle(),i=t.getEdgeAnimationStyle(),a=i.strokeDasharray,s=i.stroke,u=i.strokeDashoffset,l=i.animationName,c=i.animationDuration,p=i.animationIterationCount,d=i.animationTimingFunction,f=i.animationDirection;return zt(ey,D_({points:e},o,r,n?{strokeDasharray:a,stroke:s,style:{strokeDashoffset:u,animationName:l,animationDuration:c,animationIterationCount:p,animationTimingFunction:d,animationDirection:f}}:{}))},e.prototype.getArrowInfo=function(){var t=this.props.model,e=t.points,n=t.isSelected,r=this.state.hover,o=Qd(e),i=o[0],a=o[0];return o.length>=2&&(i=o[o.length-2],a=o[o.length-1]),{start:i,end:a,hover:r,isSelected:n}},e.prototype.getLastTwoPoints=function(){var t=this.props.model,e=t.points,n=Qd(e),r=n[0],o=n[0];return n.length>=2&&(r=n[n.length-2],o=n[n.length-1]),[r,o]},e.prototype.getAppendAttributes=function(t){var e,n=t.start,r=t.end;if(n.x===r.x&&n.y===r.y)e="";else{var o={start:n,end:r,offset:10,verticalLength:5},i=bd(D_(D_({},o),{type:"start"})),a=bd(D_(D_({},o),{type:"end"}));e="M".concat(i.leftX," ").concat(i.leftY,"\n      L").concat(i.rightX," ").concat(i.rightY,"\n      L").concat(a.rightX," ").concat(a.rightY,"\n      L").concat(a.leftX," ").concat(a.leftY," z")}return{d:e,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}},e.prototype.getAppendShape=function(t){var e=this.getAppendAttributes(t),n=e.d,r=e.strokeWidth,o=e.fill,i=e.strokeDasharray,a=e.stroke;return zt(zh,{d:n,fill:o,strokeWidth:r,stroke:a,strokeDasharray:i})},e.prototype.getAppendWidth=function(){for(var t=this,e=this.props,n=e.model,r=e.graphModel,o=n.pointsList,i=n.draggable,a=[],s=o.length,u=function(e){var n="lf-polyline-append",u={start:{x:o[e].x,y:o[e].y},end:{x:o[e+1].x,y:o[e+1].y},startIndex:e,endIndex:e+1,direction:Up.HORIZONTAL,draggable:!0},c=zt("g",{className:n,children:l.getAppendShape(u)}),p=r.editConfigModel,d=p.adjustEdge,f=p.adjustEdgeMiddle;if(d&&i){var h=u.startIndex,y=u.endIndex,v=f&&(0===h||y===s-1);u.draggable=!v,u.start.x===u.end.x?(u.draggable&&(n+="-ew-resize"),u.direction=Up.VERTICAL):u.start.y===u.end.y&&(u.draggable&&(n+="-ns-resize"),u.direction=Up.HORIZONTAL),c=zt("g",{className:l.isDragging?"lf-dragging":"lf-drag-able",onMouseDown:function(e){return t.beforeDragStart(e,u)},children:zt("g",{className:n,children:l.getAppendShape(u)})})}a.push(c)},l=this,c=0;c<s-1;c++)u(c);return zt("g",{children:a})},e}(E_),R_=function(){return R_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},R_.apply(this,arguments)},L_=function(){function t(t){var e=this;this.nodeConfig=null,this.fakeNode=null,this.stopDrag=function(){e.nodeConfig=null,window.document.removeEventListener("mouseup",e.stopDrag)},this.dragEnter=function(t){e.nodeConfig&&!e.fakeNode&&(e.fakeNode=e.lf.createFakeNode(R_(R_({},e.nodeConfig),e.clientToLocalPoint({x:t.clientX,y:t.clientY}))))},this.onDragOver=function(t){if(t.preventDefault(),e.fakeNode){var n=e.clientToLocalPoint({x:t.clientX,y:t.clientY}),r=n.x,o=n.y;e.fakeNode.moveTo(r,o);var i=e.fakeNode.getData();e.lf.setNodeSnapLine(i),e.lf.graphModel.eventCenter.emit(zp.NODE_DND_DRAG,{data:i,e:t})}return!1},this.onDragLeave=function(){e.fakeNode&&(e.lf.removeNodeSnapLine(),e.lf.graphModel.removeFakeNode(),e.fakeNode=null)},this.onDrop=function(t){e.lf.graphModel&&t&&e.nodeConfig&&(e.lf.addNode(R_(R_({},e.nodeConfig),e.clientToLocalPoint({x:t.clientX,y:t.clientY})),zp.NODE_DND_ADD,t),t.preventDefault(),t.stopPropagation(),e.nodeConfig=null,e.lf.removeNodeSnapLine(),e.lf.graphModel.removeFakeNode(),e.fakeNode=null)};var n=t.lf;this.lf=n}return t.prototype.clientToLocalPoint=function(t){var e=t.x,n=t.y,r=Rc(this.lf.options,["grid","size"]),o=this.lf.graphModel.getPointByClient({x:e,y:n}),i=o.canvasOverlayPosition,a=i.x,s=i.y,u=this.lf.graphModel.editConfigModel.snapGrid;return{x:vf(a,r,u),y:vf(s,r,u)}},t.prototype.startDrag=function(t){var e=this.lf.graphModel.editConfigModel;(null===e||void 0===e?void 0:e.isSilentMode)||(this.nodeConfig=t,window.document.addEventListener("mouseup",this.stopDrag))},t.prototype.eventMap=function(){return{onMouseEnter:this.dragEnter,onMouseOver:this.dragEnter,onMouseMove:this.onDragOver,onMouseLeave:this.onDragLeave,onMouseUp:this.onDrop}},t}();function I_(t,e){t.on("node:mousemove",(function(t){var n=t.data;e.setNodeSnapLine(n)})),t.on("node:mouseup",(function(){e.clearSnapline()}))}var k_=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),B_=function(){return B_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},B_.apply(this,arguments)},X_=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},z_=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(r=i.next()).done)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(o)throw o.error}}return a},H_=function(t){function e(e){var n=t.call(this,e)||this;return n.ref=Object(u["f"])(),n.__prevText={type:"",text:"",id:""},n.keyupHandler=function(t){var e=n.props.graphModel.textEditElement;"Enter"===t.key&&t.altKey&&(null===e||void 0===e||e.setElementState(kp.DEFAULT))},n.inputHandler=function(t){var e=t.target.innerText,r=n.props.graphModel.textEditElement;r&&(n.__prevText={type:r.type,text:e.replace(/(\r\n)+$|(\n)+$/,""),id:r.id})},n.keydownHandler=function(t){t.stopPropagation()},n.state={style:{left:0,top:0}},n}return k_(e,t),e.getDerivedStateFromProps=function(t){var e,n,r=t.textEditElement,o=t.graphModel,i=o.transformModel,a=o.theme,s=a.inputText;if(r){if(!(null===(e=r.text)||void 0===e?void 0:e.value)&&r.BaseType===Bp.EDGE){var u=r.text,l=r.textPosition,c=l.x,p=l.y;u.x=c,u.y=p,r.setText(u)}var d={resize:"auto",whiteSpace:"normal",wordBreak:"break-all"};if(r.BaseType===Bp.EDGE){var f=a.edgeText,h=f.overflowMode,y=f.lineHeight,v=f.wrapPadding,g=f.textWidth;g&&"autoWrap"===h&&(n=B_(B_({},d),{width:g,minWidth:g,lineHeight:y,padding:v}))}else if(r.BaseType===Bp.NODE){var m=a.nodeText,_=(h=m.overflowMode,y=m.lineHeight,v=m.wrapPadding,g=m.textWidth,r.width),b=r.modelType,x=r.textWidth,E=x||g||_;(b!==Xp.TEXT_NODE&&"autoWrap"===h||b===Xp.TEXT_NODE&&g)&&(n=B_(B_({},d),{width:E,minWidth:E,lineHeight:y,padding:v}))}var O=r.text,w=O.x,A=O.y,S=z_(i.CanvasPointToHtmlPoint([w,A]),2),M=S[0],j=S[1];return{style:B_(B_({left:M,top:j},n),s)}}return null},e.prototype.componentDidUpdate=function(){var t=this.props.graphModel;if(this.ref.current&&(this.ref.current.focus(),this.placeCaretAtEnd(this.ref.current)),""!==this.__prevText.id){var e=this.__prevText,n=e.text,r=e.id;t.updateText(r,n),t.eventCenter.emit(zp.TEXT_UPDATE,{data:B_({},this.__prevText)}),this.__prevText.id="",this.__prevText.text="",this.__prevText.type=""}},e.prototype.placeCaretAtEnd=function(t){if(void 0!==window.getSelection&&void 0!==document.createRange){var e=document.createRange();e.selectNodeContents(t),e.collapse(!1);var n=window.getSelection();null===n||void 0===n||n.removeAllRanges(),null===n||void 0===n||n.addRange(e)}},e.prototype.render=function(){var t,e=this.props.graphModel.textEditElement,n=this.state.style;return e?zt("div",{contentEditable:!0,className:"lf-text-input",style:n,ref:this.ref,onKeyUp:this.keyupHandler,onKeyDown:this.keydownHandler,onKeyPress:this.keydownHandler,onInput:this.inputHandler,children:null===(t=e.text)||void 0===t?void 0:t.value},e.id):null},e.toolName="text-edit-tool",e=X_([Tb],e),e}(u["a"]),U_=H_,G_=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Y_=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},V_=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(r=i.next()).done)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(o)throw o.error}}return a},F_=function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))},W_=function(t){function e(e){var n=t.call(this,e)||this;n.handleMouseDown=function(t){n.stepDrag.handleMouseDown(t)},n.handleWheelEvent=function(t){var e,r;t.preventDefault();var o=t.deltaX,i=t.deltaY,a=t.clientX,s=t.clientY,u=t.ctrlKey,l=new WheelEvent("wheel",{deltaX:o,deltaY:i,clientX:a,clientY:s,ctrlKey:u});null===(r=null===(e=n.props.lf.container)||void 0===e?void 0:e.querySelector('.lf-canvas-overlay[name="canvas-overlay"]'))||void 0===r||r.dispatchEvent(l)},n.onDragging=function(t){var e=t.deltaX,r=t.deltaY,o=n.props,i=o.graphModel,a=o.lf,s=a.getTransform(),u=s.SCALE_X,l=s.SCALE_Y,c=i.getSelectElements(!0);i.moveNodes(c.nodes.map((function(t){return t.id})),e/u,r/l)},n.handleContextMenu=function(t){t.preventDefault();var e=n.props,r=e.graphModel,o=e.graphModel,i=o.eventCenter,a=o.selectElements,s=r.getPointByClient({x:t.clientX,y:t.clientY}),u={nodes:[],edges:[]},l=F_([],V_(a.values()),!1);l.forEach((function(t){t.BaseType===Bp.NODE&&u.nodes.push(t.getData()),t.BaseType===Bp.EDGE&&u.edges.push(t.getData())})),i.emit(zp.SELECTION_CONTEXTMENU,{data:u,e:t,position:s})};var r=e.graphModel,o=r.gridSize,i=r.eventCenter;return n.stepDrag=new Zp({onDragging:n.onDragging,step:o,eventType:"SELECTION",eventCenter:i}),n}return G_(e,t),e.prototype.render=function(){var t,e,n=this.props.graphModel,r=n.selectElements,o=n.transformModel,i=this.props.lf.getTransform(),a=i.SCALE_X,s=i.SCALE_Y;if(!(r.size<=1)){var u=Number.MAX_SAFE_INTEGER,l=Number.MAX_SAFE_INTEGER,c=Number.MIN_SAFE_INTEGER,p=Number.MIN_SAFE_INTEGER;r.forEach((function(t){var e;t.BaseType===Bp.NODE&&(e=fd(t)),t.BaseType===Bp.EDGE&&(e=gd(t)),void 0!==e&&(u=Math.min(u,e.x),l=Math.min(l,e.y),c=Math.max(c,e.x1),p=Math.max(p,e.y1))})),t=V_(o.CanvasPointToHtmlPoint([u,l]),2),u=t[0],l=t[1],e=V_(o.CanvasPointToHtmlPoint([c,p]),2),c=e[0],p=e[1];var d={left:"".concat(u-20*a/2,"px"),top:"".concat(l-20*s/2,"px"),width:"".concat(c-u+20*a,"px"),height:"".concat(p-l+20*s,"px"),"border-width":"".concat(2*a,"px")};return zt("div",{className:"lf-multiple-select",style:d,onMouseDown:this.handleMouseDown,onContextMenu:this.handleContextMenu,onWheel:this.handleWheelEvent})}},e.toolName="multiple-select-tool",e=Y_([Tb],e),e}(u["a"]),K_=W_,Z_=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},q_=[U_,K_],$_=function(){function t(t){var e=this;this.toolMap=new Map,this.disabledToolMap=new Map,this.instance=t,$n(q_,(function(t){e.isDisabled(t.toolName)||e.registerTool(t.toolName,t)}));var n=t.graphModel,r=n.eventCenter;r.on("".concat(zp.GRAPH_TRANSFORM,",").concat(zp.NODE_CLICK,",").concat(zp.BLANK_CLICK," "),(function(){var t,e=n.textEditElement,r=n.editConfigModel,o=r.edgeTextEdit,i=r.nodeTextEdit;(o||i)&&e&&(null===(t=n.textEditElement)||void 0===t||t.setElementState(kp.DEFAULT))}))}return t.prototype.isDisabled=function(t){var e;return-1!==(null===(e=this.instance.options.disabledTools)||void 0===e?void 0:e.indexOf(t))},t.prototype.registerTool=function(t,e){this.toolMap.set(t,e)},t.prototype.disableTool=function(t){var e=this.toolMap.get(t);if(e)return this.disabledToolMap.set(t,e),this.toolMap.delete(t),!0;throw new Error("禁用失败，不存在名为 ${tool} 的工具")},t.prototype.enableTool=function(t){var e=this.disabledToolMap.get(t);if(e)return this.toolMap.set(t,e),this.disabledToolMap.delete(t),!0;throw new Error("不存在名为 ${tool} 的工具")},t.prototype.getTools=function(){return Array.from(this.toolMap.values())},t.prototype.getInstance=function(){return this.instance},t.prototype.destroy=function(){this.toolMap.clear(),this.disabledToolMap.clear()},Z_([up["A"]],t.prototype,"toolMap",void 0),Z_([up["j"]],t.prototype,"disableTool",null),Z_([up["j"]],t.prototype,"enableTool",null),t}(),J_=$_;function Q_(t,e){return Yl(t,e)}var tb=Q_;function eb(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}var nb=eb,rb=n("1a9d"),ob=function(){return ob=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},ob.apply(this,arguments)},ib=function(){function t(t){this.undos=[],this.redos=[],this.callbacks=[],this.stopWatch=null,this.curData=null,this.maxSize=50,this.waitTime=100,this.eventCenter=t}return t.prototype.add=function(t){tb(nb(this.undos),t)||(this.undos.push(t),tb(this.curData,t)||(this.redos=[]),this.eventCenter.emit(zp.HISTORY_CHANGE,{data:{undos:this.undos,redos:this.redos,undoAble:this.undoAble(),redoAble:this.redoAble()}}),this.undos.length>this.maxSize&&this.undos.shift())},t.prototype.undoAble=function(){return this.undos.length>1},t.prototype.undo=function(){if(this.undoAble()){var t=this.undos.pop();this.redos.push(t);var e=this.undos.pop();return this.curData=zs(e),e}},t.prototype.redoAble=function(){return this.redos.length>0},t.prototype.redo=function(){if(this.redoAble()){var t=this.redos.pop();return this.curData=zs(t),t}},t.prototype.watch=function(t){var e=this;this.stopWatch&&this.stopWatch(),this.undos.push(t.modelToGraphData()),this.stopWatch=Object(rb["a"])(t,sg((function(){var n=t.modelToHistoryData();n&&e.add(ob({},n))}),this.waitTime))},t.prototype.destroy=function(){this.undos=[],this.redos=[],this.curData=null,this.stopWatch&&this.stopWatch()},t}(),ab=ib,sb=n("8a605"),ub=n.n(sb),lb="[object Map]",cb="[object Set]",pb=Object.prototype,db=pb.hasOwnProperty;function fb(t){if(null==t)return!0;if(kn(t)&&(we(t)||"string"==typeof t||"function"==typeof t.splice||Object(Ae["a"])(t)||dn(t)||Ee(t)))return!t.length;var e=ea(t);if(e==lb||e==cb)return!t.size;if(_n(t))return!Mn(t).length;for(var n in t)if(db.call(t,n))return!1;return!0}var hb=fb,yb=null;function vb(t,e){return t.x+=e,t.y+=e,hb(t.text)||(t.text.x+=e,t.text.y+=e),t}function gb(t,e){return t.startPoint&&(t.startPoint.x+=e,t.startPoint.y+=e),t.endPoint&&(t.endPoint.x+=e,t.endPoint.y+=e),t.pointsList&&t.pointsList.length>0&&t.pointsList.forEach((function(t){t.x+=e,t.y+=e})),hb(t.text)||(t.text.x+=e,t.text.y+=e),t}var mb=40,_b=40;function bb(t,e){var n=t.keyboard,r=n.options.keyboard;n.on(["cmd + c","ctrl + c"],(function(){if(_b=mb,!(null===r||void 0===r?void 0:r.enabled))return!0;if(e.textEditElement)return!0;var n=t.options.guards,o=e.getSelectElements(!1),i=!n||!n.beforeClone||n.beforeClone(o);return!i||0===o.nodes.length&&0===o.edges.length?(yb=null,!0):(yb=o,yb.nodes.forEach((function(t){return vb(t,mb)})),yb.edges.forEach((function(t){return gb(t,mb)})),!1)})),n.on(["cmd + v","ctrl + v"],(function(){if(!(null===r||void 0===r?void 0:r.enabled))return!0;if(e.textEditElement)return!0;if(yb&&(yb.nodes||yb.edges)){t.clearSelectElements();var n=t.addElements(yb,_b);if(!n)return!0;n.nodes.forEach((function(e){return t.selectElementById(e.id,!0)})),n.edges.forEach((function(e){return t.selectElementById(e.id,!0)})),yb.nodes.forEach((function(t){return vb(t,mb)})),yb.edges.forEach((function(t){return gb(t,mb)})),_b+=mb}return!1})),n.on(["cmd + z","ctrl + z"],(function(){return!(null===r||void 0===r?void 0:r.enabled)||(!!e.textEditElement||(t.undo(),!1))})),n.on(["cmd + y","ctrl + y"],(function(){return!(null===r||void 0===r?void 0:r.enabled)||(!!e.textEditElement||(t.redo(),!1))})),n.on(["backspace"],(function(){if(!(null===r||void 0===r?void 0:r.enabled))return!0;if(e.textEditElement)return!0;var n=e.getSelectElements(!0);return t.clearSelectElements(),n.edges.forEach((function(e){return e.id&&t.deleteEdge(e.id)})),n.nodes.forEach((function(e){return e.id&&t.deleteNode(e.id)})),!1}))}var xb=function(){function t(t){t.keyboard||(t.keyboard={enabled:!1}),this.options=t;var e=t.lf;this.target=e.container,this.mousetrap=new ub.a(this.target),t.keyboard.enabled&&!e.options.isSilentMode&&this.enable(!0)}return t.prototype.initShortcuts=function(){var t,e=this,n=(null!==(t=this.options.keyboard)&&void 0!==t?t:{}).shortcuts;if(n)if(we(n))n.forEach((function(t){var n=t.keys,r=t.callback,o=t.action;return e.on(n,r,o)}));else{var r=n.keys,o=n.callback,i=n.action;this.on(r,o,i)}},t.prototype.on=function(t,e,n){this.mousetrap.bind(this.getKeys(t),e,n)},Object.defineProperty(t.prototype,"disabled",{get:function(){var t,e;return!0!==(null===(e=null===(t=this.options)||void 0===t?void 0:t.keyboard)||void 0===e?void 0:e.enabled)},enumerable:!1,configurable:!0}),t.prototype.off=function(t,e){this.mousetrap.unbind(this.getKeys(t),e)},t.prototype.enable=function(t){(this.disabled||t)&&(this.options.keyboard&&(this.options.keyboard.enabled=!0),this.target instanceof HTMLElement&&(this.target.setAttribute("tabindex","-1"),this.target.style.outline="none"))},t.prototype.disable=function(){this.disabled||(this.options.keyboard&&(this.options.keyboard.enabled=!1),this.target instanceof HTMLElement&&this.target.removeAttribute("tabindex"))},t.prototype.destroy=function(){this.mousetrap.reset()},t.prototype.getKeys=function(t){var e=this;return(Array.isArray(t)?t:[t]).map((function(t){return e.formatKey(t)}))},t.prototype.formatKey=function(t){return t.toLowerCase().replace(/\s/g,"").replace("delete","del").replace("cmd","command")},t}(),Eb=xb,Ob=function(){return Ob=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Ob.apply(this,arguments)},wb=function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(r=i.next()).done)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(o)throw o.error}}return a},Ab=function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))},Sb=Symbol("plugin registered by Logicflow.use"),Mb=function(){function t(t){var e,n=this;this.viewMap=new Map,this.components=[],this.extension={},this.setView=function(t,e){return n.viewMap.set(t,e)},this.getView=function(t){return n.viewMap.get(t)};var r=Hu.get(t),o=r.container,i=r.width,a=r.height;this.options=r,this.container=this.initContainer(o,i,a),this.graphModel=new Fg(Ob(Ob({},r),{container:this.container})),this.plugins=null!==(e=r.plugins)&&void 0!==e?e:[];var s=this.graphModel.eventCenter;this.tool=new J_(this),this.dnd=new L_({lf:this}),this.history=new ab(s),this.keyboard=new Eb({lf:this,keyboard:r.keyboard}),!1!==r.snapline&&(this.snaplineModel=new Zg(this.graphModel),I_(s,this.snaplineModel)),r.isSilentMode||(bb(this,this.graphModel),this.keyboard.initShortcuts()),this.defaultRegister(),this.installPlugins(r.disabledPlugins)}return t.prototype.initContainer=function(t,e,n){var r=document.createElement("div");return r.style.position="relative",r.style.width=e?"".concat(e,"px"):"100%",r.style.height=n?"".concat(n,"px"):"100%",t.innerHTML="",t.appendChild(r),r},Object.defineProperty(t.prototype,Symbol.toStringTag,{get:function(){return t.toStringTag},enumerable:!1,configurable:!0}),t.prototype.register=function(t,e,n){if(void 0===n&&(n=!0),"string"===typeof t){var r={BaseEdge:x_,BaseEdgeModel:By,BaseNode:Xm,BaseNodeModel:vv,RectNode:Gm,RectNodeModel:Xv,CircleNode:Fm,CircleNodeModel:xv,PolygonNode:Zm,PolygonNodeModel:Lv,TextNode:o_,TextNodeModel:Vv,LineEdge:T_,LineEdgeModel:Zy,DiamondNode:Jm,DiamondNodeModel:Sv,PolylineEdge:C_,PolylineEdgeModel:ev,BezierEdge:S_,BezierEdgeModel:Yy,EllipseNode:e_,EllipseNodeModel:Pv,HtmlNode:l_,HtmlNodeModel:Wv,h:u["e"],type:t};if(this.viewMap.forEach((function(t){var e=t.extendKey;e&&(r[e]=t)})),this.graphModel.modelMap.forEach((function(t){var e=t.extendKey;e&&(r[e]=t)})),e){var o=e(r),i=o.view,a=o.model,s=i;n&&!s.isObserved&&(s.isObserved=!0,s=Tb(s)),this.setView(t,s),this.graphModel.setModel(t,a)}}else this.registerElement(t)},t.prototype.registerElement=function(t){var e=t.view;!1===t.isObserverView||e.isObserved||(e.isObserved=!0,e=Tb(e)),this.setView(t.type,e),this.graphModel.setModel(t.type,t.model)},t.prototype.batchRegister=function(t){var e=this;void 0===t&&(t=[]),$n(t,(function(t){e.registerElement(t)}))},t.prototype.defaultRegister=function(){var t=[{type:"rect",view:Gm,model:Xv},{type:"circle",view:Fm,model:xv},{type:"polygon",view:Zm,model:Lv},{type:"text",view:o_,model:Vv},{type:"ellipse",view:e_,model:Pv},{type:"diamond",view:Jm,model:Sv},{type:"html",view:l_,model:Wv},{type:"line",view:T_,model:Zy},{type:"polyline",view:C_,model:ev},{type:"bezier",view:S_,model:Yy}];this.batchRegister(t)},t.prototype.addNode=function(t,e,n){return void 0===e&&(e=zp.NODE_ADD),this.graphModel.addNode(t,e,n)},t.prototype.deleteNode=function(t){var e=this.graphModel.getNodeModelById(t);if(!e)return!1;var n=e.getData(),r=this.options.guards,o=!(null===r||void 0===r?void 0:r.beforeDelete)||r.beforeDelete(n);return o&&this.graphModel.deleteNode(t),o},t.prototype.cloneNode=function(t){var e=this.graphModel.getNodeModelById(t),n=null===e||void 0===e?void 0:e.getData();if(n){var r=this.options.guards,o=!(null===r||void 0===r?void 0:r.beforeClone)||r.beforeClone(n);if(o)return this.graphModel.cloneNode(t)}},t.prototype.changeNodeId=function(t,e){return this.graphModel.changeNodeId(t,e)},t.prototype.changeNodeType=function(t,e){this.graphModel.changeNodeType(t,e)},t.prototype.getNodeModelById=function(t){return this.graphModel.getNodeModelById(t)},t.prototype.getNodeDataById=function(t){var e=this.getNodeModelById(t);return null===e||void 0===e?void 0:e.getData()},t.prototype.getNodeIncomingEdge=function(t){return this.graphModel.getNodeIncomingEdge(t)},t.prototype.getNodeOutgoingEdge=function(t){return this.graphModel.getNodeOutgoingEdge(t)},t.prototype.getNodeIncomingNode=function(t){return this.graphModel.getNodeIncomingNode(t)},t.prototype.getNodeOutgoingNode=function(t){return this.graphModel.getNodeOutgoingNode(t)},t.prototype.createFakeNode=function(t){var e=this.graphModel.modelMap.get(t.type);if(!e)return console.warn("不存在为".concat(t.type,"类型的节点")),null;var n=new e(Ob(Ob({},t),{virtual:!0}),this.graphModel);return this.graphModel.setFakeNode(n),n},t.prototype.removeFakeNode=function(){this.graphModel.removeFakeNode()},t.prototype.setNodeSnapLine=function(t){var e;null===(e=this.snaplineModel)||void 0===e||e.setNodeSnapLine(t)},t.prototype.removeNodeSnapLine=function(){var t;null===(t=this.snaplineModel)||void 0===t||t.clearSnapline()},t.prototype.setDefaultEdgeType=function(t){this.graphModel.setDefaultEdgeType(t)},t.prototype.addEdge=function(t){return this.graphModel.addEdge(t)},t.prototype.getEdgeDataById=function(t){var e=this.getEdgeModelById(t);return null===e||void 0===e?void 0:e.getData()},t.prototype.getEdgeModelById=function(t){return this.graphModel.getEdgeModelById(t)},t.prototype.getEdgeModels=function(t){var e=t.sourceNodeId,n=t.targetNodeId,r=[],o=this.graphModel.edges;return e&&n?$n(o,(function(t){t.sourceNodeId===e&&t.targetNodeId===n&&r.push(t)})):e?$n(o,(function(t){t.sourceNodeId===e&&r.push(t)})):n&&$n(o,(function(t){t.targetNodeId===n&&r.push(t)})),r},t.prototype.changeEdgeId=function(t,e){return this.graphModel.changeEdgeId(t,e)},t.prototype.changeEdgeType=function(t,e){this.graphModel.changeEdgeType(t,e)},t.prototype.deleteEdge=function(t){var e=this.graphModel.getEdgeModelById(t);if(!e)return!1;var n=e.getData(),r=this.options.guards,o=!(null===r||void 0===r?void 0:r.beforeDelete)||r.beforeDelete(n);return o&&this.graphModel.deleteEdgeById(t),o},t.prototype.deleteEdgeByNodeId=function(t){var e=t.sourceNodeId,n=t.targetNodeId;e&&n?this.graphModel.deleteEdgeBySourceAndTarget(e,n):e?this.graphModel.deleteEdgeBySource(e):n&&this.graphModel.deleteEdgeByTarget(n)},t.prototype.getNodeEdges=function(t){return this.graphModel.getNodeEdges(t)},t.prototype.addElements=function(t,e){var n=this,r=t.nodes,o=t.edges;void 0===e&&(e=40),console.log("distance",e);var i={},a={nodes:[],edges:[]};return $n(r,(function(t){var e=t.id,r=n.addNode(t);e&&(i[e]=r.id),a.nodes.push(r)})),$n(o,(function(t){var e=t.sourceNodeId,r=t.targetNodeId;i[e]&&(e=i[e]),i[r]&&(r=i[r]);var o=n.graphModel.addEdge(Ob(Ob({},t),{sourceNodeId:e,targetNodeId:r}));a.edges.push(o)})),a},t.prototype.selectElementById=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!0),this.graphModel.selectElementById(t,e),!e&&n&&this.graphModel.toFront(t)},t.prototype.getSelectElements=function(t){return void 0===t&&(t=!0),this.graphModel.getSelectElements(t)},t.prototype.clearSelectElements=function(){this.graphModel.clearSelectElements()},t.prototype.getModelById=function(t){return this.graphModel.getElement(t)},t.prototype.getDataById=function(t){var e;return null===(e=this.graphModel.getElement(t))||void 0===e?void 0:e.getData()},t.prototype.deleteElement=function(t){var e,n,r,o=this.getModelById(t);if(!o)return!1;var i=(e={},e[Bp.NODE]=this.deleteNode,e[Bp.EDGE]=this.deleteEdge,e);return null!==(r=null===(n=i[o.BaseType])||void 0===n?void 0:n.call(this,t))&&void 0!==r&&r},t.prototype.setElementZIndex=function(t,e){return this.graphModel.setElementZIndex(t,e)},t.prototype.getAreaElement=function(t,e,n,r,o){return void 0===n&&(n=!0),void 0===r&&(r=!0),void 0===o&&(o=!1),this.graphModel.getAreaElement(t,e,n,r,o).map((function(t){return t.getData()}))},t.prototype.setProperties=function(t,e){var n;null===(n=this.graphModel.getElement(t))||void 0===n||n.setProperties(Lp(e))},t.prototype.getProperties=function(t){var e;return null===(e=this.graphModel.getElement(t))||void 0===e?void 0:e.getProperties()},t.prototype.deleteProperty=function(t,e){var n;null===(n=this.graphModel.getElement(t))||void 0===n||n.deleteProperty(e)},t.prototype.updateAttributes=function(t,e){this.graphModel.updateAttributes(t,e)},t.prototype.editText=function(t){this.graphModel.editText(t)},t.prototype.updateText=function(t,e){this.graphModel.updateText(t,e)},t.prototype.updateEditConfig=function(t){var e=this.graphModel,n=e.editConfigModel,r=e.transformModel,o=n.snapGrid;if(n.updateEditConfig(t),void 0!==(null===t||void 0===t?void 0:t.stopMoveGraph)&&r.updateTranslateLimits(t.stopMoveGraph),(null===t||void 0===t?void 0:t.isSilentMode)?this.keyboard.disable():this.keyboard.enable(!0),!Qn(null===t||void 0===t?void 0:t.snapGrid)&&t.snapGrid!==o){var i=this.graphModel.grid.size,a=void 0===i?1:i;this.graphModel.updateGridSize(t.snapGrid?a:1)}},t.prototype.getEditConfig=function(){return this.graphModel.editConfigModel.getConfig()},t.prototype.setTheme=function(t){this.graphModel.setTheme(t)},t.prototype.focusByElement=function(t){var e=void 0,n=this.getNodeModelById(t);if(n){var r=n.getData(),o=r.x,i=r.y;e={x:o,y:i}}var a=this.getEdgeModelById(t);if(a){var s=a.textPosition;o=s.x,i=s.y;e={x:o,y:i}}e&&this.focusByCoordinate(e)},t.prototype.focusByCoordinate=function(t){var e=this.graphModel,n=e.transformModel,r=e.width,o=e.height,i=t.x,a=t.y;n.focusOn(i,a,r,o)},t.prototype.focusOn=function(t){if("string"===typeof t)this.focusByElement(t);else if("x"in t&&"y"in t)this.focusByCoordinate(t);else{var e=t.id,n=t.coordinate;e&&this.focusByElement(e),n&&this.focusByCoordinate(n)}},t.prototype.resize=function(t,e){this.graphModel.resize(t,e),this.options.width=this.graphModel.width,this.options.height=this.graphModel.height},t.prototype.toFront=function(t){this.graphModel.toFront(t)},t.prototype.getPointByClient=function(t,e){return"object"===typeof t?this.graphModel.getPointByClient(t):"number"===typeof e?this.graphModel.getPointByClient({x:t,y:e}):void 0},t.prototype.getGraphData=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.getGraphRawData();return this.adapterOut?this.adapterOut.apply(this,Ab([n],wb(t),!1)):n},t.prototype.getGraphRawData=function(){return this.graphModel.modelToGraphData()},t.prototype.clearData=function(){this.graphModel.clearData(),this.render({})},t.prototype.renderRawData=function(t){this.graphModel.graphDataToModel(Lp(t)),!1!==this.options.history&&this.history.watch(this.graphModel),vt(zt(um,{getView:this.getView,tool:this.tool,options:this.options,dnd:this.dnd,snaplineModel:this.snaplineModel,graphModel:this.graphModel}),this.container),this.emit(zp.GRAPH_RENDERED,{data:this.graphModel.modelToGraphData(),graphModel:this.graphModel})},t.prototype.render=function(t){var e=zs(t);this.adapterIn&&(e=this.adapterIn(e)),this.renderRawData(e)},t.prototype.undo=function(){if(this.history.undoAble()){var t=Lp(this.history.undo());this.clearSelectElements(),this.graphModel.graphDataToModel(t)}},t.prototype.redo=function(){if(this.history.redoAble()){var t=Lp(this.history.redo());this.clearSelectElements(),this.graphModel.graphDataToModel(t)}},t.prototype.zoom=function(t,e){var n=this.graphModel.transformModel;return n.zoom(t,e)},t.prototype.resetZoom=function(){var t=this.graphModel.transformModel;t.resetZoom()},t.prototype.setZoomMiniSize=function(t){var e=this.graphModel.transformModel;e.setZoomMiniSize(t)},t.prototype.setZoomMaxSize=function(t){var e=this.graphModel.transformModel;e.setZoomMaxSize(t)},t.prototype.getTransform=function(){var t=this.graphModel.transformModel,e=t.SCALE_X,n=t.SCALE_Y,r=t.TRANSLATE_X,o=t.TRANSLATE_Y;return{SCALE_X:e,SCALE_Y:n,TRANSLATE_X:r,TRANSLATE_Y:o}},t.prototype.translate=function(t,e){var n=this.graphModel.transformModel;n.translate(t,e)},t.prototype.resetTranslate=function(){var t=this.graphModel.transformModel,e=t.TRANSLATE_X,n=t.TRANSLATE_Y;this.translate(-e,-n)},t.prototype.translateCenter=function(){this.graphModel.translateCenter()},t.prototype.fitView=function(t,e){void 0===e&&(e=t),this.graphModel.fitView(t,e)},t.prototype.openEdgeAnimation=function(t){this.graphModel.openEdgeAnimation(t)},t.prototype.closeEdgeAnimation=function(t){this.graphModel.closeEdgeAnimation(t)},t.prototype.on=function(t,e){this.graphModel.eventCenter.on(t,e)},t.prototype.off=function(t,e){this.graphModel.eventCenter.off(t,e)},t.prototype.once=function(t,e){this.graphModel.eventCenter.once(t,e)},t.prototype.emit=function(t,e){this.graphModel.eventCenter.emit(t,e)},t.use=function(t,e){var n,r=t.pluginName;if(!r)throw new Error("请给插件指定 pluginName!");this.extensions.set(r,(n={},n[Sb]=Sb,n.extension=t,n.props=e,n))},t.prototype.installPlugins=function(e){var n=this;void 0===e&&(e=[]);var r=Array.from(t.extensions,(function(t){var e=wb(t,2),n=e[1];return n})),o=Ab(Ab([],wb(this.plugins),!1),wb(r),!1);$n(o,(function(t){var r,o;Sb in t?(r=t.extension,o=t.props):r=t;var i=null===r||void 0===r?void 0:r.pluginName;-1===_u(e,i)&&n.installPlugin(r,o)}))},t.prototype.installPlugin=function(e,n){var r,o;if("pluginName"in e&&"install"in e){var i=e.pluginName,a=e.install,s=e.render;i&&(a&&a.call(e,this,t),s&&this.components.push(s.bind(e)),this.extension[i]=e)}else{var u=e,l=u.pluginName,c=new u({lf:this,LogicFlow:t,props:n,options:null!==(o=null===(r=this.options.pluginsOptions)||void 0===r?void 0:r[l])&&void 0!==o?o:{}});c.render&&this.components.push(c.render.bind(c)),this.extension[l]=c}},t.prototype.destroy=function(){this.clearData(),vt(null,this.container),this.keyboard.destroy(),this.graphModel.destroy(),this.tool.destroy(),this.history.destroy()},t.extensions=new Map,t}();(function(t){t.toStringTag="LF.".concat(t.name)})(Mb||(Mb={}));var jb=Mb;function Tb(t){return Object(s["a"])(t)}e["d"]=jb}}]);