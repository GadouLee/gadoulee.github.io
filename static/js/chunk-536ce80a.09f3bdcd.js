(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-536ce80a","chunk-8db4c1f8","chunk-5d235037"],{"0993":function(e,t,a){e.exports=a.p+"static/img/checked.f8521b5f.png"},1423:function(e,t,a){},1825:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"newApproval"},[e._e(),a("div",{staticStyle:{width:"650px",margin:"0 auto"}},[0==e.active?a("el-form",{ref:"ruleForm",staticClass:"newApprovalForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"150px",size:"medium"}},[e.step?e._e():a("el-form-item",{attrs:{label:"项目名称",prop:"project_id"}},[a("el-select",{attrs:{disabled:e.disableFlag,placeholder:"请选择",filterable:"",clearable:""},on:{change:e.handleProjectChange},model:{value:e.ruleForm.project_id,callback:function(t){e.$set(e.ruleForm,"project_id",t)},expression:"ruleForm.project_id"}},e._l(e.projectList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.project_name,value:e.id}})})),1)],1),e.step?e._e():a("el-form-item",{attrs:{label:"项目负责人",prop:"contacts_name"}},[a("el-select",{attrs:{disabled:!0,placeholder:"请选择",filterable:"",clearable:""},model:{value:e.ruleForm.contacts_name,callback:function(t){e.$set(e.ruleForm,"contacts_name",t)},expression:"ruleForm.contacts_name"}},e._l(e.projectList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.contacts_name,value:e.id}})})),1)],1),e.step?e._e():a("el-form-item",{attrs:{label:"招标公司",prop:"company_id"}},[a("el-select",{attrs:{disabled:!0,placeholder:"请选择",filterable:"",clearable:""},model:{value:e.ruleForm.company_id,callback:function(t){e.$set(e.ruleForm,"company_id",t)},expression:"ruleForm.company_id"}},e._l(e.companyList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),e.step?e._e():a("el-form-item",{attrs:{label:"投标公司",prop:"bid_company_id"}},[a("el-select",{attrs:{disabled:!0,placeholder:"请选择",filterable:"",clearable:""},model:{value:e.ruleForm.bid_company_id,callback:function(t){e.$set(e.ruleForm,"bid_company_id",t)},expression:"ruleForm.bid_company_id"}},e._l(e.companyList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"付款方式",prop:"pay_type"}},[a("el-select",{attrs:{disabled:e.disableFlag,placeholder:"请选择",filterable:"",clearable:""},model:{value:e.ruleForm.pay_type,callback:function(t){e.$set(e.ruleForm,"pay_type",t)},expression:"ruleForm.pay_type"}},e._l(e.payTypeList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"付款账户类型",prop:"payment_type"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择付款账户类型",disabled:e.detailToCreate},model:{value:e.ruleForm.payment_type,callback:function(t){e.$set(e.ruleForm,"payment_type",t)},expression:"ruleForm.payment_type"}},[a("el-option",{attrs:{label:"公司",value:1}}),a("el-option",{attrs:{label:"个人",value:2}})],1)],1),1==e.ruleForm.payment_type?[a("el-form-item",{attrs:{label:"付款方",prop:"payment_company_id"}},[a("el-select",{attrs:{disabled:e.disableFlag,placeholder:"请选择",filterable:"",clearable:""},model:{value:e.ruleForm.payment_company_id,callback:function(t){e.$set(e.ruleForm,"payment_company_id",t)},expression:"ruleForm.payment_company_id"}},e._l(e.companyList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),1==e.ruleForm.pay_type||4==e.ruleForm.pay_type?a("el-form-item",{attrs:{label:"付款账号",prop:"payment_company_bank_id"}},[a("el-select",{attrs:{disabled:!e.ruleForm.payment_company_id||e.disableFlag,placeholder:"请选择",filterable:"",clearable:""},model:{value:e.ruleForm.payment_company_bank_id,callback:function(t){e.$set(e.ruleForm,"payment_company_bank_id",t)},expression:"ruleForm.payment_company_bank_id"}},e._l(e.companyListAccount,(function(e){return a("el-option",{key:e.id,attrs:{label:e.open_bank+":"+e.bank_number,value:e.id}})})),1)],1):e._e()]:e._e(),2==e.ruleForm.payment_type?[a("el-form-item",{attrs:{label:"个人付款id",prop:"payment_staff_id"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",clearable:"",filterable:""},model:{value:e.ruleForm.payment_staff_id,callback:function(t){e.$set(e.ruleForm,"payment_staff_id",t)},expression:"ruleForm.payment_staff_id"}},e._l(e.staffList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),1==e.ruleForm.pay_type||4==e.ruleForm.pay_type?a("el-form-item",{attrs:{label:"个人付款账户",prop:"payment_staff_bank_id"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",clearable:"",filterable:""},model:{value:e.ruleForm.payment_staff_bank_id,callback:function(t){e.$set(e.ruleForm,"payment_staff_bank_id",t)},expression:"ruleForm.payment_staff_bank_id"}},e._l(e.payment_staff_bank_idArr,(function(e){return a("el-option",{key:e.id,attrs:{label:e.open_bank+":"+e.bank_number,value:e.id}})})),1)],1):e._e()]:e._e(),a("el-form-item",{attrs:{label:"收款账户类型",prop:"revenue_type"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择收款账户类型",disabled:e.detailToCreate},model:{value:e.ruleForm.revenue_type,callback:function(t){e.$set(e.ruleForm,"revenue_type",t)},expression:"ruleForm.revenue_type"}},[a("el-option",{attrs:{label:"公司",value:1}}),a("el-option",{attrs:{label:"个人",value:2}})],1)],1),1==e.ruleForm.revenue_type?[a("el-form-item",{attrs:{label:"收款方",prop:"revenue_company_id"}},[a("el-select",{attrs:{disabled:e.disableFlag,placeholder:"请选择",filterable:"",clearable:""},model:{value:e.ruleForm.revenue_company_id,callback:function(t){e.$set(e.ruleForm,"revenue_company_id",t)},expression:"ruleForm.revenue_company_id"}},e._l(e.companyList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),1==e.ruleForm.pay_type||4==e.ruleForm.pay_type?a("el-form-item",{attrs:{label:"收款账户",prop:"revenue_company_bank_id"}},[a("el-select",{attrs:{disabled:!e.ruleForm.revenue_company_id||e.disableFlag,placeholder:"请选择",filterable:"",clearable:""},model:{value:e.ruleForm.revenue_company_bank_id,callback:function(t){e.$set(e.ruleForm,"revenue_company_bank_id",t)},expression:"ruleForm.revenue_company_bank_id"}},e._l(e.companyListAccountRevenue,(function(e){return a("el-option",{key:e.id,attrs:{label:e.open_bank+":"+e.bank_number,value:e.id}})})),1)],1):e._e()]:e._e(),2==e.ruleForm.revenue_type?[a("el-form-item",{attrs:{label:"个人收款id",prop:"revenue_staff_id"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",clearable:"",filterable:""},model:{value:e.ruleForm.revenue_staff_id,callback:function(t){e.$set(e.ruleForm,"revenue_staff_id",t)},expression:"ruleForm.revenue_staff_id"}},e._l(e.staffList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),1==e.ruleForm.pay_type||4==e.ruleForm.pay_type?a("el-form-item",{attrs:{label:"个人收款账户",prop:"revenue_staff_bank_id"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",filterable:"",clearable:""},model:{value:e.ruleForm.revenue_staff_bank_id,callback:function(t){e.$set(e.ruleForm,"revenue_staff_bank_id",t)},expression:"ruleForm.revenue_staff_bank_id"}},e._l(e.revenue_staff_idArr,(function(e){return a("el-option",{key:e.id,attrs:{label:e.open_bank+":"+e.bank_number,value:e.id}})})),1)],1):e._e()]:e._e(),a("el-form-item",{attrs:{label:"付款金额",prop:"payment_money"}},[a("el-input",{staticClass:"moneyStyle",attrs:{title:e.ruleForm.payment_money,disabled:e.disableFlag,placeholder:"请输入"},model:{value:e.ruleForm.payment_money,callback:function(t){e.$set(e.ruleForm,"payment_money",t)},expression:"ruleForm.payment_money"}})],1),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{title:e.ruleForm.remarks,placeholder:"请输入",disabled:e.disableFlag},model:{value:e.ruleForm.remarks,callback:function(t){e.$set(e.ruleForm,"remarks",t)},expression:"ruleForm.remarks"}})],1),2==e.active?a("el-form-item",{attrs:{label:"备注信息",prop:"remarks"}},[a("el-input",{attrs:{title:e.ruleForm.remarks,disabled:e.disableFlag,type:"textarea"},model:{value:e.ruleForm.remarks,callback:function(t){e.$set(e.ruleForm,"remarks",t)},expression:"ruleForm.remarks"}})],1):e._e(),a("el-form-item",{attrs:{label:"相关附件",prop:"receipt"}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:"##","file-list":e.fileList,"before-upload":e.beforUpload,"on-remove":e.handleRemove,"before-remove":e.beforeRemove,"on-preview":e.handleDown}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)],1),a("el-form-item",[a("el-button",{staticStyle:{"margin-top":"12px"},attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("提交")])],1)],2):e._e()],1)])},s=[],n=a("c7eb"),r=a("1da1"),l=a("5530"),o=a("ade3"),p=(a("7db0"),a("caad"),a("d81d"),a("b0c0"),a("e9c4"),a("a9e3"),a("b64b"),a("d3b7"),a("0643"),a("fffc"),a("4e3e"),a("a573"),a("159b"),a("fef7")),c=a("277f"),d=a("9437"),m=a("2f62"),u={components:{ProgressBar:p["a"]},props:{withModal:{type:Object,default:void 0}},data:function(){var e=this;return{detailToCreate:!1,disableFlag:!1,step:!1,loding:!1,id:"",fileList:[],barWidth:"",active:0,payTypeList:[{label:"网银转账",value:1},{label:"现钞",value:2},{label:"担保手续",value:3},{label:"网银转账+担保手续",value:4},{label:"现钞+借据",value:5},{label:"投标保证金保函/保险",value:6}],arr:[{stepTitle:"客户垫付",stepDesc:""},{stepTitle:"支付投标人",stepDesc:""},{stepTitle:"支付招标方",stepDesc:""},{stepTitle:"退还投标人",stepDesc:""},{stepTitle:"退还集团",stepDesc:""},{stepTitle:"退还客户",stepDesc:"必须退回客户原账户"}],ruleForm:{project_id:"",payment_company_id:"",payment_company_bank_id:"",revenue_company_id:"",revenue_company_bank_id:"",payment_money:"",pay_type:"",remarks:"",payment_type:1,payment_staff_id:"",payment_staff_bank_id:"",revenue_type:1,revenue_staff_id:"",revenue_staff_bank_id:"",client_company_id:"",bid_company_id:"",contacts_name:"",company_id:""},rules:Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])({project_id:[{required:!0,message:"请选择项目名称",trigger:"change"}],payment_company_id:[{required:!0,message:"请选择付款方",trigger:"change"}],payment_company_bank_id:[{required:!0,message:"请选择付款账号",trigger:"change"}],payment_staff_id:[{required:!0,message:"请选择个人付款id",trigger:"change"}],payment_staff_bank_id:[{required:!0,message:"请选择个人付款账户",trigger:"change"}],revenue_company_id:[{required:!0,message:"请选择收款方",trigger:"change"}],revenue_company_bank_id:[{required:!0,message:"请选择收款账户",trigger:"change"}],revenue_staff_id:[{required:!0,message:"请选择个人收款id",trigger:"change"}],revenue_staff_bank_id:[{required:!0,message:"请选择个人收款账户",trigger:"change"}],payment_money:[{required:!0,message:"请输入金额",trigger:"blur"}],pay_type:[{required:!0,message:"请选择付款方式",trigger:"change"}],remarks:[{required:!0,message:"请输入备注信息",trigger:"blur"}],receipt:[{required:!0,validator:function(t,a,i){0==e.fileList.length?i(new Error("请上传银行回执/借据")):i()}}],client_company_id:[{required:!0,message:"请选择客户公司",trigger:"blur"}]},"payment_staff_id",[{required:!0,message:"请选择付款方",trigger:"blur"}]),"payment_staff_bank_id",[{required:!0,message:"请选择付款方账号",trigger:"blur"}]),"revenue_staff_id",[{required:!0,message:"请选择收款方",trigger:"blur"}]),"revenue_staff_bank_id",[{required:!0,message:"请选择收款账号",trigger:"blur"}]),companyList:[],projectList:[],companyListAccount:[],companyListAccountRevenue:[],payment_staff_bank_idArr:[],revenue_staff_idArr:[]}},computed:{staffList:function(){return this.$store.state.company.staffList}},watch:{"ruleForm.payment_company_id":{handler:function(e,t){var a=this;e!=t&&t&&(this.ruleForm.payment_company_bank_id=""),e?this.$store.state.company.companyList.forEach((function(t){t.id==e&&(a.companyListAccount=t.companyBankList)})):(this.ruleForm.payment_company_bank_id="",this.companyListAccount=[])},deep:!0},"ruleForm.revenue_company_id":{handler:function(e,t){var a=this;e!=t&&t&&(this.ruleForm.revenue_company_bank_id=""),e?this.$store.state.company.companyList.forEach((function(t){t.id==e&&(a.companyListAccountRevenue=t.companyBankList)})):(this.ruleForm.revenue_company_bank_id="",this.companyListAccountRevenue=[])},deep:!0},"ruleForm.payment_staff_id":{handler:function(e,t){var a=this;e!=t&&t&&(this.ruleForm.payment_staff_bank_id=""),e&&this.$store.state.company.staffList.map((function(t){t.id==e&&(a.payment_staff_bank_idArr=t.staffBankList)}))},deep:!0},"ruleForm.revenue_staff_id":{handler:function(e,t){var a=this;e!=t&&t&&(this.ruleForm.revenue_staff_bank_id=""),e&&this.$store.state.company.staffList.map((function(t){t.id==e&&(a.revenue_staff_idArr=t.staffBankList)}))},deep:!0},fileList:{handler:function(e,t){e.length>0&&this.$refs.ruleForm.validateField("receipt")},deep:!0}},mounted:function(){var e,t,a,i=this;if(this.companyList=this.$store.state.company.companyList,this.projectList=this.$store.state.company.projectList,this.withModal){if(this.withModal.type){var s=this.withModal.type;switch(s){case"create":break;case"edit":if(this.id=this.withModal.id,this.step=this.withModal.step,this.withModal.data){var n,r=this.withModal.data;this.fileList=r.file?JSON.parse(r.file).map((function(e){return{url:e,name:i.getFileName(e)}})):[],this.$store.state.company.companyList.map((function(e){e.id===r.payment_company_id&&(i.companyListAccount=e.companyBankList),e.id===r.revenue_company_id&&(i.companyListAccountRevenue=e.companyBankList)})),this.ruleForm={bid_company_id:r.client_company_id,payment_type:r.payment_type,revenue_type:r.revenue_type,project_id:this.$route.params.id||(null===(n=this.withModal)||void 0===n?void 0:n.id),payment_company_id:r.payment_company_id,payment_company_bank_id:r.payment_company_bank_id?Number(r.payment_company_bank_id):"",revenue_company_id:r.payment_company_bank_id?Number(r.revenue_company_id):"",revenue_company_bank_id:r.revenue_company_bank_id?Number(r.revenue_company_bank_id):"",payment_money:r.payment_money,pay_type:r.pay_type?Number(r.pay_type):"",remarks:r.remarks,file:r.file,payment_staff_id:r.payment_staff_id,payment_staff_bank_id:r.payment_staff_bank_id,revenue_staff_id:r.revenue_staff_id,revenue_staff_bank_id:r.revenue_staff_bank_id},this.$forceUpdate()}break;default:break}}}else{var l,o;if(this.$route.params.id||null!==(e=this.withModal)&&void 0!==e&&e.id)this.id=this.$route.params.id||(null===(l=this.withModal)||void 0===l?void 0:l.id);if(this.$route.params.step||null!==(t=this.withModal)&&void 0!==t&&t.step)this.step=this.$route.params.step||(null===(o=this.withModal)||void 0===o?void 0:o.step),console.log(" this.step",this.step);if(console.log("this.$route.params.data",this.$route.params.data),this.$route.params.data||null!==(a=this.withModal)&&void 0!==a&&a.data){var p,c,d=this.$route.params.data||(null===(p=this.withModal)||void 0===p?void 0:p.data);this.fileList=d.file?JSON.parse(d.file).map((function(e){return{url:e,name:i.getFileName(e)}})):[],this.$store.state.company.companyList.map((function(e){e.id==d.payment_company_id&&(i.companyListAccount=e.companyBankList),e.id==d.revenue_company_id&&(i.companyListAccountRevenue=e.companyBankList)})),this.ruleForm={bid_company_id:d.client_company_id,payment_type:d.payment_type,revenue_type:d.revenue_type,project_id:this.$route.params.id||(null===(c=this.withModal)||void 0===c?void 0:c.id),payment_company_id:d.payment_company_id,payment_company_bank_id:d.payment_company_bank_id?Number(d.payment_company_bank_id):"",revenue_company_id:d.payment_company_bank_id?Number(d.revenue_company_id):"",revenue_company_bank_id:d.revenue_company_bank_id?Number(d.revenue_company_bank_id):"",payment_money:d.payment_money,pay_type:d.pay_type?Number(d.pay_type):"",remarks:d.remarks,file:d.file,payment_staff_id:d.payment_staff_id,payment_staff_bank_id:d.payment_staff_bank_id,revenue_staff_id:d.revenue_staff_id,revenue_staff_bank_id:d.revenue_staff_bank_id},this.$forceUpdate(),console.log("this.ruleFormthis.ruleFormthis.ruleFormthis.ruleForm",this.ruleForm)}}},methods:Object(l["a"])(Object(l["a"])({},Object(m["c"])("app",["OPEN_PREVIEW"])),{},{handleDown:function(e){var t,a=e.name.split(".").pop();["pdf"].includes(a)&&(t="pdf"),["doc","docx"].includes(a)&&(t="doc"),["png","jpg","jpeg","gif","bmp"].includes(a)&&(t="pic"),this.OPEN_PREVIEW({url:e.url,type:t})},beforUpload:function(e){var t=this,a=new FormData;return a.append("files",e),Object(d["a"])(a).then((function(a){200==a.code&&(e.url=a.data.file,t.fileList.push(e))})),!1},handleRemove:function(e,t){this.fileList=t},beforeRemove:function(){},getFileName:function(e){return-1!==e.lastIndexOf("?")?decodeURIComponent(e.substring(e.lastIndexOf("/")+1,e.lastIndexOf("?"))):decodeURIComponent(e.substring(e.lastIndexOf("/")+1))},submitForm:function(e){var t=this,a=this;this.$refs[e].validate(function(){var e=Object(r["a"])(Object(n["a"])().mark((function e(i){var s,r,l,o,p;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!i){e.next=18;break}if(t.ruleForm.file=JSON.stringify(t.fileList.map((function(e){return e.url}))),console.log("step,data",a.$route.params.step,a.$route.params.data),!(a.$route.params.step||null!==(s=a.withModal)&&void 0!==s&&s.step||a.$route.params.data||null!==(r=a.withModal)&&void 0!==r&&r.data)){e.next=11;break}return l=Object.assign(t.ruleForm,{phase:t.step,id:t.id}),e.next=7,Object(c["e"])(l);case 7:o=e.sent,200==o.code&&(t.$emit("refreshList"),t.$emit("close")),e.next=15;break;case 11:return e.next=13,Object(c["c"])(t.ruleForm);case 13:p=e.sent,200==p.code&&(t.$emit("refreshList"),t.$emit("close"));case 15:t.next(),e.next=20;break;case 18:return console.log("error submit!!"),e.abrupt("return",!1);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},next:function(){this.active++>1&&(this.active=0),this.active++>1&&(this.active=0)},handleProjectChange:function(e){this.ruleForm.contacts_name=e;var t=this.projectList.find((function(t){return t.id==e}));this.ruleForm.company_id=t.company_id,this.ruleForm.bid_company_id=t.bid_company_id}})},_=u,f=(a("7cce"),a("2877")),y=Object(f["a"])(_,i,s,!1,null,"11bbc06d",null);t["default"]=y.exports},3841:function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"g",(function(){return n})),a.d(t,"e",(function(){return r})),a.d(t,"c",(function(){return l})),a.d(t,"f",(function(){return o})),a.d(t,"d",(function(){return p})),a.d(t,"a",(function(){return c}));var i=a("b775");function s(e){return Object(i["a"])({url:"/Staffs/add",method:"post",data:e})}function n(e){return Object(i["a"])({url:"/Staffs/update",method:"post",data:e})}function r(e){return Object(i["a"])({url:"/Staffs/getInfo",method:"post",data:e})}function l(e){return Object(i["a"])({url:"/Staffs/delete",method:"post",data:e})}function o(e){return Object(i["a"])({url:"/Staffs/getList",method:"post",data:e})}function p(e){return Object(i["a"])({url:"/Publics/getArea",method:"post",data:e})}function c(e){return Object(i["a"])({url:"/Payments/deleteStaffBank",method:"post",data:e})}},4678:function(e,t,a){var i={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-ps":"4c98","./ar-ps.js":"4c98","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df48","./fa.js":"8df48","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b46","./gd.js":"f6b46","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku-kmr":"7558","./ku-kmr.js":"7558","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e9","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e9","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function s(e){var t=n(e);return a(t)}function n(e){if(!a.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}s.keys=function(){return Object.keys(i)},s.resolve=n,e.exports=s,s.id="4678"},"57c0":function(e,t,a){"use strict";a("d9c8")},"669d":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("searchComponent",{attrs:{"search-config":e.searchConfig},on:{search:e.handleSearch}}),a("div",{staticClass:"extend-action"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:e.add}},[e._v("新增")]),a("el-button",{attrs:{size:"small"},on:{click:e.batchExport}},[e._v("批量导出")])],1),a("customTable",{attrs:{columns:e.columns,"data-source":e.dataSource,total:e.total,height:"calc(100vh - 360px)",loading:e.loading},on:{selectChange:e.handleSelectChange,pageChange:e.handlePageChange},scopedSlots:e._u([{key:"action",fn:function(t){return[a("div",{staticClass:"action"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){return e.handleToDetail(t.data)}}},[e._v("详情")]),a("el-popconfirm",{attrs:{title:"确定删除该条内容吗"},on:{onConfirm:function(a){return e.handleDelete(t.data)}}},[a("el-button",{attrs:{slot:"reference",size:"small",type:"danger"},slot:"reference"},[e._v("删除")])],1)],1)]}},{key:"detail",fn:function(t){return[a("el-link",{attrs:{type:"primary"},on:{click:function(a){return e.handleToDetail(t.data)}}},[e._v("查看")])]}},{key:"permitting_state_name",fn:function(t){return[a("el-tag",[e._v(e._s(t.data.permitting_state_name))])]}}])}),a("el-drawer",{attrs:{size:"85%",visible:e.showDetailModal,"destroy-on-close":!0},on:{"update:visible":function(t){e.showDetailModal=t},close:e.closeDrawer}},[e.showDetailModal&&1===e.drawerType?a("detail-modal",[e.modalFreshControl?a("deposits-create",{attrs:{"with-modal":e.withModal},on:{refresh:e.modalRefresh,refreshList:e.refreshList,close:e.closeDrawer}}):e._e()],1):e._e(),e.showDetailModal&&2===e.drawerType?a("detail-modal",[a("deposits-detail",{attrs:{"with-modal":e.withModal},on:{refresh:e.modalRefresh,refreshList:e.refreshList,close:e.closeDrawer}})],1):e._e()],1)],1)},s=[],n=a("c7eb"),r=a("5530"),l=a("1da1"),o=(a("d81d"),a("a573"),a("878f")),p=a("6cff"),c=a("b775");function d(e){return Object(c["a"])({url:"/BidSecurityDeposits/getList",method:"post",data:e})}function m(e){return Object(c["a"])({url:"/BidSecurityDeposits/delete",method:"post",data:e})}var u=a("277f"),_=a("c1df"),f=a.n(_),y=a("1aac"),b=a("1825"),h=a("77b4"),v=a("ed08"),g={components:{customTable:o["a"],searchComponent:p["a"],depositsCreate:b["default"],depositsDetail:h["default"],detailModal:y["a"]},data:function(){return{drawerType:1,showDetailModal:!1,modalFreshControl:!0,withModal:{ispage:null,id:null},dataSource:[],columns:[{title:"创建人",key:"create_name",minWidth:"120"},{title:"项目名称",key:"project_name",minWidth:"120"},{title:"项目负责人",key:"contacts_name",minWidth:"120"},{title:"投标公司",key:"bid_company_name",minWidth:"120"},{title:"保证金金额",key:"earnest_money",minWidth:"120"},{title:"当前阶段",key:"phase",minWidth:"120"},{title:"更新日期",key:"update_time",minWidth:"120"},{title:"审批状态",key:"permitting_state_name",minWidth:"120",render:"permitting_state_name"},{title:"快速操作",key:"action",fixed:"right",width:"160px",render:"action"}],searchParams:{},total:0,loading:!1,searchConfig:{formItemLength:5,span:6,labelWidth:"80px",initValue:{},formItem:[{label:"项目名称",value:"project_id",type:"project",placeholder:"请选择项目负责人"},{label:"项目负责人",value:"contacts_id",type:"staff",placeholder:"请选择项目负责人"},{label:"投标公司",value:"bid_company_id",type:"company"},{label:"当前阶段",value:"phase",type:"select",options:[{value:"1",label:"客户垫款"},{value:"2",label:"支付投标人"},{value:"3",label:"支付招标方"},{value:"4",label:"退还投标人"},{value:"5",label:"退还集团"},{value:"6",label:"退还客户"}]},{label:"审批状态",value:"permitting_state",type:"select",options:[{value:"1",label:"已审批"},{value:"2",label:"已驳回"},{value:"3",label:"待审批"}]},{label:"保证金金额",value:["earnest_money_min","earnest_money_max"],type:"amount",placeholder:"请输入保证金"},{label:"创建日期",value:"date",type:"dateRange"}]}}},mounted:function(){this.getCompanyList(),this.$route.params.initValue?this.searchConfig.initValue=this.$route.params.initValue:this.getDataSource()},methods:{closeDrawer:function(){this.withModal=void 0,this.showDetailModal=!1,this.refreshList()},refreshList:function(){this.getDataSource()},modalRefresh:function(){var e=this;this.modalFreshControl=!1,this.$nextTick((function(){e.modalFreshControl=!0}))},batchExport:function(){var e=this;return Object(l["a"])(Object(n["a"])().mark((function t(){var a,i,s;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d(Object(r["a"])({page:1,limit:1e6},e.searchParams));case 2:a=t.sent,i=e.columns.map((function(e){return e.key})),s=[],a.data.map((function(e){var t={};i.map((function(a){t[a]=e[a]})),s.push(t)})),Object(v["b"])(s,e.$route.meta.title,e.columns.map((function(e){return e.title})),e.$route.meta.title);case 7:case"end":return t.stop()}}),t)})))()},getCompanyList:function(){var e=this;return Object(l["a"])(Object(n["a"])().mark((function t(){var a,i;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["n"])();case 2:return a=t.sent,t.next=5,Object(u["m"])();case 5:i=t.sent,e.$store.commit("company/setCompanyList",a.data),e.$store.commit("company/setProjectList",i.data);case 8:case"end":return t.stop()}}),t)})))()},handleEdit:function(e){this.$router.push({name:"depositLaunch",params:{id:e.id}})},handleDelete:function(e){var t=this;m({id:e.id}).then((function(e){200===e.code&&(t.$message({type:"success",message:"删除成功"}),t.getDataSource())}))},handleToDetail:function(e){this.withModal={data:e,id:e.id,type:"edit",is_permit:!1},this.showDetailModal=!0,this.drawerType=2},handleSelectChange:function(e){this.selectArr=e},handlePageChange:function(e){this.searchParams=Object(r["a"])(Object(r["a"])({},this.searchParams),e),this.getDataSource()},handleSearch:function(e){this.searchParams=Object(r["a"])(Object(r["a"])({},this.searchParams),e),e.date?(this.searchParams.start_time=f()(e.date[0]).format("YYYY-MM-DD HH:mm:ss"),this.searchParams.end_time=f()(e.date[1]).format("YYYY-MM-DD HH:mm:ss")):(this.searchParams.start_time="",this.searchParams.end_time=""),this.getDataSource()},add:function(){this.withModal={type:"create"},this.showDetailModal=!0},getDataSource:function(){var e=this;return Object(l["a"])(Object(n["a"])().mark((function t(){var a;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,d(e.searchParams);case 3:a=t.sent,console.log("res",a),e.loading=!1,e.total=a.count,e.dataSource=a.data;case 8:case"end":return t.stop()}}),t)})))()}}},j=g,k=(a("57c0"),a("2877")),w=Object(k["a"])(j,i,s,!1,null,"3c45b5ae",null);t["default"]=w.exports},"77b4":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.showSubmitBtn?e._e():i("div",{staticStyle:{position:"absolute",top:"50px",right:"300px","z-index":"10"}},["已审批"==e.state_name?i("img",{staticStyle:{display:"block",width:"150px"},attrs:{src:a("0993"),alt:""}}):e._e(),"审批中"==e.state_name?i("img",{staticStyle:{display:"block",width:"150px"},attrs:{src:a("9a04"),alt:""}}):e._e(),"已驳回"==e.state_name?i("img",{staticStyle:{display:"block",width:"150px"},attrs:{src:a("ac6f"),alt:""}}):e._e()]),e.permit_type_name?i("div",{staticStyle:{"margin-top":"50px"}},[i("span",{staticStyle:{"padding-left":"20px",color:"#666666","padding-top":"50px"}},[e._v("审批事项："+e._s(e.permit_type_name))]),e.showIsTop?i("el-button",{staticStyle:{"margin-left":"20px"},attrs:{size:"small",type:"primary"},on:{click:e.handleTop}},[e._v(e._s(e.istop?"取消置顶":"置顶主页"))]):e._e()],1):e._e(),i("div",{staticStyle:{display:"flex",width:"100%","justify-content":"center","margin-top":"150px"}},[i("el-steps",{staticStyle:{position:"relative"},attrs:{active:e.active,"finish-status":"success"}},[i("div",{staticStyle:{position:"absolute",top:"-80px",left:"0"}},[i("div",{staticStyle:{"margin-bottom":"10px"}},[e._v("项目名称："),i("span",{staticStyle:{color:"#666666"}},[e._v(e._s(e.details.project_name))])]),i("div",[e._v("保证金金额："),i("span",{staticStyle:{color:"#666666"}},[e._v(e._s(e.details.earnest_money))])])]),e._l(e.details.permit_process,(function(t,a){return i("el-step",{key:a,class:"已驳回"==t.name?"redColor":"",staticStyle:{width:"200px"},attrs:{title:t.name}},[i("template",{slot:"description"},[a==e.active&&1==e.details.permitting_state?i("div",[i("div",{staticStyle:{"margin-left":"-60px",width:"200px"}},[i("div",{staticStyle:{width:"180px",margin:"0 auto"}},[i("div",{staticStyle:{height:"100px",width:"1px","border-left":"1px solid #eee",margin:"0 auto"}}),i("div",{staticStyle:{width:"180px",border:"1px solid #eee",margin:"0 auto",color:"black",padding:"20px"}},[i("p",[i("el-button",{attrs:{disabled:e.typeStatus,size:"mini",type:"primary"},on:{click:function(t){e.handleDetails(e.active+1,e.details.id,e.active+1<e.details.permit_process.length?null:e.details["step_1"])}}},[e._v("创建")])],1)])])])]):e._e(),0==a&&e.details.step_1?i("div",{staticStyle:{"margin-left":"-60px",width:"200px"}},[i("div",{staticStyle:{width:"180px",margin:"0 auto"}},[i("div",{staticStyle:{height:"100px",width:"1px","border-left":"1px solid #eee",margin:"0 auto"}}),i("div",{staticStyle:{width:"180px",border:"1px solid #eee",margin:"0 auto",color:"black",padding:"20px"}},[i("p",[e._v("付款方式："),i("span",[e._v(e._s(e.details.step_1.pay_type_name))])]),i("p",[e._v("付款方："),i("span",[e._v(e._s(e.details.step_1.payment_company_name))])]),i("p",[e._v("付款账号："),i("span",[e._v(e._s(e.details.step_1.payment_company_bank_number))])]),i("p",[e._v("收款方："),i("span",[e._v(e._s(e.details.step_1.revenue_company_name))])]),i("p",[e._v("收款账号："),i("span",[e._v(e._s(e.details.step_1.revenue_company_bank_number))])]),i("p",[e._v("金额："),i("span",[e._v(e._s(e.details.step_1.payment_money))])]),i("p",[e._v("备注："),i("span",[e._v(e._s(e.details.step_1.remarks))])]),i("p",[e._v("创建时间："),i("span",[e._v(e._s(e.details.step_1.create_time))])]),i("p",{staticStyle:{display:"flex"}},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.handlePreView("1")}}},[e._v("查看回执")]),i("el-button",{attrs:{disabled:e.typeStatus||3!==e.details.permitting_state,size:"mini",type:"primary"},on:{click:function(t){return e.handleDetails(1,e.details.id,e.details.step_1)}}},[e._v("编辑")])],1)])])]):e._e(),1==a&&e.details.step_2?i("div",{staticStyle:{"margin-left":"-60px",width:"200px"}},[i("div",{staticStyle:{width:"180px",margin:"0 auto"}},[i("div",{staticStyle:{height:"100px",width:"1px","border-left":"1px solid #eee",margin:"0 auto"}}),i("div",{staticStyle:{width:"180px",border:"1px solid #eee",margin:"0 auto",color:"black",padding:"20px"}},[i("p",[e._v("付款方式："),i("span",[e._v(e._s(e.details.step_2.pay_type_name))])]),i("p",[e._v("付款方："),i("span",[e._v(e._s(e.details.step_2.payment_company_name))])]),i("p",[e._v("付款账号："),i("span",[e._v(e._s(e.details.step_2.payment_company_bank_number))])]),i("p",[e._v("收款方："),i("span",[e._v(e._s(e.details.step_2.revenue_company_name))])]),i("p",[e._v("收款账号："),i("span",[e._v(e._s(e.details.step_2.revenue_company_bank_number))])]),i("p",[e._v("金额："),i("span",[e._v(e._s(e.details.step_2.payment_money))])]),i("p",[e._v("备注："),i("span",[e._v(e._s(e.details.step_2.remarks))])]),i("p",[e._v("创建时间："),i("span",[e._v(e._s(e.details.step_2.create_time))])]),i("p",{staticStyle:{display:"flex"}},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.handlePreView("2")}}},[e._v("查看回执")]),i("el-button",{attrs:{disabled:e.typeStatus||3!==e.details.permitting_state,size:"mini",type:"primary"},on:{click:function(t){return e.handleDetails(2,e.details.id,e.details.step_2)}}},[e._v("编辑")])],1)])])]):e._e(),2==a&&e.details.step_3?i("div",{staticStyle:{"margin-left":"-60px",width:"200px"}},[i("div",{staticStyle:{width:"180px",margin:"0 auto"}},[i("div",{staticStyle:{height:"100px",width:"1px","border-left":"1px solid #eee",margin:"0 auto"}}),i("div",{staticStyle:{width:"180px",border:"1px solid #eee",margin:"0 auto",color:"black",padding:"20px"}},[i("p",[e._v("付款方式："),i("span",[e._v(e._s(e.details.step_3.pay_type_name))])]),i("p",[e._v("付款方："),i("span",[e._v(e._s(e.details.step_3.payment_company_name))])]),i("p",[e._v("付款账号："),i("span",[e._v(e._s(e.details.step_3.payment_company_bank_number))])]),i("p",[e._v("收款方："),i("span",[e._v(e._s(e.details.step_3.revenue_company_name))])]),i("p",[e._v("收款账号："),i("span",[e._v(e._s(e.details.step_3.revenue_company_bank_number))])]),i("p",[e._v("金额："),i("span",[e._v(e._s(e.details.step_3.payment_money))])]),i("p",[e._v("备注："),i("span",[e._v(e._s(e.details.step_3.remarks))])]),i("p",[e._v("创建时间："),i("span",[e._v(e._s(e.details.step_3.create_time))])]),i("p",{staticStyle:{display:"flex"}},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.handlePreView("3")}}},[e._v("查看回执")]),i("el-button",{attrs:{disabled:e.typeStatus||3!==e.details.permitting_state,size:"mini",type:"primary"},on:{click:function(t){return e.handleDetails(3,e.details.id,e.details.step_3)}}},[e._v("编辑")])],1)])])]):e._e(),3==a&&e.details.step_4?i("div",{staticStyle:{"margin-left":"-60px",width:"200px"}},[i("div",{staticStyle:{width:"180px",margin:"0 auto"}},[i("div",{staticStyle:{height:"100px",width:"1px","border-left":"1px solid #eee",margin:"0 auto"}}),i("div",{staticStyle:{width:"180px",border:"1px solid #eee",margin:"0 auto",color:"black",padding:"20px"}},[i("p",[e._v("付款方式："),i("span",[e._v(e._s(e.details.step_4.pay_type_name))])]),i("p",[e._v("付款方："),i("span",[e._v(e._s(e.details.step_4.payment_company_name))])]),i("p",[e._v("付款账号："),i("span",[e._v(e._s(e.details.step_4.payment_company_bank_number))])]),i("p",[e._v("收款方："),i("span",[e._v(e._s(e.details.step_4.revenue_company_name))])]),i("p",[e._v("收款账号："),i("span",[e._v(e._s(e.details.step_4.revenue_company_bank_number))])]),i("p",[e._v("金额："),i("span",[e._v(e._s(e.details.step_4.payment_money))])]),i("p",[e._v("备注："),i("span",[e._v(e._s(e.details.step_4.remarks))])]),i("p",[e._v("创建时间："),i("span",[e._v(e._s(e.details.step_4.create_time))])]),i("p",{staticStyle:{display:"flex"}},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.handlePreView("4")}}},[e._v("查看回执")]),i("el-button",{attrs:{disabled:e.typeStatus||3!==e.details.permitting_state,size:"mini",type:"primary"},on:{click:function(t){return e.handleDetails(4,e.details.id,e.details.step_4)}}},[e._v("编辑")])],1)])])]):e._e(),4==a&&e.details.step_5?i("div",{staticStyle:{"margin-left":"-60px",width:"200px"}},[i("div",{staticStyle:{width:"180px",margin:"0 auto"}},[i("div",{staticStyle:{height:"100px",width:"1px","border-left":"1px solid #eee",margin:"0 auto"}}),i("div",{staticStyle:{width:"180px",border:"1px solid #eee",margin:"0 auto",color:"black",padding:"20px"}},[i("p",[e._v("付款方式："),i("span",[e._v(e._s(e.details.step_5.pay_type_name))])]),i("p",[e._v("付款方："),i("span",[e._v(e._s(e.details.step_5.payment_company_name))])]),i("p",[e._v("付款账号："),i("span",[e._v(e._s(e.details.step_5.payment_company_bank_number))])]),i("p",[e._v("收款方："),i("span",[e._v(e._s(e.details.step_5.revenue_company_name))])]),i("p",[e._v("收款账号："),i("span",[e._v(e._s(e.details.step_5.revenue_company_bank_number))])]),i("p",[e._v("金额："),i("span",[e._v(e._s(e.details.step_5.payment_money))])]),i("p",[e._v("备注："),i("span",[e._v(e._s(e.details.step_5.remarks))])]),i("p",[e._v("创建时间："),i("span",[e._v(e._s(e.details.step_5.create_time))])]),i("p",{staticStyle:{display:"flex"}},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.handlePreView("5")}}},[e._v("查看回执")]),i("el-button",{attrs:{disabled:e.typeStatus||3!==e.details.permitting_state,size:"mini",type:"primary"},on:{click:function(t){return e.handleDetails(5,e.details.id,e.details.step_5)}}},[e._v("编辑")])],1)])])]):e._e(),5==a&&e.details.step_6?i("div",{staticStyle:{"margin-left":"-60px",width:"200px"}},[i("div",{staticStyle:{width:"180px",margin:"0 auto"}},[i("div",{staticStyle:{height:"100px",width:"1px","border-left":"1px solid #eee",margin:"0 auto"}}),i("div",{staticStyle:{width:"180px",border:"1px solid #eee",margin:"0 auto",color:"black",padding:"20px"}},[i("p",[e._v("付款方式："),i("span",[e._v(e._s(e.details.step_6.pay_type_name))])]),i("p",[e._v("付款方："),i("span",[e._v(e._s(e.details.step_6.payment_company_name))])]),i("p",[e._v("付款账号："),i("span",[e._v(e._s(e.details.step_6.payment_company_bank_number))])]),i("p",[e._v("收款方："),i("span",[e._v(e._s(e.details.step_6.revenue_company_name))])]),i("p",[e._v("收款账号："),i("span",[e._v(e._s(e.details.step_6.revenue_company_bank_number))])]),i("p",[e._v("金额："),i("span",[e._v(e._s(e.details.step_6.payment_money))])]),i("p",[e._v("备注："),i("span",[e._v(e._s(e.details.step_6.remarks))])]),i("p",[e._v("创建时间："),i("span",[e._v(e._s(e.details.step_6.create_time))])]),i("p",{staticStyle:{display:"flex"}},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.handlePreView("6")}}},[e._v("查看回执")]),i("el-button",{attrs:{disabled:e.typeStatus||3!==e.details.permitting_state,size:"mini",type:"primary"},on:{click:function(t){return e.handleDetails(6,e.details.id,e.details.step_6)}}},[e._v("编辑")])],1)])])]):e._e()])],2)}))],2)],1),e.canyuShow?i("div",[e.showSubmitBtn||0!=e.state?e._e():i("div",{staticClass:"action",staticStyle:{"text-align":"center","margin-top":"20px","margin-bottom":"200px"}},[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.handlePass(e.state)}}},[e._v("通过")]),i("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(t){return e.handleReject(e.state)}}},[e._v("驳回")]),e.permit_response&&void 0!==e.permit_response.project_id?i("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.toProjectDetail}},[e._v("Go项目脑图审批")]):e._e()],1)]):e._e(),i("el-dialog",{attrs:{title:"回执单查看",visible:e.preViewImg,"append-to-body":!0},on:{"update:visible":function(t){e.preViewImg=t}}},[0==e.fileUrl.length?i("div",[e._v("无回执")]):e._e(),e.fileUrl.length?i("div",e._l(e.fileUrl,(function(t,a){return i("div",{key:a,staticClass:"receipt_item"},[i("div",[e._v(e._s(t))]),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.handleReceipt(t)}}},[e._v("查看")])],1)})),0):e._e()]),i("el-dialog",{attrs:{width:"70vw",visible:e.showDetailModal,"destroy-on-close":!0,"append-to-body":!0},on:{"update:visible":function(t){e.showDetailModal=t},close:e.modalClose}},[e.showDetailModal?i("detail-modal",{attrs:{height:"70vh"}},[e.modalFreshControl?i("deposits-create",{attrs:{"with-modal":e.withModalForLaunch},on:{refresh:e.modalRefresh,refreshList:e.refreshList,close:e.modalClose}}):e._e()],1):e._e()],1)],1)},s=[],n=a("c7eb"),r=a("1da1"),l=a("5530"),o=(a("caad"),a("d81d"),a("b0c0"),a("e9c4"),a("b64b"),a("a573"),a("277f")),p=a("429f"),c=a("2f62"),d=a("1aac"),m=a("1825"),u=a("ed08"),_={components:{detailModal:d["a"],depositsCreate:m["default"]},props:{withModal:{type:Object,default:void 0}},data:function(){return{showDetailModal:!1,modalFreshControl:!0,withModalForLaunch:{},state_name:"",permit_type_name:"",showIsTop:!1,istop:!1,canyuShow:!0,showSubmitBtn:!0,state:"",typeStatus:!1,fileUrl:[],preViewImg:!1,active:0,details:{},itemArray:[],permit_response:void 0}},mounted:function(){this.initHandler()},methods:Object(l["a"])(Object(l["a"])({},Object(c["c"])("app",["OPEN_PREVIEW"])),{},{toProjectDetail:function(){var e=this,t=e.permit_response.info;"未签约"===t.main_contract_id?Object(u["c"])(this,"NewProject",{data:JSON.stringify(t),type:"edit",isTop:t.istop}):Object(u["c"])(this,"projectDetail",{id:t.id,isTop:t.istop})},initHandler:function(){var e,t,a,i;if(this.withModal){if(this.state_name=null===(e=this.withModal.permit_row)||void 0===e?void 0:e.state_name,this.permit_type_name=null===(t=this.withModal.permit_row)||void 0===t?void 0:t.permit_type_name,this.istop=null===(a=this.withModal.permit_row)||void 0===a?void 0:a.isTop,this.showIsTop=0===(null===(i=this.withModal.permit_row)||void 0===i?void 0:i.state),this.withModal.hide_permit_btn&&(this.canyuShow=!1),this.getDetails(),this.withModal.type){var s=this.withModal.type;switch(s){case"edit":this.typeStatus=!1;break;case"audit":this.showSubmitBtn=!1,this.typeStatus=!0,this.permitsGetInfoFun({id:this.withModal.permit_id});break;default:break}}}else this.state_name=this.$route.query.state_name,this.permit_type_name=this.$route.query.permit_type_name,this.istop="1"===this.$route.query.isTop,this.showIsTop="0"===this.$route.query.state,this.$route.query.canyuShow||void 0===this.$route.query.canyuShow||(this.canyuShow=this.$route.query.canyuShow),this.getDetails(),this.$route.query.type&&(this.typeStatus=Boolean(this.$route.query.type),this.canyuShow&&this.permitsGetInfoFun({id:this.$route.query.shenpiId}),this.showSubmitBtn=!this.$route.query.type)},refreshList:function(){this.initHandler()},modalRefresh:function(){var e=this;this.modalFreshControl=!1,this.$nextTick((function(){e.modalFreshControl=!0}))},modalClose:function(){this.showDetailModal=!1,this.withModalForLaunch=void 0},handleTop:function(e){var t=this;return Object(r["a"])(Object(n["a"])().mark((function e(){var a;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["a"])({id:t.$route.query.shenpiId});case 2:a=e.sent,200==a.code&&(t.$message.success(a.msg),t.istop=!t.istop);case 4:case"end":return e.stop()}}),e)})))()},handlePass:function(e){var t=this;return Object(r["a"])(Object(n["a"])().mark((function e(){var a;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(p["j"])({id:t.$route.query.shenpiId,type:"1"});case 2:a=e.sent,200==a.code&&(t.$message.success(a.msg),t.$router.push({name:"pendApprovalList"}));case 4:case"end":return e.stop()}}),e)})))()},handleReject:function(e){var t=this;return Object(r["a"])(Object(n["a"])().mark((function e(){var a;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(p["j"])({id:t.$route.query.shenpiId,type:"2"});case 2:a=e.sent,200==a.code&&(t.$message.success(a.msg),t.$router.push({name:"pendApprovalList"}));case 4:case"end":return e.stop()}}),e)})))()},permitsGetInfoFun:function(e){var t=this;return Object(r["a"])(Object(n["a"])().mark((function a(){var i,s,r;return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(o["z"])(e);case 2:if(i=a.sent,t.state=i.data.state,s=i.data.project_id,!s){a.next=10;break}return a.next=8,Object(p["e"])(s);case 8:r=a.sent,t.permit_response=Object(l["a"])(Object(l["a"])({},i.data),{},{info:r.data[0]||{}});case 10:case"end":return a.stop()}}),a)})))()},getDetails:function(){var e=this;return Object(r["a"])(Object(n["a"])().mark((function t(){var a,i,s;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.withModal?e.withModal.id?e.withModal.id:null===(i=e.withModal.permit_row)||void 0===i?void 0:i.bind_id:e.$route.query.id,t.next=3,Object(o["d"])({id:a});case 3:s=t.sent,e.typeStatus=0===s.data.permitting_state,2===s.data.permitting_state&&(s.data.permit_process[s.data.phase-1].name="已驳回"),e.details=s.data,s.data.permit_process.map((function(t,a){2===t.state&&(e.active=a+1)}));case 8:case"end":return t.stop()}}),t)})))()},handleDetails:function(e,t,a){this.withModalForLaunch={step:e,id:t,data:Object(l["a"])(Object(l["a"])({},a),{},{client_compan_id:this.details.client_company_id}),type:"edit"},this.showDetailModal=!0},handlePreView:function(e){this.preViewImg=!0;var t=JSON.parse(this.details["step_".concat(e)].file);this.fileUrl=t},handleDownLoad:function(){},handleReceipt:function(e){var t,a=e.split(".").pop();["pdf"].includes(a)&&(t="pdf"),["doc","docx"].includes(a)&&(t="doc"),["png","jpg","jpeg","gif","bmp"].includes(a)&&(t="pic"),this.OPEN_PREVIEW({url:e,type:t})}})},f=_,y=(a("b9bb"),a("2877")),b=Object(y["a"])(f,i,s,!1,null,"7a89e96c",null);t["default"]=b.exports},"7cce":function(e,t,a){"use strict";a("1423")},9437:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var i=a("b775");function s(e){return Object(i["a"])({url:"Publics/upload",method:"post",data:e,headers:{"content-type":"multipart/form-data"}})}},"9a04":function(e,t,a){e.exports=a.p+"static/img/checking.73c367ae.png"},ac6f:function(e,t,a){e.exports=a.p+"static/img/refuted.d21e0353.png"},ace5:function(e,t,a){},b9bb:function(e,t,a){"use strict";a("ace5")},d9c8:function(e,t,a){},ed08:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return r})),a.d(t,"c",(function(){return l}));a("53ca"),a("d81d"),a("a434"),a("d3b7"),a("4d63"),a("ac1f"),a("2c3e"),a("00b4"),a("25f0"),a("4d90"),a("5319"),a("0643"),a("4e3e"),a("a573"),a("159b");var i=a("21a6"),s=a("25ca");a("bc3a"),a("aeb1");function n(e,t,a,n){var r=[],l=[],o=function(e){var t=0;for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t++;return t};for(var p in e)if(console.log("------------------------"),Object.prototype.hasOwnProperty.call(e,p)){var c=e[p],d=[];for(var m in c)if(Object.prototype.hasOwnProperty.call(c,m)){var u=c[m];d.push(u),l.length<o(c)&&l.push(m)}r.push(d)}var _=[];a.map((function(e,t){"快速操作"!=e&&"详情"!=e&&_.push(e)})),r.splice(0,0,l,_),console.log("excel_data",s);var f=s["utils"].aoa_to_sheet(r),y=s["utils"].book_new(),b=[{hidden:!0}];f["!rows"]=b,s["utils"].book_append_sheet(y,f,n);var h=s["write"](y,{bookType:"xlsx",type:"array"}),v=new Blob([h],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});Object(i["saveAs"])(v,t+".xlsx")}function r(e){var t=-1!==e.lastIndexOf("?")?decodeURIComponent(e.substring(e.lastIndexOf("/")+1,e.lastIndexOf("?"))):decodeURIComponent(e.substring(e.lastIndexOf("/")+1)),a=t.substring(t.lastIndexOf(".")+1);if("png"==a||"jpg"==a||"pdf"==a){var s=document.createElement("a");s.href=e,s.download=t,s.target="_blank",s.click()}else fetch(e,{mode:"no-cors"}).then((function(e){return e.blob()})).then((function(e){console.log("blob",e),Object(i["saveAs"])(e,t)}))}function l(e,t,a){console.log("self",e);var i=e.$router.resolve({name:t,query:a}),s=window.open(i.href,t);s&&s.location.reload()}}}]);