(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ea1fe51c"],{"13d5":function(e,t,a){"use strict";var n=a("23e7"),r=a("d58f").left,i=a("a640"),c=a("ae40"),o=i("reduce"),s=c("reduce",{1:0});n({target:"Array",proto:!0,forced:!o||!s},{reduce:function(e){return r(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},2081:function(e,t,a){"use strict";a("c957")},2978:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("searchComponent",{attrs:{"search-config":e.searchConfig},on:{search:e.handleSearch}}),a("div",{staticClass:"extend-action"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("新增")]),a("el-button",{attrs:{size:"small"},on:{click:e.batchExport}},[e._v("批量导出")])],1),a("customTable",{attrs:{columns:e.columns,"data-source":e.dataSource,total:e.total,height:"calc(100vh - 310px)",loading:e.loading},on:{selectChange:e.handleSelectChange,pageChange:e.handlePageChange},scopedSlots:e._u([{key:"action",fn:function(t){return[a("div",{staticClass:"action"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){return e.handleToDetail(t.data)}}},[e._v("详情")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){return e.handleTop(t.data)}}},[e._v(e._s(t.data.istop?"取消置顶":"置顶主页"))])],1)]}},{key:"detail",fn:function(t){return[a("el-link",{attrs:{type:"primary"},on:{click:function(a){return e.handleToDetail(t.data)}}},[e._v("查看")])]}},{key:"state_name",fn:function(t){return[a("el-tag",[e._v(e._s(t.data.state_name))])]}}])}),a("el-dialog",{attrs:{title:"新建审批项",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){return e.add(1)}}},[e._v("合同")]),a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){return e.add(2)}}},[e._v("开票")]),a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){return e.add(3)}}},[e._v("转账")])],1),a("el-dialog",{attrs:{title:"资金划转详情",visible:e.moneyModal,width:"30%"},on:{"update:visible":function(t){e.moneyModal=t}}},[a("p",[e._v("划转帐号："+e._s(e.moneyDetails.from))]),a("p",[e._v("操作:"+e._s(e.moneyDetails.type))]),a("p",[e._v("接收帐号："+e._s(e.moneyDetails.to))]),a("p",[e._v("划转金额："+e._s(e.moneyDetails.money))]),a("p",[e._v("备注："+e._s(e.moneyDetails.remarks))])])],1)},r=[],i=a("c7eb"),c=a("5530"),o=a("1da1"),s=(a("d81d"),a("e9c4"),a("a9e3"),a("b64b"),a("a573"),a("878f")),u=a("6cff"),l=a("429f"),d=a("277f"),p=a("ed08"),f={components:{customTable:s["a"],searchComponent:u["a"]},data:function(){return{moneyDetails:{},moneyModal:!1,dialogVisible:!1,columns:[{title:"审批编号",key:"id",minWidth:"120"},{title:"创建人",key:"create_name",minWidth:"120"},{title:"审批事项",key:"permit_type_name",minWidth:"120"},{title:"审批节点",key:"remarks",minWidth:"120"},{title:"上一节点审批时间",key:"update_time",minWidth:"120"},{title:"当前状态",key:"state_name",minWidth:"120",render:"state_name"},{title:"发起日期",key:"create_time",minWidth:"120"},{title:"快速操作",key:"action",fixed:"right",width:"160px",render:"action"}],dataSource:[],searchParams:{},total:0,loading:!1,companyList:[],searchConfig:{formItemLength:3,span:6,labelWidth:"80px",formItem:[{label:"立项时间",value:"date",type:"dateRange"},{label:"审核状态",value:"state",type:"select",options:[{value:"1",label:"已审批"},{value:"2",label:"已驳回"},{value:"3",label:"待审批"}]},{label:"审批事项",value:"permit_type",type:"select",options:[{value:"1",label:"新建项目"},{value:"2",label:"结项"},{value:"3",label:"项目付款"},{value:"4",label:"项目开票"},{value:"5",label:"项目签约"},{value:"6",label:"商务费新建"},{value:"7",label:"商务费编辑"},{value:"8",label:"商务费删除"},{value:"9",label:"行政合同付款"},{value:"10",label:"行政合同开票"},{value:"11",label:"行政合同签约"},{value:"12",label:"发票冲红"},{value:"13",label:"发票作废"},{value:"14",label:"非项目付款"},{value:"15",label:"保证金垫款"},{value:"16",label:"保证金退还"}]}]}}},mounted:function(){this.getDataSource()},methods:{batchExport:function(){var e=this;return Object(o["a"])(Object(i["a"])().mark((function t(){var a,n,r;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["a"])(Object(c["a"])({page:1,limit:1e6},e.searchParams));case 2:a=t.sent,n=e.columns.map((function(e){return e.key})),r=[],a.data.map((function(e){var t={};n.map((function(a){t[a]=e[a]})),r.push(t)})),Object(p["b"])(r,e.$route.meta.title,e.columns.map((function(e){return e.title})),e.$route.meta.title);case 7:case"end":return t.stop()}}),t)})))()},handleTop:function(e){var t=this;return Object(o["a"])(Object(i["a"])().mark((function a(){var n;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(d["a"])({id:e.id});case 2:n=a.sent,200==n.code&&(t.getDataSource(),t.$message.success(n.msg));case 4:case"end":return a.stop()}}),a)})))()},handlePass:function(e){var t=this;return Object(o["a"])(Object(i["a"])().mark((function a(){var n;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(l["g"])({id:e.id,type:"1"});case 2:n=a.sent,200==n.code&&(t.getDataSource(),t.$message.success(n.msg));case 4:case"end":return a.stop()}}),a)})))()},handleReject:function(e){var t=this;return Object(o["a"])(Object(i["a"])().mark((function a(){var n;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(l["g"])({id:e.id,type:"2"});case 2:n=a.sent,200==n.code&&(t.getDataSource(),t.$message.success(n.msg));case 4:case"end":return a.stop()}}),a)})))()},handleToDetail:function(e){var t=this;return Object(o["a"])(Object(i["a"])().mark((function a(){var n,r,c;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(1==e.jump_type&&Object(p["c"])(t,"NewProject",{id:e.id,typeData:1,canyuShow:!1}),2==e.jump_type&&Object(p["c"])(t,"transfer_create",{id:e.id,type:2,canyuShow:!1}),3!=e.jump_type){a.next=11;break}return a.next=5,Object(d["x"])({id:e.id});case 5:n=a.sent,console.log("resp.data.inforesp.data.info",n),n.data.info.is_project="不归属项目"==n.data.info.is_project?0:1,n.data.info.project_id=Number(n.data.info.project_id),r=JSON.parse(JSON.stringify(n.data.info)),Object(p["c"])(t,"openInvoices",{data:JSON.stringify(r),type:3,state:n.data.state,id:n.data.id,canyuShow:!1});case 11:if(4==e.jump_type&&(11==e.permit_type&&Object(p["c"])(t,"administrative_create",{id:e.id,typeData:4,permitType:!0,canyuShow:!1}),Object(p["c"])(t,"administrative_create",{id:e.id,typeData:4,permitType:!1,canyuShow:!1})),5==e.jump_type&&Object(p["c"])(t,"PayRegister",{id:e.id,type:5,canyuShow:!1}),6==e.jump_type&&Object(p["c"])(t,"depositDetail",{bindId:e.bind_id,type:6,shenpiId:e.id,canyuShow:!1}),7!=e.jump_type){a.next=21;break}return a.next=17,Object(d["x"])({id:e.id});case 17:c=a.sent,console.log("resp",c),t.moneyDetails=c.data.info,t.moneyModal=!0;case 21:console.log("jump_type",e);case 22:case"end":return a.stop()}}),a)})))()},handleSelectChange:function(e){this.selectArr=e},handlePageChange:function(e){this.searchParams=Object(c["a"])(Object(c["a"])({},this.searchParams),e),this.getDataSource()},handleSearch:function(e){this.searchParams=Object(c["a"])(Object(c["a"])({},this.searchParams),e),e.date?(this.searchParams.start_time=e.date[0],this.searchParams.end_time=e.date[1]):(this.searchParams.start_time="",this.searchParams.end_time=""),this.getDataSource()},add:function(e){1==e&&this.$router.push({name:"administrative_create"}),2==e&&this.$router.push({name:"openInvoices"}),3==e&&this.$router.push({name:"transfer_create"})},getDataSource:function(){var e=this;return Object(o["a"])(Object(i["a"])().mark((function t(){var a;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,Object(l["a"])(e.searchParams);case 3:a=t.sent,e.loading=!1,e.total=a.count,e.dataSource=a.data,console.log(a);case 8:case"end":return t.stop()}}),t)})))()}}},h=f,b=(a("2081"),a("2877")),m=Object(b["a"])(h,n,r,!1,null,"b08ed25c",null);t["default"]=m.exports},3841:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"g",(function(){return i})),a.d(t,"e",(function(){return c})),a.d(t,"c",(function(){return o})),a.d(t,"f",(function(){return s})),a.d(t,"d",(function(){return u})),a.d(t,"a",(function(){return l}));var n=a("b775");function r(e){return Object(n["a"])({url:"/Staffs/add",method:"post",data:e})}function i(e){return Object(n["a"])({url:"/Staffs/update",method:"post",data:e})}function c(e){return Object(n["a"])({url:"/Staffs/getInfo",method:"post",data:e})}function o(e){return Object(n["a"])({url:"/Staffs/delete",method:"post",data:e})}function s(e){return Object(n["a"])({url:"/Staffs/getList",method:"post",data:e})}function u(e){return Object(n["a"])({url:"/Publics/getArea",method:"post",data:e})}function l(e){return Object(n["a"])({url:"/Payments/deleteStaffBank",method:"post",data:e})}},"7db0":function(e,t,a){"use strict";var n=a("23e7"),r=a("b727").find,i=a("44d2"),c=a("ae40"),o="find",s=!0,u=c(o);o in[]&&Array(1)[o]((function(){s=!1})),n({target:"Array",proto:!0,forced:s||!u},{find:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),i(o)},"9d4a":function(e,t,a){"use strict";var n=a("23e7"),r=a("2266"),i=a("1c0b"),c=a("825a");n({target:"Iterator",proto:!0,real:!0},{reduce:function(e){c(this),i(e);var t=arguments.length<2,a=t?void 0:arguments[1];if(r(this,(function(n){t?(t=!1,a=n):a=e(a,n)}),void 0,!1,!0),t)throw TypeError("Reduce of empty iterator with no initial value");return a}})},c957:function(e,t,a){},d58f:function(e,t,a){var n=a("1c0b"),r=a("7b0b"),i=a("44ad"),c=a("50c4"),o=function(e){return function(t,a,o,s){n(a);var u=r(t),l=i(u),d=c(u.length),p=e?d-1:0,f=e?-1:1;if(o<2)while(1){if(p in l){s=l[p],p+=f;break}if(p+=f,e?p<0:d<=p)throw TypeError("Reduce of empty array with no initial value")}for(;e?p>=0:d>p;p+=f)p in l&&(s=a(s,l[p],p,u));return s}};e.exports={left:o(!1),right:o(!0)}},ed08:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return c})),a.d(t,"c",(function(){return o}));a("53ca"),a("d81d"),a("a434"),a("d3b7"),a("4d63"),a("ac1f"),a("2c3e"),a("00b4"),a("25f0"),a("4d90"),a("5319"),a("0643"),a("4e3e"),a("a573"),a("159b");var n=a("21a6"),r=a("25ca");a("bc3a"),a("aeb1");function i(e,t,a,i){var c=[],o=[],s=function(e){var t=0;for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t++;return t};for(var u in e)if(console.log("------------------------"),Object.prototype.hasOwnProperty.call(e,u)){var l=e[u],d=[];for(var p in l)if(Object.prototype.hasOwnProperty.call(l,p)){var f=l[p];d.push(f),o.length<s(l)&&o.push(p)}c.push(d)}var h=[];a.map((function(e,t){"快速操作"!=e&&"详情"!=e&&h.push(e)})),c.splice(0,0,o,h),console.log("excel_data",r);var b=r["utils"].aoa_to_sheet(c),m=r["utils"].book_new(),v=[{hidden:!0}];b["!rows"]=v,r["utils"].book_append_sheet(m,b,i);var y=r["write"](m,{bookType:"xlsx",type:"array"}),g=new Blob([y],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});Object(n["saveAs"])(g,t+".xlsx")}function c(e){var t=-1!==e.lastIndexOf("?")?decodeURIComponent(e.substring(e.lastIndexOf("/")+1,e.lastIndexOf("?"))):decodeURIComponent(e.substring(e.lastIndexOf("/")+1)),a=t.substring(t.lastIndexOf(".")+1);if("png"==a||"jpg"==a||"pdf"==a){var r=document.createElement("a");r.href=e,r.download=t,r.target="_blank",r.click()}else fetch(e,{mode:"no-cors"}).then((function(e){return e.blob()})).then((function(e){console.log("blob",e),Object(n["saveAs"])(e,t)}))}function o(e,t,a){console.log("self",e);var n=e.$router.resolve({name:t,query:a});window.open(n.href,"_blank")}},fffc:function(e,t,a){"use strict";var n=a("23e7"),r=a("2266"),i=a("1c0b"),c=a("825a");n({target:"Iterator",proto:!0,real:!0},{find:function(e){return c(this),i(e),r(this,(function(t){if(e(t))return r.stop(t)}),void 0,!1,!0).result}})}}]);