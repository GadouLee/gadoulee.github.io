(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1f1ebb58"],{"35ad":function(t,e,r){"use strict";r.d(e,"c",(function(){return a})),r.d(e,"a",(function(){return c})),r.d(e,"j",(function(){return n})),r.d(e,"e",(function(){return i})),r.d(e,"i",(function(){return s})),r.d(e,"f",(function(){return l})),r.d(e,"h",(function(){return p})),r.d(e,"b",(function(){return u})),r.d(e,"g",(function(){return m})),r.d(e,"d",(function(){return d}));var o=r("b775");function a(t){return Object(o["a"])({url:"/Contracts/info?id=".concat(t.id),method:"post",data:t})}function c(t){return Object(o["a"])({url:"/Contracts/add",method:"post",data:t})}function n(t){return Object(o["a"])({url:"/Contracts/update",method:"post",data:t})}function i(t){return Object(o["a"])({url:"/Contracts/delete",method:"post",data:t})}function s(t){return Object(o["a"])({url:"/Contracts/getProjectList",method:"post",data:t})}function l(t){return Object(o["a"])({url:"/Contracts/getAdministrativeList",method:"post",data:t})}function p(t){return Object(o["a"])({url:"/Contracts/getDraftList",method:"post",data:t})}function u(t){return Object(o["a"])({url:t.id?"/Contracts/editDraft":"/Contracts/draftAdd",method:"post",data:t})}function m(t){return Object(o["a"])({url:"/Contracts/draftInfo?id=".concat(t.id),method:"post",data:t})}function d(t){return Object(o["a"])({url:"/Contracts/delDraft",method:"post",data:t})}},6582:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAABAFJREFUaEPdWs9PE0EU/qYUo4IhGqDYgxBjBDXBRCV6MSb8AXrzZk0MxIM/DuoBDmgU6Qk9iB4sJ/Hm0cSjJqgHUPFHlLT4G6NNWwoIFKyF7jMz7eK23XZ3u93WuqemO/Pm+958896bmWUowOOnmS0VWD5EYG0A7QJYE4B6AFVJ84sAQgB9Bdg4Az2Po3LYyTZ9Mzs8y9eAn/y1Fah0EaSjANufnx0aZbDdi2N5yMmc4XxsGCbAvW3DygUApwEY7p8FJAG4KcHeb3RWDAEI0lQPgS4XEHg6H2JglxysrlfvbOgi4KepvTZIt/KXil44cjsalWA75WR1Y1o9NQkEKXiMwO5Y6PVsGImBjjuY424uEjkJBGnqHIGuaXnByvcM7LyD1V3PNkZWAv8CeBl0LhKqBJKyGbLSs0ZtM5BLTU4ZBBILlp6XQPNanEgCa0tf2BkEAhQcKV600cKcEWVHG5jjgPLfFALJOH/FqNlitmdgF5V5YpVAMsN+/QelkzENEuxNcsZeJRCg0A0AZ4rpTeVYQ9/u48jmdtRUVuuBMNDA6s/yhoIAL8xssIdK4X2JJFz1efAkPIbGKid6Wk6icb1TiwRJWKnnBaAgUKqYvyytwD3hwdPwq1XAeknIuUEQKEXk+R2PCc+PzLzJ8Pbummb0t/KCN9dDIiKx5OKd1JqzQr5fikfR5/Pg2cxbVbP6CAAS7I2s2Fk3El9Cn9eDF7PjquD1SiixgMnFihl95pYjQvMvZ72mwScNDLAABR8CrF2vRKZjc3gQGIZry2G9XUS72dg83BODeP3TVyjwAOgRn4FPALbqQTO55Eev7zYmF/04WLsH3c2dqLTZNbtOx37iqteDd/MfCghemPrMCSwA0MweSvAyigObWtHV0oGqinVZSYSi08Lz4/PcT5mPEc2rdI9wApKeBNbrvY3H4RcZNvZt3Imu5k7VDBqIhkW08S18sQI8t0mmCXArrTXb0d3Sgdo1G1eB/oiG4PYO4n2El1cF97xsUBDIW0JKWDs2bBVycq6tw/dfAfT5BvExon5uZVI2ymGFhPJaxGpe3VbdiK7mE3D7BvF58buVnpdt80VsLIyqLWYlUu5dHqUslI3CdCKMGi6jtUgUB7wYZSDvUsIIiQJqPsU3opQwU8zpIWEVeM5EFHP8h5lyOhcJK8EDyXKaEzC7oVEjYS14XokmTuwKtqVUkrAaPM/AKVvKhIyMR6P0aCNXqgY256rhVsefqZt63qHsj1WSa4FfYJTnwZY8bWYiko6pN9kkEXmURv6/w92ElMStTHker8vTYzY3mNRKWsmQ/Zbm/71i+jsTZXzJJ5Mo62tWpRjL9qJbSaKsPzVIJVKmH3uohcdSfm7zBx1kT++F89WDAAAAAElFTkSuQmCC"},"73ac":function(t,e,r){"use strict";r.r(e);var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"main"},[r("h3",{staticClass:"main-title"},[t._v("签署合同")]),r("div",{staticClass:"main-step"},[r("el-steps",{attrs:{active:t.active,"finish-status":"success"}},[r("el-step",{attrs:{title:"填写信息",description:"签署合同"}}),r("el-step",{attrs:{title:"完成创建",description:"创建成功"}})],1),r("div",{staticClass:"step-content"},[r("div",{directives:[{name:"show",rawName:"v-show",value:0===t.active,expression:"active === 0"}]},[r("contractInfo",{ref:"project_contractInfo",attrs:{"with-modal":t.withModal}})],1),r("div",{directives:[{name:"show",rawName:"v-show",value:1===t.active,expression:"active === 1"}]}),r("div",{directives:[{name:"show",rawName:"v-show",value:2===t.active,expression:"active === 2"}]},[r("createComplete",{attrs:{"back-word":"查看合同","go-to-word":"再次创建",tips:"合同创建成功","handle-back":t.handleBack,recreate:t.Recreate}})],1)]),r("div",{staticClass:"step-button"},[0===t.active?r("el-button",{attrs:{type:"primary"},on:{click:t.handleCreate}},[t._v("创建")]):t._e()],1)],1)])},a=[],c=r("c7eb"),n=r("5530"),i=r("1da1"),s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[r("el-form",{ref:"project_contract_infoForm",staticClass:"demo-project_contract_infoForm",attrs:{model:t.project_contract_infoForm,rules:t.rules,"label-width":"160px"}},[r("el-form-item",{attrs:{label:"所属项目",prop:"project_id"}},[r("TypeSearch",{attrs:{type:"project"},model:{value:t.project_contract_infoForm.project_id,callback:function(e){t.$set(t.project_contract_infoForm,"project_id",e)},expression:"project_contract_infoForm.project_id"}})],1),r("el-form-item",{attrs:{label:"合同甲方公司",prop:"contract_party_a_company_id"}},[r("TypeSearch",{attrs:{type:"company"},model:{value:t.project_contract_infoForm.contract_party_a_company_id,callback:function(e){t.$set(t.project_contract_infoForm,"contract_party_a_company_id",e)},expression:"project_contract_infoForm.contract_party_a_company_id"}})],1),r("el-form-item",{attrs:{label:"合同乙方公司",prop:"contract_party_b_company_id"}},[r("TypeSearch",{attrs:{type:"company"},model:{value:t.project_contract_infoForm.contract_party_b_company_id,callback:function(e){t.$set(t.project_contract_infoForm,"contract_party_b_company_id",e)},expression:"project_contract_infoForm.contract_party_b_company_id"}})],1),r("el-form-item",{attrs:{label:"合同名称",required:"",prop:"contract_money"}},[r("el-input",{attrs:{title:t.project_contract_infoForm.contract_money,placeholder:"请输入合同名称"},model:{value:t.project_contract_infoForm.contract_money,callback:function(e){t.$set(t.project_contract_infoForm,"contract_money",e)},expression:"project_contract_infoForm.contract_money"}})],1),r("el-form-item",{attrs:{label:"合同金额",required:"",prop:"contract_name"}},[r("el-input",{attrs:{title:t.project_contract_infoForm.contract_name,placeholder:"请输入合同金额"},model:{value:t.project_contract_infoForm.contract_name,callback:function(e){t.$set(t.project_contract_infoForm,"contract_name",e)},expression:"project_contract_infoForm.contract_name"}})],1),r("el-form-item",{attrs:{label:"合同类型",prop:"type"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择合同类型"},model:{value:t.project_contract_infoForm.type,callback:function(e){t.$set(t.project_contract_infoForm,"type",e)},expression:"project_contract_infoForm.type"}},[r("el-option",{attrs:{label:"服务合同",value:"1"}}),r("el-option",{attrs:{label:"货物合同",value:"2"}}),r("el-option",{attrs:{label:"工程合同",value:"3"}}),r("el-option",{attrs:{label:"劳务合同",value:"4"}})],1)],1),r("el-form-item",{attrs:{label:"合同税率",prop:"tariff",required:""}},[r("el-select",{staticStyle:{width:"100%"},model:{value:t.project_contract_infoForm.tariff,callback:function(e){t.$set(t.project_contract_infoForm,"tariff",e)},expression:"project_contract_infoForm.tariff"}},[r("el-option",{attrs:{label:"1%",value:1}}),r("el-option",{attrs:{label:"3%",value:3}}),r("el-option",{attrs:{label:"6%",value:6}}),r("el-option",{attrs:{label:"6%",value:9}}),r("el-option",{attrs:{label:"13%",value:13}})],1)],1),r("el-form-item",{attrs:{label:"是否归属项目",prop:"is_project",required:""}},[r("el-select",{staticStyle:{width:"100%"},model:{value:t.project_contract_infoForm.is_project,callback:function(e){t.$set(t.project_contract_infoForm,"is_project",e)},expression:"project_contract_infoForm.is_project"}},[r("el-option",{attrs:{label:"是",value:"1"}}),r("el-option",{attrs:{label:"否",value:"0"}})],1)],1),r("el-form-item",{attrs:{label:"是否为项目主合同",prop:"is_main",required:""}},[r("el-select",{staticStyle:{width:"100%"},model:{value:t.project_contract_infoForm.is_main,callback:function(e){t.$set(t.project_contract_infoForm,"is_main",e)},expression:"project_contract_infoForm.is_main"}},[r("el-option",{attrs:{label:"是",value:"1"}}),r("el-option",{attrs:{label:"否",value:"0"}})],1)],1),r("el-form-item",{attrs:{label:"本合同是否会分包",prop:"is_subcontract",required:""}},[r("el-select",{staticStyle:{width:"100%"},model:{value:t.project_contract_infoForm.is_subcontract,callback:function(e){t.$set(t.project_contract_infoForm,"is_subcontract",e)},expression:"project_contract_infoForm.is_subcontract"}},[r("el-option",{attrs:{label:"是",value:"1"}}),r("el-option",{attrs:{label:"否",value:"0"}})],1)],1),r("el-form-item",{attrs:{label:"分包详情"}},[r("el-input",{attrs:{title:t.project_contract_infoForm.subcontract_remarks,placeholder:"请输入分包详情"},model:{value:t.project_contract_infoForm.subcontract_remarks,callback:function(e){t.$set(t.project_contract_infoForm,"subcontract_remarks",e)},expression:"project_contract_infoForm.subcontract_remarks"}})],1),r("el-form-item",{attrs:{label:"电子合同"}},[r("el-upload",{staticClass:"upload-demo",attrs:{action:"##","file-list":t.fileList,"before-upload":t.beforUpload}},[r("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1)],1)],1)],1)],1)},l=[],p=(r("b0c0"),r("d3b7"),r("3ca3"),r("ddb0"),r("9437")),u={components:{TypeSearch:function(){return r.e("chunk-2d0e19ad").then(r.bind(null,"7ac0"))}},props:{withModal:{type:Object,default:void 0}},data:function(){return{fileList:[],project_contract_infoForm:{type:"",contract_party_a_company_id:"",contract_party_b_company_id:"",contract_name:"",contract_money:"",remarks:"",project_id:"",tariff:"",is_main:"",is_subcontract:"",subcontract_remarks:""},rules:{type:[{required:!0,message:"请选择合同类型",trigger:"change"}],contract_party_a_company_id:[{required:!0,message:"请选择合同甲方公司",trigger:"change"}],contract_party_b_company_id:[{required:!0,message:"请选择合同乙方公司",trigger:"change"}],contract_name:[{required:!0,message:"请输入合同名称",trigger:"blur"}],contract_money:[{required:!0,message:"请输入合同金额",trigger:"blur"}],tariff:[{required:!0,message:"请选择合同税率",trigger:"change"}],is_main:[{required:!0,message:"请选择是否为项目主合同",trigger:"change"}],is_subcontract:[{required:!0,message:"请选择本合同是否会分包",trigger:"change"}],subcontract_remarks:[{required:!0,message:"请输入分包详情",trigger:"blur"}],is_project:[{required:!0,message:"请选择是否归属项目",trigger:"blur"}]}}},methods:{getFormData:function(){var t=!1;if(this.$refs["project_contract_infoForm"].validate((function(e){t=e})),t)return Object(n["a"])({},this.project_contract_infoForm)},resetForm:function(){this.$refs["project_contract_infoForm"].resetFields()},handleRemove:function(t,e){console.log(t,e)},handlePreview:function(t){console.log(t)},beforeRemove:function(t,e){return this.$confirm("确定移除 ".concat(t.name,"？"))},beforUpload:function(t){var e=new FormData;return e.append("files",t),Object(p["a"])(e).then((function(t){})),!1}}},m=u,d=(r("b895"),r("2877")),_=Object(d["a"])(m,s,l,!1,null,"01550513",null),f=_.exports,b=r("ba84"),j=r("35ad"),v={components:{contractInfo:f,createComplete:b["a"]},props:{withModal:{type:Object,default:void 0}},data:function(){return{active:0,FirstStepData:{},extendInfoData:{},contractInfoData:{}}},methods:{handleNext:function(){var t=this.$refs.project_contractInfo.getFormData();t&&(this.contractInfoData=t,this.active++)},handleCreate:function(){var t=this;return Object(i["a"])(Object(c["a"])().mark((function e(){var r,o;return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.$refs.project_contractInfo.getFormData(),r){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Object(j["a"])(Object(n["a"])(Object(n["a"])({},r),{},{contract_pid:"0"}));case 5:o=e.sent,200===o.code&&(t.active=2,t.$emit("refreshList"));case 7:case"end":return e.stop()}}),e)})))()},Recreate:function(){this.$refs.project_contractInfo.resetForm(),this.active=0},handleBack:function(){this.$router.push({name:"personnel_detail"})}}},h=v,y=(r("f71d"),Object(d["a"])(h,o,a,!1,null,"a7dc6064",null));e["default"]=y.exports},"91a2":function(t,e,r){},9437:function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));var o=r("b775");function a(t){return Object(o["a"])({url:"Publics/upload",method:"post",data:t,headers:{"content-type":"multipart/form-data"}})}},b895:function(t,e,r){"use strict";r("91a2")},cc78:function(t,e,r){},f71d:function(t,e,r){"use strict";r("cc78")}}]);